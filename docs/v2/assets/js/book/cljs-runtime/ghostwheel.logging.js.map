{"version":3,"sources":["ghostwheel/logging.cljc"],"mappings":"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","names":["ghostwheel.logging/*nesting","cljs.core.atom","ghostwheel.logging/*report-output*","ghostwheel.logging/ghostwheel-colors","ghostwheel.logging/ops-with-bindings","ghostwheel.logging/wrap-line","size","text","cljs.pprint.cl_format","clojure.string.split","ghostwheel.logging/wrap","line","ghostwheel.logging/truncate-string","long-string","limit","cljs.core/count","cljs.core.subs","var_args","args__4736__auto__","len__4730__auto__","i__4731__auto__","argseq__4737__auto__","cljs.core/IndexedSeq","ghostwheel.logging/get-styled-label","p__84519","p__84520","map__84521","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","foreground","cljs.core.get","background","weight","vec__84522","cljs.core.nth","seq84512","G__84513","cljs.core/first","cljs.core/next","G__84514","G__84515","self__4717__auto__","label","style","output","length","cljs.core/not","G__84528","cljs.core._EQ_","cljs.core/vec","cljs.core.remove","cljs.core/nil?","ghostwheel.logging/plain-log","msg","cljs.core.println","sb__4661__auto__","goog.string/StringBuffer","*print-newline*-orig-val__84548","cljs.core/*print-newline*","*print-fn*-orig-val__84549","cljs.core/*print-fn*","*print-newline*-temp-val__84550","*print-fn*-temp-val__84551","x__4662__auto__","cljs.pprint.pprint","clojure.string/split-lines","p1__84539#","cljs.core.map","cljs.core/deref","clojure.string.join","G__84556","ghostwheel.logging/log","js/Error","ghostwheel.logging.log","styled-msg","G__84560","cljs.core/Keyword","js/console.log","js/console","cljs.core/to-array","G__84569","ghostwheel.logging/DBG","args-arr__4751__auto__","argseq__4752__auto__","seq84568","self__4718__auto__","cljs.core/seq","msgs","seq__84576","chunk__84577","count__84578","i__84579","temp__5720__auto__","cljs.core/chunked-seq?","c__4550__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/last","ghostwheel.logging/log-raw","seq84607","G__84608","format-strings","objs","G__84618","seq__84620","chunk__84621","count__84622","i__84623","obj","cljs.core.concat","ghostwheel.logging/error","G__84647","js/console.error","ghostwheel.logging/plain-group","p1__84650#","cljs.core.swap_BANG_","G__84667","ghostwheel.logging/group*","open?","ghostwheel.logging.group_STAR_","styled-label","G__84679","js/console.group","js/console.groupCollapsed","G__84694","ghostwheel.logging/group","ghostwheel.logging.group","G__84707","ghostwheel.logging/group-collapsed","plain-group-end","p1__84714#","x__4219__auto__","y__4220__auto__","ghostwheel.logging/group-end","G__84723","js/console.groupEnd","ghostwheel.logging/log-bold","ghostwheel.logging/clog","data","ghostwheel.logging/pr-clog","p__84766","vec__84767","seq84750","G__84752","G__84753"],"sourcesContent":[";; Copyright (c) George Lipov. All rights reserved.\n;; The use and distribution terms for this software are covered by the\n;; Eclipse Public License 2.0 (https://choosealicense.com/licenses/epl-2.0/)\n;; which can be found in the file LICENSE at the root of this distribution.\n;; By using this software in any fashion, you are agreeing to be bound by\n;; the terms of this license.\n;; You must not remove this notice, or any other, from this software.\n\n(ns ghostwheel.logging\n  \"The primary purpose of this is to provide a simple\n  cross-platform console-logging API \u2013 inspired by JavaScript's\n  console.log/group/groupCollapsed/groupEnd \u2013 which makes sure that\n  structured/styled information is displayed to the best of the output\n  destination's abilities, be it a simple REPL or a browser-based JS console.\"\n  (:require [clojure.string :as string]\n            [clojure.pprint :as pprint]))\n\n\n(def *nesting (atom \"\"))\n\n\n(def ^:dynamic *report-output* #?(:clj  :repl\n                                  :cljs :js-console))\n\n\n(def ghostwheel-colors\n  {:purple0 \"#967a93\"\n   :purple1 \"#b87a93\"\n   :purple2 \"#7d9cf8\"\n   :orange0 \"#fe8709\"\n   :orange1 \"#f17d3e\"\n   :green0  \"#82da38\"\n   :green1  \"#54a627\"\n   ;; Solarized colours\n   :base03  \"#002b36\"\n   :black   \"#002b36\"\n   :base02  \"#073642\"\n   :base01  \"#586e75\"\n   :base00  \"#657b83\"\n   :base0   \"#839496\"\n   :base1   \"#93a1a1\"\n   :base2   \"#eee8d5\"\n   :base3   \"#fdf6e3\"\n   :yellow  \"#b58900\"\n   :orange  \"#cb4b16\"\n   :red     \"#dc322f\"\n   :magenta \"#d33682\"\n   :violet  \"#6c71c4\"\n   :blue    \"#268bd2\"\n   :cyan    \"#2aa198\"\n   :green   \"#859900\"})\n\n\n(def ops-with-bindings\n  #{'fn*\n    'fn\n    'ghostwheel.tracer/fn\n    'defn\n    'ghostwheel.tracer/defn\n    'defn-\n    'ghostwheel.tracer/defn-\n    'defmethod\n    'ghostwheel.tracer/defmethod\n    'deftype\n    'ghostwheel.tracer/deftype\n    'defrecord\n    'ghostwheel.tracer/defrecord\n    'reify\n    'ghostwheel.tracer/reify\n    'let\n    'ghostwheel.tracer/let\n    'extend-type\n    'ghostwheel.tracer/extend-type\n    'extend-protocol\n    'ghostwheel.tracer/extend-protocol})\n\n\n;; Borrowed from Rosetta Code\n(defn wrap-line [size text]\n  (pprint/cl-format nil\n                    (str \"件爆堍箝堍夯窿\")\n                    (string/split text #\" \")))\n\n\n(defn wrap [line]\n  (wrap-line 80 line))\n\n\n(defn truncate-string\n  [long-string limit]\n  (if (> (count long-string) limit)\n    (str (subs long-string 0 limit) \"...\")\n    long-string))\n\n\n(defn get-styled-label\n  [label {:keys [::foreground ::background ::weight] :as style} output & [length]]\n  (if-not style\n    [label]\n    (let [label (cond->> (if length\n                           (truncate-string label length)\n                           label)\n                         (= output :js-console) (str \"%c\"))\n          style (when (= output :js-console)\n                  (str \"color: \" (cond foreground foreground\n                                       background \"white\"\n                                       :else (:black ghostwheel-colors)) \";\"\n                       \"background: \" (if background background \"white\") \";\"\n                       \"font-weight: \" (if weight weight \"500\") \";\"\n                       (when background \"text-shadow: 0.5px 0.5px black;\")\n                       (when background \"padding: 2px 6px; border-radius: 2px;\")))]\n      (vec (remove nil? [label style])))))\n\n\n(defn- plain-log [msg]\n  (println (->> (if (string? msg)\n                  msg\n                  (with-out-str (pprint/pprint msg)))\n                string/split-lines\n                (map #(str @*nesting %))\n                (string/join \"\\n\"))))\n\n\n(defn log\n  ([]\n   (log \"\" nil))\n  ([msg]\n   (log msg nil))\n  ([msg style]\n   (let [styled-msg (get-styled-label msg style *report-output*)]\n     (case *report-output*\n       :repl (apply plain-log styled-msg)\n       :js-console #?(:cljs (.apply js/console.log js/console (to-array styled-msg))\n                      :clj  nil)))))\n\n\n(defn DBG\n  ([]\n   (log \"#> MARK\"))\n  ([& msgs]\n   (do\n     (doseq [msg msgs]\n       #?(:clj  (.println System/err (pprint/pprint msg))\n          :cljs (if (nil? msg) (log \"nil\") (log msg))))\n     (last msgs))))\n\n\n(defn log-raw\n  [format-strings & objs]\n  (case *report-output*\n    :repl (doseq [obj objs] (plain-log obj))\n    :js-console #?(:cljs (.apply js/console.log js/console (to-array (concat format-strings objs)))\n                   :clj  nil)))\n\n\n(defn error [msg]\n  (case *report-output*\n    :repl (do (plain-log \"ERROR:\") (plain-log msg))\n    :js-console #?(:cljs (js/console.error msg)\n                   :clj  nil)))\n\n\n(defn- plain-group [label]\n  (do\n    (log)\n    (log (str \"|> \" label))\n    (swap! *nesting #(str % \"| \"))))\n\n\n(defn- group*\n  ([open? label]\n   (group* open? label nil))\n  ([open? label style]\n   (let [styled-label (get-styled-label label style *report-output*)]\n     (case *report-output*\n       :repl (apply plain-group styled-label)\n       :js-console #?(:cljs (.apply (if open?\n                                      js/console.group\n                                      js/console.groupCollapsed)\n                                    js/console\n                                    (to-array styled-label))\n                      :clj  nil)))))\n\n\n(defn group\n  ([label]\n   (group label nil))\n  ([label style]\n   (group* true label style)))\n\n\n(defn group-collapsed\n  ([label]\n   (group label nil))\n  ([label style]\n   (group* false label style)))\n\n\n(let [plain-group-end\n      (fn [] (swap! *nesting #(subs % 0 (max 0 (- (count %) 2)))))]\n  (defn group-end []\n    (case *report-output*\n      :repl (plain-group-end)\n      :js-console #?(:cljs (js/console.groupEnd)\n                     :clj  nil))))\n\n\n(defn log-bold [msg]\n  (log msg {::weight \"bold\"}))\n\n\n(defn clog [data]\n  (do\n    (log data)\n    data))\n\n\n(defn pr-clog\n  \"Pretty console log\"\n  [label data & [style]]\n  (if data\n    (do\n      (group label style)\n      (log data)\n      (group-end))\n    (log label style))\n  data)\n\n\n\n"]}
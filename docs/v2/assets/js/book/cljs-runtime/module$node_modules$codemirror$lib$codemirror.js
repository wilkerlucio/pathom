shadow$provide.module$node_modules$codemirror$lib$codemirror=function(global$jscomp$0,require,module,exports){(function(global,factory){"object"===typeof exports&&"undefined"!==typeof module?module.exports=factory():"function"===typeof define&&define.amd?define(factory):global.CodeMirror=factory()})(this,function(){function classTest(cls){return new RegExp("(^|\\s)"+cls+"(?:$|\\s)\\s*")}function removeChildren(e){for(var count=e.childNodes.length;0<count;--count)e.removeChild(e.firstChild);return e}
function removeChildrenAndAdd(parent,e){return removeChildren(parent).appendChild(e)}function elt$jscomp$0(tag,content,className,style){tag=document.createElement(tag);className&&(tag.className=className);style&&(tag.style.cssText=style);if("string"==typeof content)tag.appendChild(document.createTextNode(content));else if(content)for(className=0;className<content.length;++className)tag.appendChild(content[className]);return tag}function eltP(tag,content,className,style){tag=elt$jscomp$0(tag,content,
className,style);tag.setAttribute("role","presentation");return tag}function contains(parent,child){3==child.nodeType&&(child=child.parentNode);if(parent.contains)return parent.contains(child);do if(11==child.nodeType&&(child=child.host),child==parent)return!0;while(child=child.parentNode)}function activeElt(){try{var activeElement=document.activeElement}catch(e){activeElement=document.body||null}for(;activeElement&&activeElement.shadowRoot&&activeElement.shadowRoot.activeElement;)activeElement=activeElement.shadowRoot.activeElement;
return activeElement}function addClass(node,cls){var current=node.className;classTest(cls).test(current)||(node.className+=(current?" ":"")+cls)}function joinClasses(a,b){a=a.split(" ");for(var i=0;i<a.length;i++)a[i]&&!classTest(a[i]).test(b)&&(b+=" "+a[i]);return b}function bind(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}}function copyObj(obj,target,overwrite){target||(target={});for(var prop in obj)!obj.hasOwnProperty(prop)||!1===overwrite&&
target.hasOwnProperty(prop)||(target[prop]=obj[prop]);return target}function countColumn(string,end,tabSize,startIndex,startValue){null==end&&(end=string.search(/[^\s\u00a0]/),-1==end&&(end=string.length));startIndex=startIndex||0;for(startValue=startValue||0;;){var nextTab=string.indexOf("\t",startIndex);if(0>nextTab||nextTab>=end)return startValue+(end-startIndex);startValue+=nextTab-startIndex;startValue+=tabSize-startValue%tabSize;startIndex=nextTab+1}}function indexOf(array,elt){for(var i=0;i<
array.length;++i)if(array[i]==elt)return i;return-1}function findColumn(string,goal,tabSize){for(var pos=0,col=0;;){var nextTab=string.indexOf("\t",pos);-1==nextTab&&(nextTab=string.length);var skipped=nextTab-pos;if(nextTab==string.length||col+skipped>=goal)return pos+Math.min(skipped,goal-col);col+=nextTab-pos;col+=tabSize-col%tabSize;pos=nextTab+1;if(col>=goal)return pos}}function spaceStr(n){for(;spaceStrs.length<=n;)spaceStrs.push(lst(spaceStrs)+" ");return spaceStrs[n]}function lst(arr){return arr[arr.length-
1]}function map(array,f){for(var out=[],i=0;i<array.length;i++)out[i]=f(array[i],i);return out}function insertSorted(array,value,score){for(var pos=0,priority=score(value);pos<array.length&&score(array[pos])<=priority;)pos++;array.splice(pos,0,value)}function nothing(){}function createObj(base,props){Object.create?base=Object.create(base):(nothing.prototype=base,base=new nothing);props&&copyObj(props,base);return base}function isWordCharBasic(ch){return/\w/.test(ch)||""<ch&&(ch.toUpperCase()!=ch.toLowerCase()||
nonASCIISingleCaseWordChar.test(ch))}function isWordChar(ch,helper){return helper?-1<helper.source.indexOf("\\w")&&isWordCharBasic(ch)?!0:helper.test(ch):isWordCharBasic(ch)}function isEmpty(obj){for(var n in obj)if(obj.hasOwnProperty(n)&&obj[n])return!1;return!0}function isExtendingChar(ch){return 768<=ch.charCodeAt(0)&&extendingChars.test(ch)}function skipExtendingChars(str,pos,dir){for(;(0>dir?0<pos:pos<str.length)&&isExtendingChar(str.charAt(pos));)pos+=dir;return pos}function findFirst(pred,
from,to){for(var dir=from>to?-1:1;;){if(from==to)return from;var midF=(from+to)/2;midF=0>dir?Math.ceil(midF):Math.floor(midF);if(midF==from)return pred(midF)?from:to;pred(midF)?to=midF:from=midF+dir}}function Display(place,doc,input){this.input=input;this.scrollbarFiller=elt$jscomp$0("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=elt$jscomp$0("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content",
"true");this.lineDiv=eltP("div",null,"CodeMirror-code");this.selectionDiv=elt$jscomp$0("div",null,null,"position: relative; z-index: 1");this.cursorDiv=elt$jscomp$0("div",null,"CodeMirror-cursors");this.measure=elt$jscomp$0("div",null,"CodeMirror-measure");this.lineMeasure=elt$jscomp$0("div",null,"CodeMirror-measure");this.lineSpace=eltP("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var lines=eltP("div",[this.lineSpace],
"CodeMirror-lines");this.mover=elt$jscomp$0("div",[lines],null,"position: relative");this.sizer=elt$jscomp$0("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=elt$jscomp$0("div",null,null,"position: absolute; height: 30px; width: 1px;");this.gutters=elt$jscomp$0("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=elt$jscomp$0("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=elt$jscomp$0("div",
[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");ie&&8>ie_version&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);webkit||gecko&&mobile||(this.scroller.draggable=!0);place&&(place.appendChild?place.appendChild(this.wrapper):place(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=doc.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;
this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;input.init(this)}function getLine(doc,n){n-=doc.first;if(0>n||n>=doc.size)throw Error("There is no line "+
(n+doc.first)+" in the document.");for(;!doc.lines;)for(var i=0;;++i){var child=doc.children[i],sz=child.chunkSize();if(n<sz){doc=child;break}n-=sz}return doc.lines[n]}function getBetween(doc,start,end){var out=[],n=start.line;doc.iter(start.line,end.line+1,function(line){line=line.text;n==end.line&&(line=line.slice(0,end.ch));n==start.line&&(line=line.slice(start.ch));out.push(line);++n});return out}function getLines(doc,from,to){var out=[];doc.iter(from,to,function(line){out.push(line.text)});return out}
function updateLineHeight(line,height){if(height-=line.height)for(;line;line=line.parent)line.height+=height}function lineNo(line){if(null==line.parent)return null;var cur=line.parent;line=indexOf(cur.lines,line);for(var chunk=cur.parent;chunk;cur=chunk,chunk=chunk.parent)for(var i=0;chunk.children[i]!=cur;++i)line+=chunk.children[i].chunkSize();return line+cur.first}function lineAtHeight(chunk,h){var n=chunk.first;a:do{for(var i$1=0;i$1<chunk.children.length;++i$1){var child=chunk.children[i$1],
ch=child.height;if(h<ch){chunk=child;continue a}h-=ch;n+=child.chunkSize()}return n}while(!chunk.lines);for(i$1=0;i$1<chunk.lines.length;++i$1){child=chunk.lines[i$1].height;if(h<child)break;h-=child}return n+i$1}function isLine(doc,l){return l>=doc.first&&l<doc.first+doc.size}function lineNumberFor(options,i){return String(options.lineNumberFormatter(i+options.firstLineNumber))}function Pos(line,ch,sticky){void 0===sticky&&(sticky=null);if(!(this instanceof Pos))return new Pos(line,ch,sticky);this.line=
line;this.ch=ch;this.sticky=sticky}function cmp(a,b){return a.line-b.line||a.ch-b.ch}function equalCursorPos(a,b){return a.sticky==b.sticky&&0==cmp(a,b)}function copyPos(x){return Pos(x.line,x.ch)}function maxPos(a,b){return 0>cmp(a,b)?b:a}function minPos(a,b){return 0>cmp(a,b)?a:b}function clipPos(doc,pos){if(pos.line<doc.first)return Pos(doc.first,0);var last=doc.first+doc.size-1;if(pos.line>last)return Pos(last,getLine(doc,last).text.length);doc=getLine(doc,pos.line).text.length;last=pos.ch;pos=
null==last||last>doc?Pos(pos.line,doc):0>last?Pos(pos.line,0):pos;return pos}function clipPosArray(doc,array){for(var out=[],i=0;i<array.length;i++)out[i]=clipPos(doc,array[i]);return out}function MarkedSpan(marker,from,to){this.marker=marker;this.from=from;this.to=to}function getMarkedSpanFor(spans,marker){if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];if(span.marker==marker)return span}}function stretchSpansOverChange(doc,change){if(change.full)return null;var oldFirst=isLine(doc,change.from.line)&&
getLine(doc,change.from.line).markedSpans,oldLast=isLine(doc,change.to.line)&&getLine(doc,change.to.line).markedSpans;if(!oldFirst&&!oldLast)return null;doc=change.from.ch;var endCh=change.to.ch,isInsert=0==cmp(change.from,change.to),nw;if(oldFirst)for(var i=0;i<oldFirst.length;++i){var span=oldFirst[i],marker=span.marker;if(null==span.from||(marker.inclusiveLeft?span.from<=doc:span.from<doc)||!(span.from!=doc||"bookmark"!=marker.type||isInsert&&span.marker.insertLeft)){var endsAfter=null==span.to||
(marker.inclusiveRight?span.to>=doc:span.to>doc);(nw||(nw=[])).push(new MarkedSpan(marker,span.from,endsAfter?null:span.to))}}oldFirst=nw;var last;if(oldLast)for(nw=0;nw<oldLast.length;++nw)if(i=oldLast[nw],span=i.marker,null==i.to||(span.inclusiveRight?i.to>=endCh:i.to>endCh)||i.from==endCh&&"bookmark"==span.type&&(!isInsert||i.marker.insertLeft))marker=null==i.from||(span.inclusiveLeft?i.from<=endCh:i.from<endCh),(last||(last=[])).push(new MarkedSpan(span,marker?null:i.from-endCh,null==i.to?null:
i.to-endCh));oldLast=1==change.text.length;endCh=lst(change.text).length+(oldLast?doc:0);if(oldFirst)for(isInsert=0;isInsert<oldFirst.length;++isInsert)if(nw=oldFirst[isInsert],null==nw.to)(i=getMarkedSpanFor(last,nw.marker),i)?oldLast&&(nw.to=null==i.to?null:i.to+endCh):nw.to=doc;if(last)for(doc=0;doc<last.length;++doc)isInsert=last[doc],null!=isInsert.to&&(isInsert.to+=endCh),null==isInsert.from?getMarkedSpanFor(oldFirst,isInsert.marker)||(isInsert.from=endCh,oldLast&&(oldFirst||(oldFirst=[])).push(isInsert)):
(isInsert.from+=endCh,oldLast&&(oldFirst||(oldFirst=[])).push(isInsert));oldFirst&&(oldFirst=clearEmptySpans(oldFirst));last&&last!=oldFirst&&(last=clearEmptySpans(last));doc=[oldFirst];if(!oldLast){change=change.text.length-2;var gapMarkers;if(0<change&&oldFirst)for(oldLast=0;oldLast<oldFirst.length;++oldLast)null==oldFirst[oldLast].to&&(gapMarkers||(gapMarkers=[])).push(new MarkedSpan(oldFirst[oldLast].marker,null,null));for(oldFirst=0;oldFirst<change;++oldFirst)doc.push(gapMarkers);doc.push(last)}return doc}
function clearEmptySpans(spans){for(var i=0;i<spans.length;++i){var span=spans[i];null!=span.from&&span.from==span.to&&!1!==span.marker.clearWhenEmpty&&spans.splice(i--,1)}return spans.length?spans:null}function removeReadOnlyRanges(doc,from,to){var markers=null;doc.iter(from.line,to.line+1,function(line){if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var mark=line.markedSpans[i].marker;!mark.readOnly||markers&&-1!=indexOf(markers,mark)||(markers||(markers=[])).push(mark)}});if(!markers)return null;
doc=[{from:from,to:to}];for(from=0;from<markers.length;++from){to=markers[from];for(var m=to.find(0),j=0;j<doc.length;++j){var p=doc[j];if(!(0>cmp(p.to,m.from)||0<cmp(p.from,m.to))){var newParts=[j,1],dfrom=cmp(p.from,m.from),dto=cmp(p.to,m.to);(0>dfrom||!to.inclusiveLeft&&!dfrom)&&newParts.push({from:p.from,to:m.from});(0<dto||!to.inclusiveRight&&!dto)&&newParts.push({from:m.to,to:p.to});doc.splice.apply(doc,newParts);j+=newParts.length-3}}}return doc}function detachMarkedSpans(line){var spans=line.markedSpans;
if(spans){for(var i=0;i<spans.length;++i)spans[i].marker.detachLine(line);line.markedSpans=null}}function attachMarkedSpans(line,spans){if(spans){for(var i=0;i<spans.length;++i)spans[i].marker.attachLine(line);line.markedSpans=spans}}function compareCollapsedMarkers(a,b){var lenDiff=a.lines.length-b.lines.length;if(0!=lenDiff)return lenDiff;lenDiff=a.find();var bPos=b.find(),fromCmp=cmp(lenDiff.from,bPos.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return fromCmp?-fromCmp:(lenDiff=cmp(lenDiff.to,
bPos.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?lenDiff:b.id-a.id}function collapsedSpanAtSide(line,start){line=sawCollapsedSpans&&line.markedSpans;if(line)for(var sp,i=0;i<line.length;++i)if(sp=line[i],sp.marker.collapsed&&null==(start?sp.from:sp.to)&&(!found||0>compareCollapsedMarkers(found,sp.marker)))var found=sp.marker;return found}function conflictingCollapsedRange(doc,lineNo$$1,from,to,marker){doc=getLine(doc,lineNo$$1);if(doc=sawCollapsedSpans&&doc.markedSpans)for(lineNo$$1=0;lineNo$$1<
doc.length;++lineNo$$1){var sp=doc[lineNo$$1];if(sp.marker.collapsed){var found=sp.marker.find(0),fromCmp=cmp(found.from,from)||(sp.marker.inclusiveLeft?-1:0)-(marker.inclusiveLeft?-1:0),toCmp=cmp(found.to,to)||(sp.marker.inclusiveRight?1:0)-(marker.inclusiveRight?1:0);if(!(0<=fromCmp&&0>=toCmp||0>=fromCmp&&0<=toCmp)&&(0>=fromCmp&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?0<=cmp(found.to,from):0<cmp(found.to,from))||0<=fromCmp&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?0>=cmp(found.from,
to):0>cmp(found.from,to))))return!0}}}function visualLine(line){for(var merged;merged=collapsedSpanAtSide(line,!0);)line=merged.find(-1,!0).line;return line}function visualLineNo(doc,lineN){doc=getLine(doc,lineN);var vis=visualLine(doc);return doc==vis?lineN:lineNo(vis)}function visualLineEndNo(doc,lineN){if(lineN>doc.lastLine())return lineN;var line=getLine(doc,lineN);if(!lineIsHidden(doc,line))return lineN;for(;doc=collapsedSpanAtSide(line,!1);)line=doc.find(1,!0).line;return lineNo(line)+1}function lineIsHidden(doc,
line){var sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var sp,i=0;i<sps.length;++i)if(sp=sps[i],sp.marker.collapsed&&(null==sp.from||!sp.marker.widgetNode&&0==sp.from&&sp.marker.inclusiveLeft&&lineIsHiddenInner(doc,line,sp)))return!0}function lineIsHiddenInner(doc,line,span){if(null==span.to)return line=span.marker.find(1,!0),lineIsHiddenInner(doc,line.line,getMarkedSpanFor(line.line.markedSpans,span.marker));if(span.marker.inclusiveRight&&span.to==line.text.length)return!0;for(var sp,i=0;i<
line.markedSpans.length;++i)if(sp=line.markedSpans[i],sp.marker.collapsed&&!sp.marker.widgetNode&&sp.from==span.to&&(null==sp.to||sp.to!=span.from)&&(sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&lineIsHiddenInner(doc,line,sp))return!0}function heightAtLine(lineObj){lineObj=visualLine(lineObj);for(var h=0,chunk=lineObj.parent,i=0;i<chunk.lines.length;++i){var line=chunk.lines[i];if(line==lineObj)break;else h+=line.height}for(lineObj=chunk.parent;lineObj;chunk=lineObj,lineObj=chunk.parent)for(i=
0;i<lineObj.children.length&&(line=lineObj.children[i],line!=chunk);++i)h+=line.height;return h}function lineLength(line){if(0==line.height)return 0;for(var len=line.text.length,merged,cur=line;merged=collapsedSpanAtSide(cur,!0);)merged=merged.find(0,!0),cur=merged.from.line,len+=merged.from.ch-merged.to.ch;for(cur=line;merged=collapsedSpanAtSide(cur,!1);)line=merged.find(0,!0),len-=cur.text.length-line.from.ch,cur=line.to.line,len+=cur.text.length-line.to.ch;return len}function findMaxLine(cm){var d=
cm.display;cm=cm.doc;d.maxLine=getLine(cm,cm.first);d.maxLineLength=lineLength(d.maxLine);d.maxLineChanged=!0;cm.iter(function(line){var len=lineLength(line);len>d.maxLineLength&&(d.maxLineLength=len,d.maxLine=line)})}function iterateBidiSections(order,from,to,f){if(!order)return f(from,to,"ltr",0);for(var found=!1,i=0;i<order.length;++i){var part=order[i];if(part.from<to&&part.to>from||from==to&&part.to==from)f(Math.max(part.from,from),Math.min(part.to,to),1==part.level?"rtl":"ltr",i),found=!0}found||
f(from,to,"ltr")}function getBidiPartAt(order,ch,sticky){var found;bidiOther=null;for(var i=0;i<order.length;++i){var cur=order[i];if(cur.from<ch&&cur.to>ch)return i;cur.to==ch&&(cur.from!=cur.to&&"before"==sticky?found=i:bidiOther=i);cur.from==ch&&(cur.from!=cur.to&&"before"!=sticky?found=i:bidiOther=i)}return null!=found?found:bidiOther}function getOrder(line,direction){var order=line.order;null==order&&(order=line.order=bidiOrdering(line.text,direction));return order}function off(emitter,type,
f){if(emitter.removeEventListener)emitter.removeEventListener(type,f,!1);else if(emitter.detachEvent)emitter.detachEvent("on"+type,f);else{var arr=(emitter=emitter._handlers)&&emitter[type];arr&&(f=indexOf(arr,f),-1<f&&(emitter[type]=arr.slice(0,f).concat(arr.slice(f+1))))}}function signal(emitter,type){var handlers=emitter._handlers&&emitter._handlers[type]||noHandlers;if(handlers.length)for(var args=Array.prototype.slice.call(arguments,2),i=0;i<handlers.length;++i)handlers[i].apply(null,args)}function signalDOMEvent(cm,
e,override){"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}});signal(cm,override||e.type,cm,e);return e_defaultPrevented(e)||e.codemirrorIgnore}function signalCursorActivity(cm){var arr=cm._handlers&&cm._handlers.cursorActivity;if(arr){cm=cm.curOp.cursorActivityHandlers||(cm.curOp.cursorActivityHandlers=[]);for(var i=0;i<arr.length;++i)-1==indexOf(cm,arr[i])&&cm.push(arr[i])}}function hasHandler(emitter,type){return 0<(emitter._handlers&&emitter._handlers[type]||
noHandlers).length}function eventMixin(ctor){ctor.prototype.on=function(type,f){on(this,type,f)};ctor.prototype.off=function(type,f){off(this,type,f)}}function e_preventDefault(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function e_stopPropagation(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function e_defaultPrevented(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function e_stop(e){e_preventDefault(e);e_stopPropagation(e)}function e_button(e){var b=
e.which;null==b&&(e.button&1?b=1:e.button&2?b=3:e.button&4&&(b=2));mac&&e.ctrlKey&&1==b&&(b=3);return b}function zeroWidthElement(measure){if(null==zwspSupported){var test=elt$jscomp$0("span","​");removeChildrenAndAdd(measure,elt$jscomp$0("span",[test,document.createTextNode("x")]));0!=measure.firstChild.offsetHeight&&(zwspSupported=1>=test.offsetWidth&&2<test.offsetHeight&&!(ie&&8>ie_version))}measure=zwspSupported?elt$jscomp$0("span","​"):elt$jscomp$0("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");
measure.setAttribute("cm-text","");return measure}function defineMode(name,mode){2<arguments.length&&(mode.dependencies=Array.prototype.slice.call(arguments,2));modes[name]=mode}function resolveMode(spec){if("string"==typeof spec&&mimeModes.hasOwnProperty(spec))spec=mimeModes[spec];else if(spec&&"string"==typeof spec.name&&mimeModes.hasOwnProperty(spec.name)){var found=mimeModes[spec.name];"string"==typeof found&&(found={name:found});spec=createObj(found,spec);spec.name=found.name}else{if("string"==
typeof spec&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec))return resolveMode("application/xml");if("string"==typeof spec&&/^[\w\-]+\/[\w\-]+\+json$/.test(spec))return resolveMode("application/json")}return"string"==typeof spec?{name:spec}:spec||{name:"null"}}function getMode(options,spec){spec=resolveMode(spec);var mfactory=modes[spec.name];if(!mfactory)return getMode(options,"text/plain");options=mfactory(options,spec);if(modeExtensions.hasOwnProperty(spec.name)){mfactory=modeExtensions[spec.name];for(var prop in mfactory)mfactory.hasOwnProperty(prop)&&
(options.hasOwnProperty(prop)&&(options["_"+prop]=options[prop]),options[prop]=mfactory[prop])}options.name=spec.name;spec.helperType&&(options.helperType=spec.helperType);if(spec.modeProps)for(var prop$1 in spec.modeProps)options[prop$1]=spec.modeProps[prop$1];return options}function extendMode(mode,properties){mode=modeExtensions.hasOwnProperty(mode)?modeExtensions[mode]:modeExtensions[mode]={};copyObj(properties,mode)}function copyState(mode,state){if(!0===state)return state;if(mode.copyState)return mode.copyState(state);
mode={};for(var n in state){var val=state[n];val instanceof Array&&(val=val.concat([]));mode[n]=val}return mode}function innerMode(mode,state){for(var info;mode.innerMode;){info=mode.innerMode(state);if(!info||info.mode==mode)break;state=info.state;mode=info.mode}return info||{mode:mode,state:state}}function startState(mode,a1,a2){return mode.startState?mode.startState(a1,a2):!0}function highlightLine(cm,line,context,forceToEnd){var st=[cm.state.modeGen],lineClasses={};runMode(cm,line.text,cm.doc.mode,
context,function(end,style){return st.push(end,style)},lineClasses,forceToEnd);var state=context.state;forceToEnd=function(o){context.baseTokens=st;var overlay=cm.state.overlays[o],i=1,at=0;context.state=!0;runMode(cm,line.text,overlay.mode,context,function(end,style){for(var start=i;at<end;){var i_end=st[i];i_end>end&&st.splice(i,1,end,st[i+1],i_end);i+=2;at=Math.min(end,i_end)}if(style)if(overlay.opaque)st.splice(start,i-start,end,"overlay "+style),i=start+2;else for(;start<i;start+=2)end=st[start+
1],st[start+1]=(end?end+" ":"")+"overlay "+style},lineClasses);context.state=state;context.baseTokens=null;context.baseTokenPos=1};for(var o=0;o<cm.state.overlays.length;++o)forceToEnd(o);return{styles:st,classes:lineClasses.bgClass||lineClasses.textClass?lineClasses:null}}function getLineStyles(cm,line,updateFrontier){if(!line.styles||line.styles[0]!=cm.state.modeGen){var context=getContextBefore(cm,lineNo(line)),resetState=line.text.length>cm.options.maxHighlightLength&&copyState(cm.doc.mode,context.state),
result=highlightLine(cm,line,context);resetState&&(context.state=resetState);line.stateAfter=context.save(!resetState);line.styles=result.styles;result.classes?line.styleClasses=result.classes:line.styleClasses&&(line.styleClasses=null);updateFrontier===cm.doc.highlightFrontier&&(cm.doc.modeFrontier=Math.max(cm.doc.modeFrontier,++cm.doc.highlightFrontier))}return line.styles}function getContextBefore(cm,n,precise){var doc=cm.doc,display=cm.display;if(!doc.mode.startState)return new Context(doc,!0,
n);var start=findStartLine(cm,n,precise),saved=start>doc.first&&getLine(doc,start-1).stateAfter,context=saved?Context.fromSaved(doc,saved,start):new Context(doc,startState(doc.mode),start);doc.iter(start,n,function(line){processLine(cm,line.text,context);var pos=context.line;line.stateAfter=pos==n-1||0==pos%5||pos>=display.viewFrom&&pos<display.viewTo?context.save():null;context.nextLine()});precise&&(doc.modeFrontier=context.line);return context}function processLine(cm,text,context,startAt){var mode=
cm.doc.mode;cm=new StringStream(text,cm.options.tabSize,context);cm.start=cm.pos=startAt||0;for(""==text&&callBlankLine(mode,context.state);!cm.eol();)readToken(mode,cm,context.state),cm.start=cm.pos}function callBlankLine(mode,state){if(mode.blankLine)return mode.blankLine(state);if(mode.innerMode&&(mode=innerMode(mode,state),mode.mode.blankLine))return mode.mode.blankLine(mode.state)}function readToken(mode,stream,state,inner){for(var i=0;10>i;i++){inner&&(inner[0]=innerMode(mode,state).mode);var style=
mode.token(stream,state);if(stream.pos>stream.start)return style}throw Error("Mode "+mode.name+" failed to advance stream.");}function takeToken(cm,pos,precise,asArray){var doc=cm.doc,mode=doc.mode;pos=clipPos(doc,pos);var line=getLine(doc,pos.line);precise=getContextBefore(cm,pos.line,precise);cm=new StringStream(line.text,cm.options.tabSize,precise);var tokens;for(asArray&&(tokens=[]);(asArray||cm.pos<pos.ch)&&!cm.eol();){cm.start=cm.pos;var style=readToken(mode,cm,precise.state);asArray&&tokens.push(new Token(cm,
style,copyState(doc.mode,precise.state)))}return asArray?tokens:new Token(cm,style,precise.state)}function extractLineClasses(type,output){if(type)for(;;){var lineClass=type.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!lineClass)break;type=type.slice(0,lineClass.index)+type.slice(lineClass.index+lineClass[0].length);var prop=lineClass[1]?"bgClass":"textClass";null==output[prop]?output[prop]=lineClass[2]:(new RegExp("(?:^|s)"+lineClass[2]+"(?:$|s)")).test(output[prop])||(output[prop]+=" "+lineClass[2])}return type}
function runMode(cm,text,mode,context,f,lineClasses,forceToEnd){var flattenSpans=mode.flattenSpans;null==flattenSpans&&(flattenSpans=cm.options.flattenSpans);var curStart=0,curStyle=null,stream=new StringStream(text,cm.options.tabSize,context),inner=cm.options.addModeClass&&[null];for(""==text&&extractLineClasses(callBlankLine(mode,context.state),lineClasses);!stream.eol();){if(stream.pos>cm.options.maxHighlightLength){flattenSpans=!1;forceToEnd&&processLine(cm,text,context,stream.pos);stream.pos=
text.length;var style=null}else style=extractLineClasses(readToken(mode,stream,context.state,inner),lineClasses);if(inner){var mName=inner[0].name;mName&&(style="m-"+(style?mName+" "+style:mName))}if(!flattenSpans||curStyle!=style){for(;curStart<stream.start;)curStart=Math.min(stream.start,curStart+5E3),f(curStart,curStyle);curStyle=style}stream.start=stream.pos}for(;curStart<stream.pos;)cm=Math.min(stream.pos,curStart+5E3),f(cm,curStyle),curStart=cm}function findStartLine(cm,n,precise){for(var minindent,
minline,doc=cm.doc,lim=precise?-1:n-(cm.doc.mode.innerMode?1E3:100);n>lim;--n){if(n<=doc.first)return doc.first;var line=getLine(doc,n-1),after=line.stateAfter;if(after&&(!precise||n+(after instanceof SavedContext?after.lookAhead:0)<=doc.modeFrontier))return n;line=countColumn(line.text,null,cm.options.tabSize);if(null==minline||minindent>line)minline=n-1,minindent=line}return minline}function retreatFrontier(doc,n){doc.modeFrontier=Math.min(doc.modeFrontier,n);if(!(doc.highlightFrontier<n-10)){for(var start=
doc.first,line=n-1;line>start;line--){var saved=getLine(doc,line).stateAfter;if(saved&&(!(saved instanceof SavedContext)||line+saved.lookAhead<n)){start=line+1;break}}doc.highlightFrontier=Math.min(doc.highlightFrontier,start)}}function interpretTokenStyle(style,options){if(!style||/^\s*$/.test(style))return null;options=options.addModeClass?styleToClassCacheWithMode:styleToClassCache;return options[style]||(options[style]=style.replace(/\S+/g,"cm-$\x26"))}function buildLineContent(cm,lineView){var content=
eltP("span",null,null,webkit?"padding-right: .1px":null);content={pre:eltP("pre",[content],"CodeMirror-line"),content:content,col:0,pos:0,cm:cm,trailingSpace:!1,splitSpaces:(ie||webkit)&&cm.getOption("lineWrapping")};lineView.measure={};for(var i=0;i<=(lineView.rest?lineView.rest.length:0);i++){var line=i?lineView.rest[i-1]:lineView.line,order=void 0;content.pos=0;content.addToken=buildToken;var JSCompiler_inline_result=cm.display.measure;if(null!=badBidiRects)JSCompiler_inline_result=badBidiRects;
else{var txt=removeChildrenAndAdd(JSCompiler_inline_result,document.createTextNode("AخA")),r0=range$jscomp$0(txt,0,1).getBoundingClientRect();txt=range$jscomp$0(txt,1,2).getBoundingClientRect();removeChildren(JSCompiler_inline_result);JSCompiler_inline_result=r0&&r0.left!=r0.right?badBidiRects=3>txt.right-r0.right:!1}JSCompiler_inline_result&&(order=getOrder(line,cm.doc.direction))&&(content.addToken=buildTokenBadBidi(content.addToken,order));content.map=[];var allowFrontierUpdate=lineView!=cm.display.externalMeasured&&
lineNo(line);a:{var spanEndStyle=txt=r0=JSCompiler_inline_result=void 0,spanStyle=void 0,css=void 0,style=void 0;order=content;allowFrontierUpdate=getLineStyles(cm,line,allowFrontierUpdate);var spans=line.markedSpans,allText=line.text,at=0;if(spans)for(var len=allText.length,pos=0,i$jscomp$0=1,text="",nextChange=0;;){if(nextChange==pos){spanStyle=spanEndStyle=txt=r0=css="";JSCompiler_inline_result=null;nextChange=Infinity;for(var foundBookmarks=[],endStyles=void 0,j=0;j<spans.length;++j){var sp=spans[j],
m=sp.marker;"bookmark"==m.type&&sp.from==pos&&m.widgetNode?foundBookmarks.push(m):sp.from<=pos&&(null==sp.to||sp.to>pos||m.collapsed&&sp.to==pos&&sp.from==pos)?(null!=sp.to&&sp.to!=pos&&nextChange>sp.to&&(nextChange=sp.to,spanEndStyle=""),m.className&&(spanStyle+=" "+m.className),m.css&&(css=(css?css+";":"")+m.css),m.startStyle&&sp.from==pos&&(txt+=" "+m.startStyle),m.endStyle&&sp.to==nextChange&&(endStyles||(endStyles=[])).push(m.endStyle,sp.to),m.title&&!r0&&(r0=m.title),m.collapsed&&(!JSCompiler_inline_result||
0>compareCollapsedMarkers(JSCompiler_inline_result.marker,m))&&(JSCompiler_inline_result=sp)):sp.from>pos&&nextChange>sp.from&&(nextChange=sp.from)}if(endStyles)for(j=0;j<endStyles.length;j+=2)endStyles[j+1]==nextChange&&(spanEndStyle+=" "+endStyles[j]);if(!JSCompiler_inline_result||JSCompiler_inline_result.from==pos)for(endStyles=0;endStyles<foundBookmarks.length;++endStyles)buildCollapsedSpan(order,0,foundBookmarks[endStyles]);if(JSCompiler_inline_result&&(JSCompiler_inline_result.from||0)==pos){buildCollapsedSpan(order,
(null==JSCompiler_inline_result.to?len+1:JSCompiler_inline_result.to)-pos,JSCompiler_inline_result.marker,null==JSCompiler_inline_result.from);if(null==JSCompiler_inline_result.to)break a;JSCompiler_inline_result.to==pos&&(JSCompiler_inline_result=!1)}}if(pos>=len)break;for(foundBookmarks=Math.min(len,nextChange);;){if(text){endStyles=pos+text.length;JSCompiler_inline_result||(j=endStyles>foundBookmarks?text.slice(0,foundBookmarks-pos):text,order.addToken(order,j,style?style+spanStyle:spanStyle,txt,
pos+j.length==nextChange?spanEndStyle:"",r0,css));if(endStyles>=foundBookmarks){text=text.slice(foundBookmarks-pos);pos=foundBookmarks;break}pos=endStyles;txt=""}text=allText.slice(at,at=allowFrontierUpdate[i$jscomp$0++]);style=interpretTokenStyle(allowFrontierUpdate[i$jscomp$0++],order.cm.options)}}else for(JSCompiler_inline_result=1;JSCompiler_inline_result<allowFrontierUpdate.length;JSCompiler_inline_result+=2)order.addToken(order,allText.slice(at,at=allowFrontierUpdate[JSCompiler_inline_result]),
interpretTokenStyle(allowFrontierUpdate[JSCompiler_inline_result+1],order.cm.options))}line.styleClasses&&(line.styleClasses.bgClass&&(content.bgClass=joinClasses(line.styleClasses.bgClass,content.bgClass||"")),line.styleClasses.textClass&&(content.textClass=joinClasses(line.styleClasses.textClass,content.textClass||"")));0==content.map.length&&content.map.push(0,0,content.content.appendChild(zeroWidthElement(cm.display.measure)));0==i?(lineView.measure.map=content.map,lineView.measure.cache={}):
((lineView.measure.maps||(lineView.measure.maps=[])).push(content.map),(lineView.measure.caches||(lineView.measure.caches=[])).push({}))}webkit&&(i=content.content.lastChild,/\bcm-tab\b/.test(i.className)||i.querySelector&&i.querySelector(".cm-tab"))&&(content.content.className="cm-tab-wrap-hack");signal(cm,"renderLine",cm,lineView.line,content.pre);content.pre.className&&(content.textClass=joinClasses(content.pre.className,content.textClass||""));return content}function defaultSpecialCharPlaceholder(ch){var token=
elt$jscomp$0("span","•","cm-invalidchar");token.title="\\u"+ch.charCodeAt(0).toString(16);token.setAttribute("aria-label",token.title);return token}function buildToken(builder,text,style,startStyle,endStyle,title,css){if(text){if(builder.splitSpaces){var JSCompiler_temp=builder.trailingSpace;if(1<text.length&&!/  /.test(text))JSCompiler_temp=text;else{for(var result="",i=0;i<text.length;i++){var ch=text.charAt(i);" "!=ch||!JSCompiler_temp||i!=text.length-1&&32!=text.charCodeAt(i+1)||(ch=" ");result+=
ch;JSCompiler_temp=" "==ch}JSCompiler_temp=result}}else JSCompiler_temp=text;result=JSCompiler_temp;i=builder.cm.state.specialChars;ch=!1;if(i.test(text)){JSCompiler_temp=document.createDocumentFragment();for(var pos=0;;){i.lastIndex=pos;var m=i.exec(text),skipped=m?m.index-pos:text.length-pos;if(skipped){var txt=document.createTextNode(result.slice(pos,pos+skipped));ie&&9>ie_version?JSCompiler_temp.appendChild(elt$jscomp$0("span",[txt])):JSCompiler_temp.appendChild(txt);builder.map.push(builder.pos,
builder.pos+skipped,txt);builder.col+=skipped;builder.pos+=skipped}if(!m)break;pos+=skipped+1;"\t"==m[0]?(m=builder.cm.options.tabSize,m-=builder.col%m,skipped=JSCompiler_temp.appendChild(elt$jscomp$0("span",spaceStr(m),"cm-tab")),skipped.setAttribute("role","presentation"),skipped.setAttribute("cm-text","\t"),builder.col+=m):("\r"==m[0]||"\n"==m[0]?(skipped=JSCompiler_temp.appendChild(elt$jscomp$0("span","\r"==m[0]?"␍":"␤","cm-invalidchar")),skipped.setAttribute("cm-text",m[0])):(skipped=builder.cm.options.specialCharPlaceholder(m[0]),
skipped.setAttribute("cm-text",m[0]),ie&&9>ie_version?JSCompiler_temp.appendChild(elt$jscomp$0("span",[skipped])):JSCompiler_temp.appendChild(skipped)),builder.col+=1);builder.map.push(builder.pos,builder.pos+1,skipped);builder.pos++}}else builder.col+=text.length,JSCompiler_temp=document.createTextNode(result),builder.map.push(builder.pos,builder.pos+text.length,JSCompiler_temp),ie&&9>ie_version&&(ch=!0),builder.pos+=text.length;builder.trailingSpace=32==result.charCodeAt(text.length-1);if(style||
startStyle||endStyle||ch||css)return text=style||"",startStyle&&(text+=startStyle),endStyle&&(text+=endStyle),startStyle=elt$jscomp$0("span",[JSCompiler_temp],text,css),title&&(startStyle.title=title),builder.content.appendChild(startStyle);builder.content.appendChild(JSCompiler_temp)}}function buildTokenBadBidi(inner,order){return function(builder,text,style,startStyle,endStyle,title,css){style=style?style+" cm-force-border":"cm-force-border";for(var start=builder.pos,end=start+text.length;;){for(var part=
void 0,i=0;i<order.length&&!(part=order[i],part.to>start&&part.from<=start);i++);if(part.to>=end)return inner(builder,text,style,startStyle,endStyle,title,css);inner(builder,text.slice(0,part.to-start),style,startStyle,null,title,css);startStyle=null;text=text.slice(part.to-start);start=part.to}}}function buildCollapsedSpan(builder,size,marker,ignoreWidget){var widget=!ignoreWidget&&marker.widgetNode;widget&&builder.map.push(builder.pos,builder.pos+size,widget);!ignoreWidget&&builder.cm.display.input.needsContentAttribute&&
(widget||(widget=builder.content.appendChild(document.createElement("span"))),widget.setAttribute("cm-marker",marker.id));widget&&(builder.cm.display.input.setUneditable(widget),builder.content.appendChild(widget));builder.pos+=size;builder.trailingSpace=!1}function LineView(doc,line$jscomp$0,lineN){for(var line=this.line=line$jscomp$0,lines;line=collapsedSpanAtSide(line,!1);)line=line.find(1,!0).line,(lines||(lines=[])).push(line);this.size=(this.rest=lines)?lineNo(lst(this.rest))-lineN+1:1;this.node=
this.text=null;this.hidden=lineIsHidden(doc,line$jscomp$0)}function buildViewArray(cm,from,to){var array=[],nextPos;for(nextPos=from;nextPos<to;)from=new LineView(cm.doc,getLine(cm.doc,nextPos),nextPos),nextPos+=from.size,array.push(from);return array}function finishOperation(op$jscomp$0,endCb){if(op$jscomp$0=op$jscomp$0.ownsGroup)try{var callbacks=op$jscomp$0.delayedCallbacks,i=0;do{for(;i<callbacks.length;i++)callbacks[i].call(null);for(var j=0;j<op$jscomp$0.ops.length;j++){var op=op$jscomp$0.ops[j];
if(op.cursorActivityHandlers)for(;op.cursorActivityCalled<op.cursorActivityHandlers.length;)op.cursorActivityHandlers[op.cursorActivityCalled++].call(null,op.cm)}}while(i<callbacks.length)}finally{operationGroup=null,endCb(op$jscomp$0)}}function signalLater(emitter,type){var arr=emitter._handlers&&emitter._handlers[type]||noHandlers;if(arr.length){var args=Array.prototype.slice.call(arguments,2);if(operationGroup)var list=operationGroup.delayedCallbacks;else orphanDelayedCallbacks?list=orphanDelayedCallbacks:
(list=orphanDelayedCallbacks=[],setTimeout(fireOrphanDelayed,0));for(var loop=function(i){list.push(function(){return arr[i].apply(null,args)})},i$jscomp$0=0;i$jscomp$0<arr.length;++i$jscomp$0)loop(i$jscomp$0)}}function fireOrphanDelayed(){var delayed=orphanDelayedCallbacks;orphanDelayedCallbacks=null;for(var i=0;i<delayed.length;++i)delayed[i]()}function updateLineForChanges(cm,lineView$jscomp$0,lineN,dims){for(var j=0;j<lineView$jscomp$0.changes.length;j++){var type=lineView$jscomp$0.changes[j];
if("text"==type){type=cm;var lineView=lineView$jscomp$0,cls=lineView.text.className,built=getLineContent(type,lineView);lineView.text==lineView.node&&(lineView.node=built.pre);lineView.text.parentNode.replaceChild(built.pre,lineView.text);lineView.text=built.pre;built.bgClass!=lineView.bgClass||built.textClass!=lineView.textClass?(lineView.bgClass=built.bgClass,lineView.textClass=built.textClass,updateLineClasses(type,lineView)):cls&&(lineView.text.className=cls)}else if("gutter"==type)updateLineGutter(cm,
lineView$jscomp$0,lineN,dims);else if("class"==type)updateLineClasses(cm,lineView$jscomp$0);else if("widget"==type){type=cm;lineView=lineView$jscomp$0;cls=dims;lineView.alignable&&(lineView.alignable=null);built=lineView.node.firstChild;for(var next;built;built=next)next=built.nextSibling,"CodeMirror-linewidget"==built.className&&lineView.node.removeChild(built);insertLineWidgets(type,lineView,cls)}}lineView$jscomp$0.changes=null}function ensureLineWrapped(lineView){lineView.node==lineView.text&&
(lineView.node=elt$jscomp$0("div",null,null,"position: relative"),lineView.text.parentNode&&lineView.text.parentNode.replaceChild(lineView.node,lineView.text),lineView.node.appendChild(lineView.text),ie&&8>ie_version&&(lineView.node.style.zIndex=2));return lineView.node}function getLineContent(cm,lineView){var ext=cm.display.externalMeasured;return ext&&ext.line==lineView.line?(cm.display.externalMeasured=null,lineView.measure=ext.measure,ext.built):buildLineContent(cm,lineView)}function updateLineClasses(cm,
lineView){var cls=lineView.bgClass?lineView.bgClass+" "+(lineView.line.bgClass||""):lineView.line.bgClass;cls&&(cls+=" CodeMirror-linebackground");if(lineView.background)cls?lineView.background.className=cls:(lineView.background.parentNode.removeChild(lineView.background),lineView.background=null);else if(cls){var wrap=ensureLineWrapped(lineView);lineView.background=wrap.insertBefore(elt$jscomp$0("div",null,cls),wrap.firstChild);cm.display.input.setUneditable(lineView.background)}lineView.line.wrapClass?
ensureLineWrapped(lineView).className=lineView.line.wrapClass:lineView.node!=lineView.text&&(lineView.node.className="");lineView.text.className=(lineView.textClass?lineView.textClass+" "+(lineView.line.textClass||""):lineView.line.textClass)||""}function updateLineGutter(cm,lineView,lineN,dims){lineView.gutter&&(lineView.node.removeChild(lineView.gutter),lineView.gutter=null);lineView.gutterBackground&&(lineView.node.removeChild(lineView.gutterBackground),lineView.gutterBackground=null);if(lineView.line.gutterClass){var wrap=
ensureLineWrapped(lineView);lineView.gutterBackground=elt$jscomp$0("div",null,"CodeMirror-gutter-background "+lineView.line.gutterClass,"left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px; width: "+dims.gutterTotalWidth+"px");cm.display.input.setUneditable(lineView.gutterBackground);wrap.insertBefore(lineView.gutterBackground,lineView.text)}wrap=lineView.line.gutterMarkers;if(cm.options.lineNumbers||wrap){var wrap$1=ensureLineWrapped(lineView),gutterWrap=lineView.gutter=elt$jscomp$0("div",
null,"CodeMirror-gutter-wrapper","left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px");cm.display.input.setUneditable(gutterWrap);wrap$1.insertBefore(gutterWrap,lineView.text);lineView.line.gutterClass&&(gutterWrap.className+=" "+lineView.line.gutterClass);!cm.options.lineNumbers||wrap&&wrap["CodeMirror-linenumbers"]||(lineView.lineNumber=gutterWrap.appendChild(elt$jscomp$0("div",lineNumberFor(cm.options,lineN),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dims.gutterLeft["CodeMirror-linenumbers"]+
"px; width: "+cm.display.lineNumInnerWidth+"px")));if(wrap)for(lineView=0;lineView<cm.options.gutters.length;++lineView)lineN=cm.options.gutters[lineView],(wrap$1=wrap.hasOwnProperty(lineN)&&wrap[lineN])&&gutterWrap.appendChild(elt$jscomp$0("div",[wrap$1],"CodeMirror-gutter-elt","left: "+dims.gutterLeft[lineN]+"px; width: "+dims.gutterWidth[lineN]+"px"))}}function buildLineElement(cm,lineView,lineN,dims){var built=getLineContent(cm,lineView);lineView.text=lineView.node=built.pre;built.bgClass&&(lineView.bgClass=
built.bgClass);built.textClass&&(lineView.textClass=built.textClass);updateLineClasses(cm,lineView);updateLineGutter(cm,lineView,lineN,dims);insertLineWidgets(cm,lineView,dims);return lineView.node}function insertLineWidgets(cm,lineView,dims){insertLineWidgetsFor(cm,lineView.line,lineView,dims,!0);if(lineView.rest)for(var i=0;i<lineView.rest.length;i++)insertLineWidgetsFor(cm,lineView.rest[i],lineView,dims,!1)}function insertLineWidgetsFor(cm,line,lineView,dims$jscomp$0,allowAbove){if(line.widgets){var wrap=
ensureLineWrapped(lineView),i=0;for(line=line.widgets;i<line.length;++i){var widget=line[i],node=elt$jscomp$0("div",[widget.node],"CodeMirror-linewidget");widget.handleMouseEvents||node.setAttribute("cm-ignore-events","true");var widget$jscomp$0=widget,node$jscomp$0=node,dims=dims$jscomp$0;if(widget$jscomp$0.noHScroll){(lineView.alignable||(lineView.alignable=[])).push(node$jscomp$0);var width=dims.wrapperWidth;node$jscomp$0.style.left=dims.fixedPos+"px";widget$jscomp$0.coverGutter||(width-=dims.gutterTotalWidth,
node$jscomp$0.style.paddingLeft=dims.gutterTotalWidth+"px");node$jscomp$0.style.width=width+"px"}widget$jscomp$0.coverGutter&&(node$jscomp$0.style.zIndex=5,node$jscomp$0.style.position="relative",widget$jscomp$0.noHScroll||(node$jscomp$0.style.marginLeft=-dims.gutterTotalWidth+"px"));cm.display.input.setUneditable(node);allowAbove&&widget.above?wrap.insertBefore(node,lineView.gutter||lineView.text):wrap.appendChild(node);signalLater(widget,"redraw")}}}function widgetHeight(widget){if(null!=widget.height)return widget.height;
var cm=widget.doc.cm;if(!cm)return 0;if(!contains(document.body,widget.node)){var parentStyle="position: relative;";widget.coverGutter&&(parentStyle+="margin-left: -"+cm.display.gutters.offsetWidth+"px;");widget.noHScroll&&(parentStyle+="width: "+cm.display.wrapper.clientWidth+"px;");removeChildrenAndAdd(cm.display.measure,elt$jscomp$0("div",[widget.node],null,parentStyle))}return widget.height=widget.node.parentNode.offsetHeight}function eventInWidget(display,e){for(e=e.target||e.srcElement;e!=display.wrapper;e=
e.parentNode)if(!e||1==e.nodeType&&"true"==e.getAttribute("cm-ignore-events")||e.parentNode==display.sizer&&e!=display.mover)return!0}function paddingVert(display){return display.mover.offsetHeight-display.lineSpace.offsetHeight}function paddingH(display){if(display.cachedPaddingH)return display.cachedPaddingH;var e=removeChildrenAndAdd(display.measure,elt$jscomp$0("pre","x"));e=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle;e={left:parseInt(e.paddingLeft),right:parseInt(e.paddingRight)};
isNaN(e.left)||isNaN(e.right)||(display.cachedPaddingH=e);return e}function scrollGap(cm){return 30-cm.display.nativeBarWidth}function displayWidth(cm){return cm.display.scroller.clientWidth-scrollGap(cm)-cm.display.barWidth}function displayHeight(cm){return cm.display.scroller.clientHeight-scrollGap(cm)-cm.display.barHeight}function mapFromLineView(lineView,line,lineN){if(lineView.line==line)return{map:lineView.measure.map,cache:lineView.measure.cache};for(var i=0;i<lineView.rest.length;i++)if(lineView.rest[i]==
line)return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i]};for(line=0;line<lineView.rest.length;line++)if(lineNo(lineView.rest[line])>lineN)return{map:lineView.measure.maps[line],cache:lineView.measure.caches[line],before:!0}}function findViewForLine(cm,lineN){if(lineN>=cm.display.viewFrom&&lineN<cm.display.viewTo)return cm.display.view[findViewIndex(cm,lineN)];if((cm=cm.display.externalMeasured)&&lineN>=cm.lineN&&lineN<cm.lineN+cm.size)return cm}function prepareMeasureForLine(cm,
line$jscomp$0){var lineN=lineNo(line$jscomp$0),view=findViewForLine(cm,lineN);view&&!view.text?view=null:view&&view.changes&&(updateLineForChanges(cm,view,lineN,getDimensions(cm)),cm.curOp.forceUpdate=!0);if(!view){var line=visualLine(line$jscomp$0);view=lineNo(line);line=cm.display.externalMeasured=new LineView(cm.doc,line,view);line.lineN=view;view=line.built=buildLineContent(cm,line);line.text=view.pre;removeChildrenAndAdd(cm.display.lineMeasure,view.pre);view=line}cm=mapFromLineView(view,line$jscomp$0,
lineN);return{line:line$jscomp$0,view:view,rect:null,map:cm.map,cache:cm.cache,before:cm.before,hasHeights:!1}}function measureCharPrepared(cm,prepared,ch,bias,varHeight){prepared.before&&(ch=-1);var key=ch+(bias||"");if(prepared.cache.hasOwnProperty(key))cm=prepared.cache[key];else{prepared.rect||(prepared.rect=prepared.view.text.getBoundingClientRect());if(!prepared.hasHeights){var lineView=prepared.view,rect=prepared.rect,wrapping=cm.options.lineWrapping,curWidth=wrapping&&displayWidth(cm);if(!lineView.measure.heights||
wrapping&&lineView.measure.width!=curWidth){var heights=lineView.measure.heights=[];if(wrapping)for(lineView.measure.width=curWidth,lineView=lineView.text.firstChild.getClientRects(),wrapping=0;wrapping<lineView.length-1;wrapping++){curWidth=lineView[wrapping];var next=lineView[wrapping+1];2<Math.abs(curWidth.bottom-next.bottom)&&heights.push((curWidth.bottom+next.top)/2-rect.top)}heights.push(rect.bottom-rect.top)}prepared.hasHeights=!0}heights=bias;lineView=nodeAndOffsetInLineMap(prepared.map,ch,
heights);bias=lineView.node;rect=lineView.start;wrapping=lineView.end;ch=lineView.collapse;if(3==bias.nodeType){for(var i$1=0;4>i$1;i$1++){for(;rect&&isExtendingChar(prepared.line.text.charAt(lineView.coverStart+rect));)--rect;for(;lineView.coverStart+wrapping<lineView.coverEnd&&isExtendingChar(prepared.line.text.charAt(lineView.coverStart+wrapping));)++wrapping;if(ie&&9>ie_version&&0==rect&&wrapping==lineView.coverEnd-lineView.coverStart)var rect$jscomp$0=bias.parentNode.getBoundingClientRect();
else{rect$jscomp$0=range$jscomp$0(bias,rect,wrapping).getClientRects();wrapping=nullRect;if("left"==heights)for(curWidth=0;curWidth<rect$jscomp$0.length&&(wrapping=rect$jscomp$0[curWidth]).left==wrapping.right;curWidth++);else for(curWidth=rect$jscomp$0.length-1;0<=curWidth&&(wrapping=rect$jscomp$0[curWidth]).left==wrapping.right;curWidth--);rect$jscomp$0=wrapping}if(rect$jscomp$0.left||rect$jscomp$0.right||0==rect)break;wrapping=rect;--rect;ch="right"}ie&&11>ie_version&&((i$1=!window.screen||null==
screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=badZoomedRects?i$1=badZoomedRects:(heights=removeChildrenAndAdd(cm.display.measure,elt$jscomp$0("span","x")),i$1=heights.getBoundingClientRect(),heights=range$jscomp$0(heights,0,1).getBoundingClientRect(),i$1=badZoomedRects=1<Math.abs(i$1.left-heights.left)),i$1=!i$1),i$1||(i$1=screen.logicalXDPI/screen.deviceXDPI,heights=screen.logicalYDPI/screen.deviceYDPI,rect$jscomp$0={left:rect$jscomp$0.left*i$1,right:rect$jscomp$0.right*i$1,
top:rect$jscomp$0.top*heights,bottom:rect$jscomp$0.bottom*heights}))}else 0<rect&&(ch=heights="right"),rect$jscomp$0=cm.options.lineWrapping&&1<(i$1=bias.getClientRects()).length?i$1["right"==heights?i$1.length-1:0]:bias.getBoundingClientRect();!(ie&&9>ie_version)||rect||rect$jscomp$0&&(rect$jscomp$0.left||rect$jscomp$0.right)||(rect$jscomp$0=(rect$jscomp$0=bias.parentNode.getClientRects()[0])?{left:rect$jscomp$0.left,right:rect$jscomp$0.left+charWidth(cm.display),top:rect$jscomp$0.top,bottom:rect$jscomp$0.bottom}:
nullRect);bias=rect$jscomp$0.top-prepared.rect.top;rect=rect$jscomp$0.bottom-prepared.rect.top;i$1=(bias+rect)/2;heights=prepared.view.measure.heights;for(lineView=0;lineView<heights.length-1&&!(i$1<heights[lineView]);lineView++);ch={left:("right"==ch?rect$jscomp$0.right:rect$jscomp$0.left)-prepared.rect.left,right:("left"==ch?rect$jscomp$0.left:rect$jscomp$0.right)-prepared.rect.left,top:lineView?heights[lineView-1]:0,bottom:heights[lineView]};rect$jscomp$0.left||rect$jscomp$0.right||(ch.bogus=!0);
cm.options.singleCursorHeightPerLine||(ch.rtop=bias,ch.rbottom=rect);cm=ch;cm.bogus||(prepared.cache[key]=cm)}return{left:cm.left,right:cm.right,top:varHeight?cm.rtop:cm.top,bottom:varHeight?cm.rbottom:cm.bottom}}function nodeAndOffsetInLineMap(map$$1,ch,bias){for(var node,start,end,collapse,mStart,mEnd,i=0;i<map$$1.length;i+=3){mStart=map$$1[i];mEnd=map$$1[i+1];if(ch<mStart)start=0,end=1,collapse="left";else if(ch<mEnd)start=ch-mStart,end=start+1;else if(i==map$$1.length-3||ch==mEnd&&map$$1[i+3]>
ch)end=mEnd-mStart,start=end-1,ch>=mEnd&&(collapse="right");if(null!=start){node=map$$1[i+2];mStart==mEnd&&bias==(node.insertLeft?"left":"right")&&(collapse=bias);if("left"==bias&&0==start)for(;i&&map$$1[i-2]==map$$1[i-3]&&map$$1[i-1].insertLeft;)node=map$$1[(i-=3)+2],collapse="left";if("right"==bias&&start==mEnd-mStart)for(;i<map$$1.length-3&&map$$1[i+3]==map$$1[i+4]&&!map$$1[i+5].insertLeft;)node=map$$1[(i+=3)+2],collapse="right";break}}return{node:node,start:start,end:end,collapse:collapse,coverStart:mStart,
coverEnd:mEnd}}function clearLineMeasurementCacheFor(lineView){if(lineView.measure&&(lineView.measure.cache={},lineView.measure.heights=null,lineView.rest))for(var i=0;i<lineView.rest.length;i++)lineView.measure.caches[i]={}}function clearLineMeasurementCache(cm){cm.display.externalMeasure=null;removeChildren(cm.display.lineMeasure);for(var i=0;i<cm.display.view.length;i++)clearLineMeasurementCacheFor(cm.display.view[i])}function clearCaches(cm){clearLineMeasurementCache(cm);cm.display.cachedCharWidth=
cm.display.cachedTextHeight=cm.display.cachedPaddingH=null;cm.options.lineWrapping||(cm.display.maxLineChanged=!0);cm.display.lineNumChars=null}function pageScrollX(){return chrome&&android?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pageScrollY(){return chrome&&android?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):
window.pageYOffset||(document.documentElement||document.body).scrollTop}function widgetTopHeight(lineObj){var height=0;if(lineObj.widgets)for(var i=0;i<lineObj.widgets.length;++i)lineObj.widgets[i].above&&(height+=widgetHeight(lineObj.widgets[i]));return height}function intoCoordSystem(cm,lineObj,rect,context,includeWidgets){includeWidgets||(includeWidgets=widgetTopHeight(lineObj),rect.top+=includeWidgets,rect.bottom+=includeWidgets);if("line"==context)return rect;context||(context="local");lineObj=
heightAtLine(lineObj);lineObj="local"==context?lineObj+cm.display.lineSpace.offsetTop:lineObj-cm.display.viewOffset;if("page"==context||"window"==context)cm=cm.display.lineSpace.getBoundingClientRect(),lineObj+=cm.top+("window"==context?0:pageScrollY()),context=cm.left+("window"==context?0:pageScrollX()),rect.left+=context,rect.right+=context;rect.top+=lineObj;rect.bottom+=lineObj;return rect}function fromCoordSystem(cm,coords,context){if("div"==context)return coords;var left=coords.left;coords=coords.top;
"page"==context?(left-=pageScrollX(),coords-=pageScrollY()):"local"!=context&&context||(context=cm.display.sizer.getBoundingClientRect(),left+=context.left,coords+=context.top);cm=cm.display.lineSpace.getBoundingClientRect();return{left:left-cm.left,top:coords-cm.top}}function charCoords(cm,pos,context,lineObj,bias){lineObj||(lineObj=getLine(cm.doc,pos.line));var JSCompiler_temp_const=lineObj;pos=pos.ch;lineObj=measureCharPrepared(cm,prepareMeasureForLine(cm,lineObj),pos,bias);return intoCoordSystem(cm,
JSCompiler_temp_const,lineObj,context)}function cursorCoords(cm,pos,context,lineObj,preparedMeasure,varHeight){function get(ch,right){ch=measureCharPrepared(cm,preparedMeasure,ch,right?"right":"left",varHeight);right?ch.left=ch.right:ch.right=ch.left;return intoCoordSystem(cm,lineObj,ch,context)}function getBidi(ch,partPos,invert){return get(invert?ch-1:ch,1==order[partPos].level!=invert)}lineObj=lineObj||getLine(cm.doc,pos.line);preparedMeasure||(preparedMeasure=prepareMeasureForLine(cm,lineObj));
var order=getOrder(lineObj,cm.doc.direction),ch$jscomp$0=pos.ch;pos=pos.sticky;ch$jscomp$0>=lineObj.text.length?(ch$jscomp$0=lineObj.text.length,pos="before"):0>=ch$jscomp$0&&(ch$jscomp$0=0,pos="after");if(!order)return get("before"==pos?ch$jscomp$0-1:ch$jscomp$0,"before"==pos);var partPos=getBidiPartAt(order,ch$jscomp$0,pos),other=bidiOther;partPos=getBidi(ch$jscomp$0,partPos,"before"==pos);null!=other&&(partPos.other=getBidi(ch$jscomp$0,other,"before"!=pos));return partPos}function estimateCoords(cm,
pos){var left=0;pos=clipPos(cm.doc,pos);cm.options.lineWrapping||(left=charWidth(cm.display)*pos.ch);pos=getLine(cm.doc,pos.line);cm=heightAtLine(pos)+cm.display.lineSpace.offsetTop;return{left:left,right:left,top:cm,bottom:cm+pos.height}}function PosWithInfo(line,ch,sticky,outside,xRel){line=Pos(line,ch,sticky);line.xRel=xRel;outside&&(line.outside=!0);return line}function coordsChar(cm,x,y){var doc=cm.doc;y+=cm.display.viewOffset;if(0>y)return PosWithInfo(doc.first,0,null,!0,-1);var lineN=lineAtHeight(doc,
y),last=doc.first+doc.size-1;if(lineN>last)return PosWithInfo(doc.first+doc.size-1,getLine(doc,last).text.length,null,!0,1);0>x&&(x=0);for(doc=getLine(doc,lineN);;)if(lineN=coordsCharInner(cm,doc,lineN,x,y),last=(doc=collapsedSpanAtSide(doc,!1))&&doc.find(0,!0),doc&&(lineN.ch>last.from.ch||lineN.ch==last.from.ch&&0<lineN.xRel))lineN=lineNo(doc=last.to.line);else return lineN}function wrappedLineExtent(cm,lineObj,preparedMeasure,y){y-=widgetTopHeight(lineObj);lineObj=lineObj.text.length;var begin=
findFirst(function(ch){return measureCharPrepared(cm,preparedMeasure,ch-1).bottom<=y},lineObj,0);lineObj=findFirst(function(ch){return measureCharPrepared(cm,preparedMeasure,ch).top>y},begin,lineObj);return{begin:begin,end:lineObj}}function wrappedLineExtentChar(cm,lineObj,preparedMeasure,target){preparedMeasure||(preparedMeasure=prepareMeasureForLine(cm,lineObj));target=intoCoordSystem(cm,lineObj,measureCharPrepared(cm,preparedMeasure,target),"line").top;return wrappedLineExtent(cm,lineObj,preparedMeasure,
target)}function boxIsAfter(box,x,y,left){return box.bottom<=y?!1:box.top>y?!0:(left?box.left:box.right)>x}function coordsCharInner(cm,lineObj,lineNo$$1,x,y){y-=heightAtLine(lineObj);var preparedMeasure=prepareMeasureForLine(cm,lineObj),widgetHeight$$1=widgetTopHeight(lineObj),begin=0,end=lineObj.text.length,ltr=!0,order=getOrder(lineObj,cm.doc.direction);order&&(order=(cm.options.lineWrapping?coordsBidiPartWrapped:coordsBidiPart)(cm,lineObj,lineNo$$1,preparedMeasure,order,x,y),begin=(ltr=1!=order.level)?
order.from:order.to-1,end=ltr?order.to:order.from-1);var chAround=null,boxAround=null;order=findFirst(function(ch){var box=measureCharPrepared(cm,preparedMeasure,ch);box.top+=widgetHeight$$1;box.bottom+=widgetHeight$$1;if(!boxIsAfter(box,x,y,!1))return!1;box.top<=y&&box.left<=x&&(chAround=ch,boxAround=box);return!0},begin,end);var outside=!1;boxAround?(begin=x-boxAround.left<boxAround.right-x,ltr=begin==ltr,order=chAround+(ltr?0:1),ltr=ltr?"after":"before",begin=begin?boxAround.left:boxAround.right):
(ltr||order!=end&&order!=begin||order++,ltr=0==order?"after":order==lineObj.text.length?"before":measureCharPrepared(cm,preparedMeasure,order-(ltr?1:0)).bottom+widgetHeight$$1<=y==ltr?"after":"before",outside=cursorCoords(cm,Pos(lineNo$$1,order,ltr),"line",lineObj,preparedMeasure),begin=outside.left,outside=y<outside.top||y>=outside.bottom);order=skipExtendingChars(lineObj.text,order,1);return PosWithInfo(lineNo$$1,order,ltr,outside,x-begin)}function coordsBidiPart(cm,lineObj,lineNo$$1,preparedMeasure,
order,x,y){var index=findFirst(function(i){i=order[i];var ltr=1!=i.level;return boxIsAfter(cursorCoords(cm,Pos(lineNo$$1,ltr?i.to:i.from,ltr?"before":"after"),"line",lineObj,preparedMeasure),x,y,!0)},0,order.length-1),part=order[index];if(0<index){var ltr$jscomp$0=1!=part.level;ltr$jscomp$0=cursorCoords(cm,Pos(lineNo$$1,ltr$jscomp$0?part.from:part.to,ltr$jscomp$0?"after":"before"),"line",lineObj,preparedMeasure);boxIsAfter(ltr$jscomp$0,x,y,!0)&&ltr$jscomp$0.top>y&&(part=order[index-1])}return part}
function coordsBidiPartWrapped(cm,lineObj,_lineNo,preparedMeasure,order,x,y){y=wrappedLineExtent(cm,lineObj,preparedMeasure,y);_lineNo=y.begin;y=y.end;/\s/.test(lineObj.text.charAt(y-1))&&y--;for(var closestDist=lineObj=null,i=0;i<order.length;i++){var p=order[i];if(!(p.from>=y||p.to<=_lineNo)){var endX=measureCharPrepared(cm,preparedMeasure,1!=p.level?Math.min(y,p.to)-1:Math.max(_lineNo,p.from)).right;endX=endX<x?x-endX+1E9:endX-x;if(!lineObj||closestDist>endX)lineObj=p,closestDist=endX}}lineObj||
(lineObj=order[order.length-1]);lineObj.from<_lineNo&&(lineObj={from:_lineNo,to:lineObj.to,level:lineObj.level});lineObj.to>y&&(lineObj={from:lineObj.from,to:y,level:lineObj.level});return lineObj}function textHeight(display){if(null!=display.cachedTextHeight)return display.cachedTextHeight;if(null==measureText){measureText=elt$jscomp$0("pre");for(var i=0;49>i;++i)measureText.appendChild(document.createTextNode("x")),measureText.appendChild(elt$jscomp$0("br"));measureText.appendChild(document.createTextNode("x"))}removeChildrenAndAdd(display.measure,
measureText);i=measureText.offsetHeight/50;3<i&&(display.cachedTextHeight=i);removeChildren(display.measure);return i||1}function charWidth(display){if(null!=display.cachedCharWidth)return display.cachedCharWidth;var anchor=elt$jscomp$0("span","xxxxxxxxxx"),pre=elt$jscomp$0("pre",[anchor]);removeChildrenAndAdd(display.measure,pre);anchor=anchor.getBoundingClientRect();anchor=(anchor.right-anchor.left)/10;2<anchor&&(display.cachedCharWidth=anchor);return anchor||10}function getDimensions(cm){for(var d=
cm.display,left={},width={},gutterLeft=d.gutters.clientLeft,n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i)left[cm.options.gutters[i]]=n.offsetLeft+n.clientLeft+gutterLeft,width[cm.options.gutters[i]]=n.clientWidth;return{fixedPos:compensateForHScroll(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:left,gutterWidth:width,wrapperWidth:d.wrapper.clientWidth}}function compensateForHScroll(display){return display.scroller.getBoundingClientRect().left-display.sizer.getBoundingClientRect().left}
function estimateHeight(cm){var th=textHeight(cm.display),wrapping=cm.options.lineWrapping,perLine=wrapping&&Math.max(5,cm.display.scroller.clientWidth/charWidth(cm.display)-3);return function(line){if(lineIsHidden(cm.doc,line))return 0;var widgetsHeight=0;if(line.widgets)for(var i=0;i<line.widgets.length;i++)line.widgets[i].height&&(widgetsHeight+=line.widgets[i].height);return wrapping?widgetsHeight+(Math.ceil(line.text.length/perLine)||1)*th:widgetsHeight+th}}function estimateLineHeights(cm){var doc=
cm.doc,est=estimateHeight(cm);doc.iter(function(line){var estHeight=est(line);estHeight!=line.height&&updateLineHeight(line,estHeight)})}function posFromMouse(cm,e,liberal,forRect){var display=cm.display;if(!liberal&&"true"==(e.target||e.srcElement).getAttribute("cm-not-content"))return null;liberal=display.lineSpace.getBoundingClientRect();try{var x=e.clientX-liberal.left;var y=e.clientY-liberal.top}catch(e$10){return null}e=coordsChar(cm,x,y);var line;forRect&&1==e.xRel&&(line=getLine(cm.doc,e.line).text).length==
e.ch&&(forRect=countColumn(line,line.length,cm.options.tabSize)-line.length,e=Pos(e.line,Math.max(0,Math.round((x-paddingH(cm.display).left)/charWidth(cm.display))-forRect)));return e}function findViewIndex(cm,n){if(n>=cm.display.viewTo)return null;n-=cm.display.viewFrom;if(0>n)return null;cm=cm.display.view;for(var i=0;i<cm.length;i++)if(n-=cm[i].size,0>n)return i}function updateSelection(cm){cm.display.input.showSelection(cm.display.input.prepareSelection())}function prepareSelection(cm,primary){void 0===
primary&&(primary=!0);for(var doc=cm.doc,result={},curFragment=result.cursors=document.createDocumentFragment(),selFragment=result.selection=document.createDocumentFragment(),i=0;i<doc.sel.ranges.length;i++)if(primary||i!=doc.sel.primIndex){var range$$1=doc.sel.ranges[i];if(!(range$$1.from().line>=cm.display.viewTo||range$$1.to().line<cm.display.viewFrom)){var collapsed=range$$1.empty();(collapsed||cm.options.showCursorWhenSelecting)&&drawSelectionCursor(cm,range$$1.head,curFragment);collapsed||drawSelectionRange(cm,
range$$1,selFragment)}}return result}function drawSelectionCursor(cm,head,output){head=cursorCoords(cm,head,"div",null,null,!cm.options.singleCursorHeightPerLine);var cursor=output.appendChild(elt$jscomp$0("div"," ","CodeMirror-cursor"));cursor.style.left=head.left+"px";cursor.style.top=head.top+"px";cursor.style.height=Math.max(0,head.bottom-head.top)*cm.options.cursorHeight+"px";head.other&&(cm=output.appendChild(elt$jscomp$0("div"," ","CodeMirror-cursor CodeMirror-secondarycursor")),cm.style.display=
"",cm.style.left=head.other.left+"px",cm.style.top=head.other.top+"px",cm.style.height=.85*(head.other.bottom-head.other.top)+"px")}function cmpCoords(a,b){return a.top-b.top||a.left-b.left}function drawSelectionRange(cm,range$$1,output){function add(left,top,width,bottom){0>top&&(top=0);top=Math.round(top);bottom=Math.round(bottom);fragment.appendChild(elt$jscomp$0("div",null,"CodeMirror-selected","position: absolute; left: "+left+"px;\n                             top: "+top+"px; width: "+(null==
width?rightSide-left:width)+"px;\n                             height: "+(bottom-top)+"px"))}function drawForLine(line,fromArg,toArg){function coords(ch,bias){return charCoords(cm,Pos(line,ch),"div",lineObj,bias)}function wrapX(pos,dir,side){pos=wrappedLineExtentChar(cm,lineObj,null,pos);dir="ltr"==dir==("after"==side)?"left":"right";side="after"==side?pos.begin:pos.end-(/\s/.test(lineObj.text.charAt(pos.end-1))?2:1);return coords(side,dir)[dir]}var lineObj=getLine(doc,line),lineLen=lineObj.text.length,
start,end,order=getOrder(lineObj,doc.direction);iterateBidiSections(order,fromArg||0,null==toArg?lineLen:toArg,function(from,to,dir,i){var ltr="ltr"==dir,fromPos=coords(from,ltr?"left":"right"),toPos=coords(to-1,ltr?"right":"left"),openStart=null==fromArg&&0==from,openEnd=null==toArg&&to==lineLen,first=0==i;i=!order||i==order.length-1;3>=toPos.top-fromPos.top?(to=(docLTR?openStart:openEnd)&&first?leftSide:(ltr?fromPos:toPos).left,add(to,fromPos.top,((docLTR?openEnd:openStart)&&i?rightSide:(ltr?toPos:
fromPos).right)-to,fromPos.bottom)):(ltr?(ltr=docLTR&&openStart&&first?leftSide:fromPos.left,openStart=docLTR?rightSide:wrapX(from,dir,"before"),from=docLTR?leftSide:wrapX(to,dir,"after"),openEnd=docLTR&&openEnd&&i?rightSide:toPos.right):(ltr=docLTR?wrapX(from,dir,"before"):leftSide,openStart=!docLTR&&openStart&&first?rightSide:fromPos.right,from=!docLTR&&openEnd&&i?leftSide:toPos.left,openEnd=docLTR?wrapX(to,dir,"after"):rightSide),add(ltr,fromPos.top,openStart-ltr,fromPos.bottom),fromPos.bottom<
toPos.top&&add(leftSide,fromPos.bottom,null,toPos.top),add(from,toPos.top,openEnd-from,toPos.bottom));if(!start||0>cmpCoords(fromPos,start))start=fromPos;0>cmpCoords(toPos,start)&&(start=toPos);if(!end||0>cmpCoords(fromPos,end))end=fromPos;0>cmpCoords(toPos,end)&&(end=toPos)});return{start:start,end:end}}var display=cm.display,doc=cm.doc,fragment=document.createDocumentFragment(),padding=paddingH(cm.display),leftSide=padding.left,rightSide=Math.max(display.sizerWidth,displayWidth(cm)-display.sizer.offsetLeft)-
padding.right,docLTR="ltr"==doc.direction;display=range$$1.from();range$$1=range$$1.to();if(display.line==range$$1.line)drawForLine(display.line,display.ch,range$$1.ch);else{var fromLine=getLine(doc,display.line);padding=getLine(doc,range$$1.line);padding=visualLine(fromLine)==visualLine(padding);display=drawForLine(display.line,display.ch,padding?fromLine.text.length+1:null).end;range$$1=drawForLine(range$$1.line,padding?0:null,range$$1.ch).start;padding&&(display.top<range$$1.top-2?(add(display.right,
display.top,null,display.bottom),add(leftSide,range$$1.top,range$$1.left,range$$1.bottom)):add(display.right,display.top,range$$1.left-display.right,display.bottom));display.bottom<range$$1.top&&add(leftSide,display.bottom,null,range$$1.top)}output.appendChild(fragment)}function restartBlink(cm){if(cm.state.focused){var display=cm.display;clearInterval(display.blinker);var on=!0;display.cursorDiv.style.visibility="";0<cm.options.cursorBlinkRate?display.blinker=setInterval(function(){return display.cursorDiv.style.visibility=
(on=!on)?"":"hidden"},cm.options.cursorBlinkRate):0>cm.options.cursorBlinkRate&&(display.cursorDiv.style.visibility="hidden")}}function ensureFocus(cm){cm.state.focused||(cm.display.input.focus(),onFocus(cm))}function delayBlurEvent(cm){cm.state.delayingBlurEvent=!0;setTimeout(function(){cm.state.delayingBlurEvent&&(cm.state.delayingBlurEvent=!1,onBlur(cm))},100)}function onFocus(cm,e){cm.state.delayingBlurEvent&&(cm.state.delayingBlurEvent=!1);"nocursor"!=cm.options.readOnly&&(cm.state.focused||
(signal(cm,"focus",cm,e),cm.state.focused=!0,addClass(cm.display.wrapper,"CodeMirror-focused"),cm.curOp||cm.display.selForContextMenu==cm.doc.sel||(cm.display.input.reset(),webkit&&setTimeout(function(){return cm.display.input.reset(!0)},20)),cm.display.input.receivedFocus()),restartBlink(cm))}function onBlur(cm,e){cm.state.delayingBlurEvent||(cm.state.focused&&(signal(cm,"blur",cm,e),cm.state.focused=!1,rmClass(cm.display.wrapper,"CodeMirror-focused")),clearInterval(cm.display.blinker),setTimeout(function(){cm.state.focused||
(cm.display.shift=!1)},150))}function updateHeightsInViewport(cm){cm=cm.display;for(var prevBottom=cm.lineDiv.offsetTop,i=0;i<cm.view.length;i++){var cur=cm.view[i];if(!cur.hidden){if(ie&&8>ie_version){var bot=cur.node.offsetTop+cur.node.offsetHeight;var height=bot-prevBottom;prevBottom=bot}else height=cur.node.getBoundingClientRect(),height=height.bottom-height.top;bot=cur.line.height-height;2>height&&(height=textHeight(cm));if(.005<bot||-.005>bot)if(updateLineHeight(cur.line,height),updateWidgetHeight(cur.line),
cur.rest)for(height=0;height<cur.rest.length;height++)updateWidgetHeight(cur.rest[height])}}}function updateWidgetHeight(line){if(line.widgets)for(var i=0;i<line.widgets.length;++i){var w=line.widgets[i],parent=w.node.parentNode;parent&&(w.height=parent.offsetHeight)}}function visibleLines(display,doc,viewport){var top=viewport&&null!=viewport.top?Math.max(0,viewport.top):display.scroller.scrollTop;top=Math.floor(top-display.lineSpace.offsetTop);var bottom=viewport&&null!=viewport.bottom?viewport.bottom:
top+display.wrapper.clientHeight;top=lineAtHeight(doc,top);bottom=lineAtHeight(doc,bottom);if(viewport&&viewport.ensure){var ensureFrom=viewport.ensure.from.line;viewport=viewport.ensure.to.line;ensureFrom<top?(top=ensureFrom,bottom=lineAtHeight(doc,heightAtLine(getLine(doc,ensureFrom))+display.wrapper.clientHeight)):Math.min(viewport,doc.lastLine())>=bottom&&(top=lineAtHeight(doc,heightAtLine(getLine(doc,viewport))-display.wrapper.clientHeight),bottom=viewport)}return{from:top,to:Math.max(bottom,
top+1)}}function alignHorizontally(cm){var display=cm.display,view=display.view;if(display.alignWidgets||display.gutters.firstChild&&cm.options.fixedGutter){for(var comp=compensateForHScroll(display)-display.scroller.scrollLeft+cm.doc.scrollLeft,gutterW=display.gutters.offsetWidth,left=comp+"px",i=0;i<view.length;i++)if(!view[i].hidden){cm.options.fixedGutter&&(view[i].gutter&&(view[i].gutter.style.left=left),view[i].gutterBackground&&(view[i].gutterBackground.style.left=left));var align=view[i].alignable;
if(align)for(var j=0;j<align.length;j++)align[j].style.left=left}cm.options.fixedGutter&&(display.gutters.style.left=comp+gutterW+"px")}}function maybeUpdateLineNumberWidth(cm){if(!cm.options.lineNumbers)return!1;var doc=cm.doc;doc=lineNumberFor(cm.options,doc.first+doc.size-1);var display=cm.display;if(doc.length!=display.lineNumChars){var test=display.measure.appendChild(elt$jscomp$0("div",[elt$jscomp$0("div",doc)],"CodeMirror-linenumber CodeMirror-gutter-elt")),innerW=test.firstChild.offsetWidth;
test=test.offsetWidth-innerW;display.lineGutter.style.width="";display.lineNumInnerWidth=Math.max(innerW,display.lineGutter.offsetWidth-test)+1;display.lineNumWidth=display.lineNumInnerWidth+test;display.lineNumChars=display.lineNumInnerWidth?doc.length:-1;display.lineGutter.style.width=display.lineNumWidth+"px";updateGutterSpace(cm);return!0}return!1}function calculateScrollPos(cm,rect){var display=cm.display,snapMargin=textHeight(cm.display);0>rect.top&&(rect.top=0);var screentop=cm.curOp&&null!=
cm.curOp.scrollTop?cm.curOp.scrollTop:display.scroller.scrollTop,screen=displayHeight(cm),result={};rect.bottom-rect.top>screen&&(rect.bottom=rect.top+screen);var docBottom=cm.doc.height+paddingVert(display),atTop=rect.top<snapMargin;snapMargin=rect.bottom>docBottom-snapMargin;rect.top<screentop?result.scrollTop=atTop?0:rect.top:rect.bottom>screentop+screen&&(screen=Math.min(rect.top,(snapMargin?docBottom:rect.bottom)-screen),screen!=screentop&&(result.scrollTop=screen));screentop=cm.curOp&&null!=
cm.curOp.scrollLeft?cm.curOp.scrollLeft:display.scroller.scrollLeft;cm=displayWidth(cm)-(cm.options.fixedGutter?display.gutters.offsetWidth:0);if(display=rect.right-rect.left>cm)rect.right=rect.left+cm;10>rect.left?result.scrollLeft=0:rect.left<screentop?result.scrollLeft=Math.max(0,rect.left-(display?0:10)):rect.right>cm+screentop-3&&(result.scrollLeft=rect.right+(display?0:10)-cm);return result}function addToScrollTop(cm,top){null!=top&&(resolveScrollToPos(cm),cm.curOp.scrollTop=(null==cm.curOp.scrollTop?
cm.doc.scrollTop:cm.curOp.scrollTop)+top)}function ensureCursorVisible(cm){resolveScrollToPos(cm);var cur=cm.getCursor();cm.curOp.scrollToPos={from:cur,to:cur,margin:cm.options.cursorScrollMargin}}function scrollToCoords(cm,x,y){null==x&&null==y||resolveScrollToPos(cm);null!=x&&(cm.curOp.scrollLeft=x);null!=y&&(cm.curOp.scrollTop=y)}function resolveScrollToPos(cm){var range$$1=cm.curOp.scrollToPos;if(range$$1){cm.curOp.scrollToPos=null;var from=estimateCoords(cm,range$$1.from),to=estimateCoords(cm,
range$$1.to);scrollToCoordsRange(cm,from,to,range$$1.margin)}}function scrollToCoordsRange(cm,from,to,margin){from=calculateScrollPos(cm,{left:Math.min(from.left,to.left),top:Math.min(from.top,to.top)-margin,right:Math.max(from.right,to.right),bottom:Math.max(from.bottom,to.bottom)+margin});scrollToCoords(cm,from.scrollLeft,from.scrollTop)}function updateScrollTop(cm,val){2>Math.abs(cm.doc.scrollTop-val)||(gecko||updateDisplaySimple(cm,{top:val}),setScrollTop(cm,val,!0),gecko&&updateDisplaySimple(cm),
startWorker(cm,100))}function setScrollTop(cm,val,forceScroll){val=Math.min(cm.display.scroller.scrollHeight-cm.display.scroller.clientHeight,val);if(cm.display.scroller.scrollTop!=val||forceScroll)cm.doc.scrollTop=val,cm.display.scrollbars.setScrollTop(val),cm.display.scroller.scrollTop!=val&&(cm.display.scroller.scrollTop=val)}function setScrollLeft(cm,val,isScroller,forceScroll){val=Math.min(val,cm.display.scroller.scrollWidth-cm.display.scroller.clientWidth);(isScroller?val==cm.doc.scrollLeft:
2>Math.abs(cm.doc.scrollLeft-val))&&!forceScroll||(cm.doc.scrollLeft=val,alignHorizontally(cm),cm.display.scroller.scrollLeft!=val&&(cm.display.scroller.scrollLeft=val),cm.display.scrollbars.setScrollLeft(val))}function measureForScrollbars(cm){var d=cm.display,gutterW=d.gutters.offsetWidth,docH=Math.round(cm.doc.height+paddingVert(cm.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,
barLeft:cm.options.fixedGutter?gutterW:0,docHeight:docH,scrollHeight:docH+scrollGap(cm)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:gutterW}}function updateScrollbars(cm,measure){measure||(measure=measureForScrollbars(cm));var startWidth=cm.display.barWidth,startHeight=cm.display.barHeight;updateScrollbarsInner(cm,measure);for(measure=0;4>measure&&startWidth!=cm.display.barWidth||startHeight!=cm.display.barHeight;measure++)startWidth!=cm.display.barWidth&&cm.options.lineWrapping&&updateHeightsInViewport(cm),
updateScrollbarsInner(cm,measureForScrollbars(cm)),startWidth=cm.display.barWidth,startHeight=cm.display.barHeight}function updateScrollbarsInner(cm,measure){var d=cm.display,sizes=d.scrollbars.update(measure);d.sizer.style.paddingRight=(d.barWidth=sizes.right)+"px";d.sizer.style.paddingBottom=(d.barHeight=sizes.bottom)+"px";d.heightForcer.style.borderBottom=sizes.bottom+"px solid transparent";sizes.right&&sizes.bottom?(d.scrollbarFiller.style.display="block",d.scrollbarFiller.style.height=sizes.bottom+
"px",d.scrollbarFiller.style.width=sizes.right+"px"):d.scrollbarFiller.style.display="";sizes.bottom&&cm.options.coverGutterNextToScrollbar&&cm.options.fixedGutter?(d.gutterFiller.style.display="block",d.gutterFiller.style.height=sizes.bottom+"px",d.gutterFiller.style.width=measure.gutterWidth+"px"):d.gutterFiller.style.display=""}function initScrollbars(cm){cm.display.scrollbars&&(cm.display.scrollbars.clear(),cm.display.scrollbars.addClass&&rmClass(cm.display.wrapper,cm.display.scrollbars.addClass));
cm.display.scrollbars=new scrollbarModel[cm.options.scrollbarStyle](function(node){cm.display.wrapper.insertBefore(node,cm.display.scrollbarFiller);on(node,"mousedown",function(){cm.state.focused&&setTimeout(function(){return cm.display.input.focus()},0)});node.setAttribute("cm-not-content","true")},function(pos,axis){"horizontal"==axis?setScrollLeft(cm,pos):updateScrollTop(cm,pos)},cm);cm.display.scrollbars.addClass&&addClass(cm.display.wrapper,cm.display.scrollbars.addClass)}function startOperation(cm){cm.curOp=
{cm:cm,viewChanged:!1,startHeight:cm.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++nextOpId};cm=cm.curOp;operationGroup?operationGroup.ops.push(cm):cm.ownsGroup=operationGroup={ops:[cm],delayedCallbacks:[]}}function endOperation(cm$jscomp$0){finishOperation(cm$jscomp$0.curOp,function(group){for(var i=0;i<group.ops.length;i++)group.ops[i].cm.curOp=
null;group=group.ops;for(i=0;i<group.length;i++){var op=group[i],cm=op.cm,display=cm.display,display$jscomp$0=cm.display;!display$jscomp$0.scrollbarsClipped&&display$jscomp$0.scroller.offsetWidth&&(display$jscomp$0.nativeBarWidth=display$jscomp$0.scroller.offsetWidth-display$jscomp$0.scroller.clientWidth,display$jscomp$0.heightForcer.style.height=scrollGap(cm)+"px",display$jscomp$0.sizer.style.marginBottom=-display$jscomp$0.nativeBarWidth+"px",display$jscomp$0.sizer.style.borderRightWidth=scrollGap(cm)+
"px",display$jscomp$0.scrollbarsClipped=!0);op.updateMaxLine&&findMaxLine(cm);op.mustUpdate=op.viewChanged||op.forceUpdate||null!=op.scrollTop||op.scrollToPos&&(op.scrollToPos.from.line<display.viewFrom||op.scrollToPos.to.line>=display.viewTo)||display.maxLineChanged&&cm.options.lineWrapping;op.update=op.mustUpdate&&new DisplayUpdate(cm,op.mustUpdate&&{top:op.scrollTop,ensure:op.scrollToPos},op.forceUpdate)}for(i=0;i<group.length;i++)op=group[i],op.updatedDisplay=op.mustUpdate&&updateDisplayIfNeeded(op.cm,
op.update);for(i=0;i<group.length;i++)if(op=group[i],cm=op.cm,display=cm.display,op.updatedDisplay&&updateHeightsInViewport(cm),op.barMeasure=measureForScrollbars(cm),display.maxLineChanged&&!cm.options.lineWrapping&&(display$jscomp$0=display.maxLine.text.length,display$jscomp$0=measureCharPrepared(cm,prepareMeasureForLine(cm,display.maxLine),display$jscomp$0,void 0),op.adjustWidthTo=display$jscomp$0.left+3,cm.display.sizerWidth=op.adjustWidthTo,op.barMeasure.scrollWidth=Math.max(display.scroller.clientWidth,
display.sizer.offsetLeft+op.adjustWidthTo+scrollGap(cm)+cm.display.barWidth),op.maxScrollLeft=Math.max(0,display.sizer.offsetLeft+op.adjustWidthTo-displayWidth(cm))),op.updatedDisplay||op.selectionChanged)op.preparedSelection=display.input.prepareSelection();for(i=0;i<group.length;i++)op=group[i],cm=op.cm,null!=op.adjustWidthTo&&(cm.display.sizer.style.minWidth=op.adjustWidthTo+"px",op.maxScrollLeft<cm.doc.scrollLeft&&setScrollLeft(cm,Math.min(cm.display.scroller.scrollLeft,op.maxScrollLeft),!0),
cm.display.maxLineChanged=!1),display=op.focus&&op.focus==activeElt(),op.preparedSelection&&cm.display.input.showSelection(op.preparedSelection,display),(op.updatedDisplay||op.startHeight!=cm.doc.height)&&updateScrollbars(cm,op.barMeasure),op.updatedDisplay&&setDocumentHeight(cm,op.barMeasure),op.selectionChanged&&restartBlink(cm),cm.state.focused&&op.updateInput&&cm.display.input.reset(op.typing),display&&ensureFocus(op.cm);for(i=0;i<group.length;i++){var rect=void 0;op=group[i];cm=op.cm;display=
cm.display;display$jscomp$0=cm.doc;op.updatedDisplay&&postUpdateDisplay(cm,op.update);null==display.wheelStartX||null==op.scrollTop&&null==op.scrollLeft&&!op.scrollToPos||(display.wheelStartX=display.wheelStartY=null);null!=op.scrollTop&&setScrollTop(cm,op.scrollTop,op.forceScroll);null!=op.scrollLeft&&setScrollLeft(cm,op.scrollLeft,!0,!0);if(op.scrollToPos){var pos=clipPos(display$jscomp$0,op.scrollToPos.from);var rect$jscomp$0=clipPos(display$jscomp$0,op.scrollToPos.to);var margin=op.scrollToPos.margin;
null==margin&&(margin=0);cm.options.lineWrapping||pos!=rect$jscomp$0||(pos=pos.ch?Pos(pos.line,"before"==pos.sticky?pos.ch-1:pos.ch,"after"):pos,rect$jscomp$0="before"==pos.sticky?Pos(pos.line,pos.ch+1,"before"):pos);for(var limit=0;5>limit;limit++){var changed=!1;rect=cursorCoords(cm,pos);var endCoords=rect$jscomp$0&&rect$jscomp$0!=pos?cursorCoords(cm,rect$jscomp$0):rect;rect={left:Math.min(rect.left,endCoords.left),top:Math.min(rect.top,endCoords.top)-margin,right:Math.max(rect.left,endCoords.left),
bottom:Math.max(rect.bottom,endCoords.bottom)+margin};endCoords=calculateScrollPos(cm,rect);var startTop=cm.doc.scrollTop,startLeft=cm.doc.scrollLeft;null!=endCoords.scrollTop&&(updateScrollTop(cm,endCoords.scrollTop),1<Math.abs(cm.doc.scrollTop-startTop)&&(changed=!0));null!=endCoords.scrollLeft&&(setScrollLeft(cm,endCoords.scrollLeft),1<Math.abs(cm.doc.scrollLeft-startLeft)&&(changed=!0));if(!changed)break}rect$jscomp$0=rect;signalDOMEvent(cm,"scrollCursorIntoView")||(margin=cm.display,limit=margin.sizer.getBoundingClientRect(),
pos=null,0>rect$jscomp$0.top+limit.top?pos=!0:rect$jscomp$0.bottom+limit.top>(window.innerHeight||document.documentElement.clientHeight)&&(pos=!1),null==pos||phantom||(rect$jscomp$0=elt$jscomp$0("div","​",null,"position: absolute;\n                         top: "+(rect$jscomp$0.top-margin.viewOffset-cm.display.lineSpace.offsetTop)+"px;\n                         height: "+(rect$jscomp$0.bottom-rect$jscomp$0.top+scrollGap(cm)+margin.barHeight)+"px;\n                         left: "+rect$jscomp$0.left+
"px; width: "+Math.max(2,rect$jscomp$0.right-rect$jscomp$0.left)+"px;"),cm.display.lineSpace.appendChild(rect$jscomp$0),rect$jscomp$0.scrollIntoView(pos),cm.display.lineSpace.removeChild(rect$jscomp$0)))}rect$jscomp$0=op.maybeHiddenMarkers;pos=op.maybeUnhiddenMarkers;if(rect$jscomp$0)for(margin=0;margin<rect$jscomp$0.length;++margin)rect$jscomp$0[margin].lines.length||signal(rect$jscomp$0[margin],"hide");if(pos)for(rect$jscomp$0=0;rect$jscomp$0<pos.length;++rect$jscomp$0)pos[rect$jscomp$0].lines.length&&
signal(pos[rect$jscomp$0],"unhide");display.wrapper.offsetHeight&&(display$jscomp$0.scrollTop=cm.display.scroller.scrollTop);op.changeObjs&&signal(cm,"changes",cm,op.changeObjs);op.update&&op.update.finish()}})}function runInOp(cm,f){if(cm.curOp)return f();startOperation(cm);try{return f()}finally{endOperation(cm)}}function operation(cm,f){return function(){if(cm.curOp)return f.apply(cm,arguments);startOperation(cm);try{return f.apply(cm,arguments)}finally{endOperation(cm)}}}function methodOp(f){return function(){if(this.curOp)return f.apply(this,
arguments);startOperation(this);try{return f.apply(this,arguments)}finally{endOperation(this)}}}function docMethodOp(f){return function(){var cm=this.cm;if(!cm||cm.curOp)return f.apply(this,arguments);startOperation(cm);try{return f.apply(this,arguments)}finally{endOperation(cm)}}}function regChange(cm,from,to,lendiff){null==from&&(from=cm.doc.first);null==to&&(to=cm.doc.first+cm.doc.size);lendiff||(lendiff=0);var display=cm.display;lendiff&&to<display.viewTo&&(null==display.updateLineNumbers||display.updateLineNumbers>
from)&&(display.updateLineNumbers=from);cm.curOp.viewChanged=!0;if(from>=display.viewTo)sawCollapsedSpans&&visualLineNo(cm.doc,from)<display.viewTo&&resetView(cm);else if(to<=display.viewFrom)sawCollapsedSpans&&visualLineEndNo(cm.doc,to+lendiff)>display.viewFrom?resetView(cm):(display.viewFrom+=lendiff,display.viewTo+=lendiff);else if(from<=display.viewFrom&&to>=display.viewTo)resetView(cm);else if(from<=display.viewFrom){var cut=viewCuttingPoint(cm,to,to+lendiff,1);cut?(display.view=display.view.slice(cut.index),
display.viewFrom=cut.lineN,display.viewTo+=lendiff):resetView(cm)}else if(to>=display.viewTo)(cut=viewCuttingPoint(cm,from,from,-1))?(display.view=display.view.slice(0,cut.index),display.viewTo=cut.lineN):resetView(cm);else{cut=viewCuttingPoint(cm,from,from,-1);var cutBot=viewCuttingPoint(cm,to,to+lendiff,1);cut&&cutBot?(display.view=display.view.slice(0,cut.index).concat(buildViewArray(cm,cut.lineN,cutBot.lineN)).concat(display.view.slice(cutBot.index)),display.viewTo+=lendiff):resetView(cm)}if(cm=
display.externalMeasured)to<cm.lineN?cm.lineN+=lendiff:from<cm.lineN+cm.size&&(display.externalMeasured=null)}function regLineChange(cm,line,type){cm.curOp.viewChanged=!0;var display=cm.display,ext=cm.display.externalMeasured;ext&&line>=ext.lineN&&line<ext.lineN+ext.size&&(display.externalMeasured=null);line<display.viewFrom||line>=display.viewTo||(cm=display.view[findViewIndex(cm,line)],null!=cm.node&&(cm=cm.changes||(cm.changes=[]),-1==indexOf(cm,type)&&cm.push(type)))}function resetView(cm){cm.display.viewFrom=
cm.display.viewTo=cm.doc.first;cm.display.view=[];cm.display.viewOffset=0}function viewCuttingPoint(cm,oldN,newN,dir){var index=findViewIndex(cm,oldN),view=cm.display.view;if(!sawCollapsedSpans||newN==cm.doc.first+cm.doc.size)return{index:index,lineN:newN};for(var n=cm.display.viewFrom,i=0;i<index;i++)n+=view[i].size;if(n!=oldN){if(0<dir){if(index==view.length-1)return null;oldN=n+view[index].size-oldN;index++}else oldN=n-oldN;newN+=oldN}for(;visualLineNo(cm.doc,newN)!=newN;){if(index==(0>dir?0:view.length-
1))return null;newN+=dir*view[index-(0>dir?1:0)].size;index+=dir}return{index:index,lineN:newN}}function countDirtyView(cm){cm=cm.display.view;for(var dirty=0,i=0;i<cm.length;i++){var lineView=cm[i];lineView.hidden||lineView.node&&!lineView.changes||++dirty}return dirty}function startWorker(cm,time){cm.doc.highlightFrontier<cm.display.viewTo&&cm.state.highlight.set(time,bind(highlightWorker,cm))}function highlightWorker(cm){var doc=cm.doc;if(!(doc.highlightFrontier>=cm.display.viewTo)){var end=+new Date+
cm.options.workTime,context=getContextBefore(cm,doc.highlightFrontier),changedLines=[];doc.iter(context.line,Math.min(doc.first+doc.size,cm.display.viewTo+500),function(line){if(context.line>=cm.display.viewFrom){var oldStyles=line.styles,resetState=line.text.length>cm.options.maxHighlightLength?copyState(doc.mode,context.state):null,highlighted=highlightLine(cm,line,context,!0);resetState&&(context.state=resetState);line.styles=highlighted.styles;resetState=line.styleClasses;(highlighted=highlighted.classes)?
line.styleClasses=highlighted:resetState&&(line.styleClasses=null);highlighted=!oldStyles||oldStyles.length!=line.styles.length||resetState!=highlighted&&(!resetState||!highlighted||resetState.bgClass!=highlighted.bgClass||resetState.textClass!=highlighted.textClass);for(resetState=0;!highlighted&&resetState<oldStyles.length;++resetState)highlighted=oldStyles[resetState]!=line.styles[resetState];highlighted&&changedLines.push(context.line);line.stateAfter=context.save()}else line.text.length<=cm.options.maxHighlightLength&&
processLine(cm,line.text,context),line.stateAfter=0==context.line%5?context.save():null;context.nextLine();if(+new Date>end)return startWorker(cm,cm.options.workDelay),!0});doc.highlightFrontier=context.line;doc.modeFrontier=Math.max(doc.modeFrontier,context.line);changedLines.length&&runInOp(cm,function(){for(var i=0;i<changedLines.length;i++)regLineChange(cm,changedLines[i],"text")})}}function updateDisplayIfNeeded(cm,update){var display=cm.display,doc=cm.doc;if(update.editorIsHidden)return resetView(cm),
!1;if(!update.force&&update.visible.from>=display.viewFrom&&update.visible.to<=display.viewTo&&(null==display.updateLineNumbers||display.updateLineNumbers>=display.viewTo)&&display.renderedView==display.view&&0==countDirtyView(cm))return!1;maybeUpdateLineNumberWidth(cm)&&(resetView(cm),update.dims=getDimensions(cm));var end=doc.first+doc.size,from=Math.max(update.visible.from-cm.options.viewportMargin,doc.first),to=Math.min(end,update.visible.to+cm.options.viewportMargin);display.viewFrom<from&&20>
from-display.viewFrom&&(from=Math.max(doc.first,display.viewFrom));display.viewTo>to&&20>display.viewTo-to&&(to=Math.min(end,display.viewTo));sawCollapsedSpans&&(from=visualLineNo(cm.doc,from),to=visualLineEndNo(cm.doc,to));doc=from!=display.viewFrom||to!=display.viewTo||display.lastWrapHeight!=update.wrapperHeight||display.lastWrapWidth!=update.wrapperWidth;end=cm.display;0==end.view.length||from>=end.viewTo||to<=end.viewFrom?(end.view=buildViewArray(cm,from,to),end.viewFrom=from):(end.viewFrom>
from?end.view=buildViewArray(cm,from,end.viewFrom).concat(end.view):end.viewFrom<from&&(end.view=end.view.slice(findViewIndex(cm,from))),end.viewFrom=from,end.viewTo<to?end.view=end.view.concat(buildViewArray(cm,end.viewTo,to)):end.viewTo>to&&(end.view=end.view.slice(0,findViewIndex(cm,to))));end.viewTo=to;display.viewOffset=heightAtLine(getLine(cm.doc,display.viewFrom));cm.display.mover.style.top=display.viewOffset+"px";to=countDirtyView(cm);if(!doc&&0==to&&!update.force&&display.renderedView==display.view&&
(null==display.updateLineNumbers||display.updateLineNumbers>=display.viewTo))return!1;cm.hasFocus()?from=null:(from=activeElt())&&contains(cm.display.lineDiv,from)?(from={activeElt:from},window.getSelection&&(end=window.getSelection(),end.anchorNode&&end.extend&&contains(cm.display.lineDiv,end.anchorNode)&&(from.anchorNode=end.anchorNode,from.anchorOffset=end.anchorOffset,from.focusNode=end.focusNode,from.focusOffset=end.focusOffset))):from=null;4<to&&(display.lineDiv.style.display="none");patchDisplay(cm,
display.updateLineNumbers,update.dims);4<to&&(display.lineDiv.style.display="");display.renderedView=display.view;(to=from)&&to.activeElt&&to.activeElt!=activeElt()&&(to.activeElt.focus(),to.anchorNode&&contains(document.body,to.anchorNode)&&contains(document.body,to.focusNode)&&(from=window.getSelection(),end=document.createRange(),end.setEnd(to.anchorNode,to.anchorOffset),end.collapse(!1),from.removeAllRanges(),from.addRange(end),from.extend(to.focusNode,to.focusOffset)));removeChildren(display.cursorDiv);
removeChildren(display.selectionDiv);display.gutters.style.height=display.sizer.style.minHeight=0;doc&&(display.lastWrapHeight=update.wrapperHeight,display.lastWrapWidth=update.wrapperWidth,startWorker(cm,400));display.updateLineNumbers=null;return!0}function postUpdateDisplay(cm,update){for(var viewport=update.viewport,first=!0;;first=!1){if(!first||!cm.options.lineWrapping||update.oldDisplayWidth==displayWidth(cm))if(viewport&&null!=viewport.top&&(viewport={top:Math.min(cm.doc.height+paddingVert(cm.display)-
displayHeight(cm),viewport.top)}),update.visible=visibleLines(cm.display,cm.doc,viewport),update.visible.from>=cm.display.viewFrom&&update.visible.to<=cm.display.viewTo)break;if(!updateDisplayIfNeeded(cm,update))break;updateHeightsInViewport(cm);first=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,first);setDocumentHeight(cm,first);update.force=!1}update.signal(cm,"update",cm);if(cm.display.viewFrom!=cm.display.reportedViewFrom||cm.display.viewTo!=cm.display.reportedViewTo)update.signal(cm,
"viewportChange",cm,cm.display.viewFrom,cm.display.viewTo),cm.display.reportedViewFrom=cm.display.viewFrom,cm.display.reportedViewTo=cm.display.viewTo}function updateDisplaySimple(cm,viewport){viewport=new DisplayUpdate(cm,viewport);if(updateDisplayIfNeeded(cm,viewport)){updateHeightsInViewport(cm);postUpdateDisplay(cm,viewport);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure);viewport.finish()}}function patchDisplay(cm,updateNumbersFrom,
dims){function rm(node){var next=node.nextSibling;webkit&&mac&&cm.display.currentWheelTarget==node?node.style.display="none":node.parentNode.removeChild(node);return next}var display=cm.display,lineNumbers=cm.options.lineNumbers,container=display.lineDiv,cur=container.firstChild,view=display.view;display=display.viewFrom;for(var i=0;i<view.length;i++){var lineView=view[i];if(!lineView.hidden)if(lineView.node&&lineView.node.parentNode==container){for(;cur!=lineView.node;)cur=rm(cur);cur=lineNumbers&&
null!=updateNumbersFrom&&updateNumbersFrom<=display&&lineView.lineNumber;lineView.changes&&(-1<indexOf(lineView.changes,"gutter")&&(cur=!1),updateLineForChanges(cm,lineView,display,dims));cur&&(removeChildren(lineView.lineNumber),lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options,display))));cur=lineView.node.nextSibling}else{var node$jscomp$0=buildLineElement(cm,lineView,display,dims);container.insertBefore(node$jscomp$0,cur)}display+=lineView.size}for(;cur;)cur=rm(cur)}
function updateGutterSpace(cm){cm.display.sizer.style.marginLeft=cm.display.gutters.offsetWidth+"px"}function setDocumentHeight(cm,measure){cm.display.sizer.style.minHeight=measure.docHeight+"px";cm.display.heightForcer.style.top=measure.docHeight+"px";cm.display.gutters.style.height=measure.docHeight+cm.display.barHeight+scrollGap(cm)+"px"}function updateGutters(cm){var gutters=cm.display.gutters,specs=cm.options.gutters;removeChildren(gutters);for(var i=0;i<specs.length;++i){var gutterClass=specs[i],
gElt=gutters.appendChild(elt$jscomp$0("div",null,"CodeMirror-gutter "+gutterClass));"CodeMirror-linenumbers"==gutterClass&&(cm.display.lineGutter=gElt,gElt.style.width=(cm.display.lineNumWidth||1)+"px")}gutters.style.display=i?"":"none";updateGutterSpace(cm)}function setGuttersForLineNumbers(options){var found=indexOf(options.gutters,"CodeMirror-linenumbers");-1==found&&options.lineNumbers?options.gutters=options.gutters.concat(["CodeMirror-linenumbers"]):-1<found&&!options.lineNumbers&&(options.gutters=
options.gutters.slice(0),options.gutters.splice(found,1))}function wheelEventDelta(e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;null==dx&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(dx=e.detail);null==dy&&e.detail&&e.axis==e.VERTICAL_AXIS?dy=e.detail:null==dy&&(dy=e.wheelDelta);return{x:dx,y:dy}}function wheelEventPixels(e){e=wheelEventDelta(e);e.x*=wheelPixelsPerUnit;e.y*=wheelPixelsPerUnit;return e}function onScrollWheel(cm,e){var delta=wheelEventDelta(e),dx=delta.x;delta=delta.y;var display=cm.display,scroll=
display.scroller,canScrollX=scroll.scrollWidth>scroll.clientWidth,canScrollY=scroll.scrollHeight>scroll.clientHeight;if(dx&&canScrollX||delta&&canScrollY){if(delta&&mac&&webkit){canScrollX=e.target;var view=display.view;a:for(;canScrollX!=scroll;canScrollX=canScrollX.parentNode)for(var i=0;i<view.length;i++)if(view[i].node==canScrollX){cm.display.currentWheelTarget=canScrollX;break a}}!dx||gecko||presto||null==wheelPixelsPerUnit?(delta&&null!=wheelPixelsPerUnit&&(e=delta*wheelPixelsPerUnit,canScrollY=
cm.doc.scrollTop,canScrollX=canScrollY+display.wrapper.clientHeight,0>e?canScrollY=Math.max(0,canScrollY+e-50):canScrollX=Math.min(cm.doc.height,canScrollX+e+50),updateDisplaySimple(cm,{top:canScrollY,bottom:canScrollX})),20>wheelSamples&&(null==display.wheelStartX?(display.wheelStartX=scroll.scrollLeft,display.wheelStartY=scroll.scrollTop,display.wheelDX=dx,display.wheelDY=delta,setTimeout(function(){if(null!=display.wheelStartX){var movedX=scroll.scrollLeft-display.wheelStartX,movedY=scroll.scrollTop-
display.wheelStartY;movedX=movedY&&display.wheelDY&&movedY/display.wheelDY||movedX&&display.wheelDX&&movedX/display.wheelDX;display.wheelStartX=display.wheelStartY=null;movedX&&(wheelPixelsPerUnit=(wheelPixelsPerUnit*wheelSamples+movedX)/(wheelSamples+1),++wheelSamples)}},200)):(display.wheelDX+=dx,display.wheelDY+=delta))):(delta&&canScrollY&&updateScrollTop(cm,Math.max(0,scroll.scrollTop+delta*wheelPixelsPerUnit)),setScrollLeft(cm,Math.max(0,scroll.scrollLeft+dx*wheelPixelsPerUnit)),(!delta||delta&&
canScrollY)&&e_preventDefault(e),display.wheelStartX=null)}}function normalizeSelection(ranges,primIndex){primIndex=ranges[primIndex];ranges.sort(function(a,b){return cmp(a.from(),b.from())});primIndex=indexOf(ranges,primIndex);for(var i=1;i<ranges.length;i++){var cur=ranges[i],prev=ranges[i-1];if(0<=cmp(prev.to(),cur.from())){var from=minPos(prev.from(),cur.from()),to=maxPos(prev.to(),cur.to());cur=prev.empty()?cur.from()==cur.head:prev.from()==prev.head;i<=primIndex&&--primIndex;ranges.splice(--i,
2,new Range(cur?to:from,cur?from:to))}}return new Selection(ranges,primIndex)}function simpleSelection(anchor,head){return new Selection([new Range(anchor,head||anchor)],0)}function changeEnd(change){return change.text?Pos(change.from.line+change.text.length-1,lst(change.text).length+(1==change.text.length?change.from.ch:0)):change.to}function adjustForChange(pos,change){if(0>cmp(pos,change.from))return pos;if(0>=cmp(pos,change.to))return changeEnd(change);var line=pos.line+change.text.length-(change.to.line-
change.from.line)-1,ch=pos.ch;pos.line==change.to.line&&(ch+=changeEnd(change).ch-change.to.ch);return Pos(line,ch)}function computeSelAfterChange(doc,change){for(var out=[],i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];out.push(new Range(adjustForChange(range.anchor,change),adjustForChange(range.head,change)))}return normalizeSelection(out,doc.sel.primIndex)}function offsetPos(pos,old,nw){return pos.line==old.line?Pos(nw.line,pos.ch-old.ch+nw.ch):Pos(nw.line+(pos.line-old.line),pos.ch)}
function loadMode(cm){cm.doc.mode=getMode(cm.options,cm.doc.modeOption);resetModeState(cm)}function resetModeState(cm){cm.doc.iter(function(line){line.stateAfter&&(line.stateAfter=null);line.styles&&(line.styles=null)});cm.doc.modeFrontier=cm.doc.highlightFrontier=cm.doc.first;startWorker(cm,100);cm.state.modeGen++;cm.curOp&&regChange(cm)}function isWholeLineUpdate(doc,change){return 0==change.from.ch&&0==change.to.ch&&""==lst(change.text)&&(!doc.cm||doc.cm.options.wholeLineUpdateBefore)}function updateDoc(doc,
change,markedSpans,estimateHeight$$1){function update(line,text,spans){line.text=text;line.stateAfter&&(line.stateAfter=null);line.styles&&(line.styles=null);null!=line.order&&(line.order=null);detachMarkedSpans(line);attachMarkedSpans(line,spans);text=estimateHeight$$1?estimateHeight$$1(line):1;text!=line.height&&updateLineHeight(line,text);signalLater(line,"change",line,change)}function linesFor(start,end){for(var result=[];start<end;++start)result.push(new Line(text$jscomp$0[start],markedSpans?
markedSpans[start]:null,estimateHeight$$1));return result}var from=change.from,to=change.to,text$jscomp$0=change.text,firstLine=getLine(doc,from.line),lastLine=getLine(doc,to.line),lastText=lst(text$jscomp$0),lastSpans=markedSpans?markedSpans[text$jscomp$0.length-1]:null,nlines=to.line-from.line;change.full?(doc.insert(0,linesFor(0,text$jscomp$0.length)),doc.remove(text$jscomp$0.length,doc.size-text$jscomp$0.length)):isWholeLineUpdate(doc,change)?(to=linesFor(0,text$jscomp$0.length-1),update(lastLine,
lastLine.text,lastSpans),nlines&&doc.remove(from.line,nlines),to.length&&doc.insert(from.line,to)):firstLine==lastLine?1==text$jscomp$0.length?update(firstLine,firstLine.text.slice(0,from.ch)+lastText+firstLine.text.slice(to.ch),lastSpans):(nlines=linesFor(1,text$jscomp$0.length-1),nlines.push(new Line(lastText+firstLine.text.slice(to.ch),lastSpans,estimateHeight$$1)),update(firstLine,firstLine.text.slice(0,from.ch)+text$jscomp$0[0],markedSpans?markedSpans[0]:null),doc.insert(from.line+1,nlines)):
1==text$jscomp$0.length?(update(firstLine,firstLine.text.slice(0,from.ch)+text$jscomp$0[0]+lastLine.text.slice(to.ch),markedSpans?markedSpans[0]:null),doc.remove(from.line+1,nlines)):(update(firstLine,firstLine.text.slice(0,from.ch)+text$jscomp$0[0],markedSpans?markedSpans[0]:null),update(lastLine,lastText+lastLine.text.slice(to.ch),lastSpans),lastSpans=linesFor(1,text$jscomp$0.length-1),1<nlines&&doc.remove(from.line+1,nlines-1),doc.insert(from.line+1,lastSpans));signalLater(doc,"change",doc,change)}
function linkedDocs(doc$jscomp$0,f,sharedHistOnly){function propagate(doc,skip,sharedHist){if(doc.linked)for(var i=0;i<doc.linked.length;++i){var rel=doc.linked[i];if(rel.doc!=skip){var shared=sharedHist&&rel.sharedHist;if(!sharedHistOnly||shared)f(rel.doc,shared),propagate(rel.doc,doc,shared)}}}propagate(doc$jscomp$0,null,!0)}function attachDoc(cm,doc){if(doc.cm)throw Error("This document is already in use.");cm.doc=doc;doc.cm=cm;estimateLineHeights(cm);loadMode(cm);setDirectionClass(cm);cm.options.lineWrapping||
findMaxLine(cm);cm.options.mode=doc.modeOption;regChange(cm)}function setDirectionClass(cm){("rtl"==cm.doc.direction?addClass:rmClass)(cm.display.lineDiv,"CodeMirror-rtl")}function directionChanged(cm){runInOp(cm,function(){setDirectionClass(cm);regChange(cm)})}function History(startGen){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=startGen||1}function historyChangeFromChange(doc$jscomp$0,
change){var histChange={from:copyPos(change.from),to:changeEnd(change),text:getBetween(doc$jscomp$0,change.from,change.to)};attachLocalSpans(doc$jscomp$0,histChange,change.from.line,change.to.line+1);linkedDocs(doc$jscomp$0,function(doc){return attachLocalSpans(doc,histChange,change.from.line,change.to.line+1)},!0);return histChange}function clearSelectionEvents(array){for(;array.length;)if(lst(array).ranges)array.pop();else break}function addChangeToHistory(doc,change,selAfter,opId){var hist=doc.history;
hist.undone.length=0;var time=+new Date,JSCompiler_temp;if(JSCompiler_temp=hist.lastOp==opId||hist.lastOrigin==change.origin&&change.origin&&("+"==change.origin.charAt(0)&&hist.lastModTime>time-(doc.cm?doc.cm.options.historyEventDelay:500)||"*"==change.origin.charAt(0))){if(hist.lastOp==opId){clearSelectionEvents(hist.done);var cur=lst(hist.done)}else hist.done.length&&!lst(hist.done).ranges?cur=lst(hist.done):1<hist.done.length&&!hist.done[hist.done.length-2].ranges?(hist.done.pop(),cur=lst(hist.done)):
cur=void 0;JSCompiler_temp=cur}if(JSCompiler_temp){var last=lst(cur.changes);0==cmp(change.from,change.to)&&0==cmp(change.from,last.to)?last.to=changeEnd(change):cur.changes.push(historyChangeFromChange(doc,change))}else for((cur=lst(hist.done))&&cur.ranges||pushSelectionToHistory(doc.sel,hist.done),cur={changes:[historyChangeFromChange(doc,change)],generation:hist.generation},hist.done.push(cur);hist.done.length>hist.undoDepth;)hist.done.shift(),hist.done[0].ranges||hist.done.shift();hist.done.push(selAfter);
hist.generation=++hist.maxGeneration;hist.lastModTime=hist.lastSelTime=time;hist.lastOp=hist.lastSelOp=opId;hist.lastOrigin=hist.lastSelOrigin=change.origin;last||signal(doc,"historyAdded")}function pushSelectionToHistory(sel,dest){var top=lst(dest);top&&top.ranges&&top.equals(sel)||dest.push(sel)}function attachLocalSpans(doc,change,from,to){var existing=change["spans_"+doc.id],n=0;doc.iter(Math.max(doc.first,from),Math.min(doc.first+doc.size,to),function(line){line.markedSpans&&((existing||(existing=
change["spans_"+doc.id]={}))[n]=line.markedSpans);++n})}function removeClearedSpans(spans){if(!spans)return null;for(var out,i=0;i<spans.length;++i)spans[i].marker.explicitlyCleared?out||(out=spans.slice(0,i)):out&&out.push(spans[i]);return out?out.length?out:null:spans}function mergeOldSpans(doc,change){var old;if(old=change["spans_"+doc.id]){for(var nw=[],i=0;i<change.text.length;++i)nw.push(removeClearedSpans(old[i]));old=nw}else old=null;doc=stretchSpansOverChange(doc,change);if(!old)return doc;
if(!doc)return old;for(change=0;change<old.length;++change)if(nw=old[change],i=doc[change],nw&&i){var j=0;a:for(;j<i.length;++j){for(var span=i[j],k=0;k<nw.length;++k)if(nw[k].marker==span.marker)continue a;nw.push(span)}}else i&&(old[change]=i);return old}function copyHistoryArray(events,newGroup,instantiateSel){for(var copy=[],i=0;i<events.length;++i){var event=events[i];if(event.ranges)copy.push(instantiateSel?Selection.prototype.deepCopy.call(event):event);else{event=event.changes;var newChanges=
[];copy.push({changes:newChanges});for(var j=0;j<event.length;++j){var change=event[j],m;newChanges.push({from:change.from,to:change.to,text:change.text});if(newGroup)for(var prop in change)(m=prop.match(/^spans_(\d+)$/))&&-1<indexOf(newGroup,Number(m[1]))&&(lst(newChanges)[prop]=change[prop],delete change[prop])}}}return copy}function extendRange(range,head,other,extend){return extend?(range=range.anchor,other&&(extend=0>cmp(head,range),extend!=0>cmp(other,range)?(range=head,head=other):extend!=
0>cmp(head,other)&&(head=other)),new Range(range,head)):new Range(other||head,head)}function extendSelection(doc,head,other,options,extend){null==extend&&(extend=doc.cm&&(doc.cm.display.shift||doc.extend));setSelection(doc,new Selection([extendRange(doc.sel.primary(),head,other,extend)],0),options)}function extendSelections(doc,heads,options){for(var out=[],extend=doc.cm&&(doc.cm.display.shift||doc.extend),i=0;i<doc.sel.ranges.length;i++)out[i]=extendRange(doc.sel.ranges[i],heads[i],null,extend);
heads=normalizeSelection(out,doc.sel.primIndex);setSelection(doc,heads,options)}function replaceOneSelection(doc,i,range,options){var ranges=doc.sel.ranges.slice(0);ranges[i]=range;setSelection(doc,normalizeSelection(ranges,doc.sel.primIndex),options)}function filterSelectionChange(doc,sel,options){options={ranges:sel.ranges,update:function(ranges){this.ranges=[];for(var i=0;i<ranges.length;i++)this.ranges[i]=new Range(clipPos(doc,ranges[i].anchor),clipPos(doc,ranges[i].head))},origin:options&&options.origin};
signal(doc,"beforeSelectionChange",doc,options);doc.cm&&signal(doc.cm,"beforeSelectionChange",doc.cm,options);return options.ranges!=sel.ranges?normalizeSelection(options.ranges,options.ranges.length-1):sel}function setSelectionReplaceHistory(doc,sel,options){var done=doc.history.done,last=lst(done);last&&last.ranges?(done[done.length-1]=sel,setSelectionNoUndo(doc,sel,options)):setSelection(doc,sel,options)}function setSelection(doc,sel,options){setSelectionNoUndo(doc,sel,options);sel=doc.sel;var opId=
doc.cm?doc.cm.curOp.id:NaN,hist=doc.history,origin=options&&options.origin,JSCompiler_temp;if(!(JSCompiler_temp=opId==hist.lastSelOp)&&(JSCompiler_temp=origin&&hist.lastSelOrigin==origin)&&!(JSCompiler_temp=hist.lastModTime==hist.lastSelTime&&hist.lastOrigin==origin)){JSCompiler_temp=lst(hist.done);var ch=origin.charAt(0);JSCompiler_temp="*"==ch||"+"==ch&&JSCompiler_temp.ranges.length==sel.ranges.length&&JSCompiler_temp.somethingSelected()==sel.somethingSelected()&&new Date-doc.history.lastSelTime<=
(doc.cm?doc.cm.options.historyEventDelay:500)}JSCompiler_temp?hist.done[hist.done.length-1]=sel:pushSelectionToHistory(sel,hist.done);hist.lastSelTime=+new Date;hist.lastSelOrigin=origin;hist.lastSelOp=opId;options&&!1!==options.clearRedo&&clearSelectionEvents(hist.undone)}function setSelectionNoUndo(doc,sel,options){if(hasHandler(doc,"beforeSelectionChange")||doc.cm&&hasHandler(doc.cm,"beforeSelectionChange"))sel=filterSelectionChange(doc,sel,options);var bias=options&&options.bias||(0>cmp(sel.primary().head,
doc.sel.primary().head)?-1:1);setSelectionInner(doc,skipAtomicInSelection(doc,sel,bias,!0));options&&!1===options.scroll||!doc.cm||ensureCursorVisible(doc.cm)}function setSelectionInner(doc,sel){sel.equals(doc.sel)||(doc.sel=sel,doc.cm&&(doc.cm.curOp.updateInput=doc.cm.curOp.selectionChanged=!0,signalCursorActivity(doc.cm)),signalLater(doc,"cursorActivity",doc))}function reCheckSelection(doc){setSelectionInner(doc,skipAtomicInSelection(doc,doc.sel,null,!1))}function skipAtomicInSelection(doc,sel,
bias,mayClear){for(var out,i=0;i<sel.ranges.length;i++){var range=sel.ranges[i],old=sel.ranges.length==doc.sel.ranges.length&&doc.sel.ranges[i],newAnchor=skipAtomic(doc,range.anchor,old&&old.anchor,bias,mayClear);old=skipAtomic(doc,range.head,old&&old.head,bias,mayClear);if(out||newAnchor!=range.anchor||old!=range.head)out||(out=sel.ranges.slice(0,i)),out[i]=new Range(newAnchor,old)}return out?normalizeSelection(out,sel.primIndex):sel}function skipAtomicInner(doc,pos,oldPos,dir,mayClear){var line=
getLine(doc,pos.line);if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var sp=line.markedSpans[i],m=sp.marker;if((null==sp.from||(m.inclusiveLeft?sp.from<=pos.ch:sp.from<pos.ch))&&(null==sp.to||(m.inclusiveRight?sp.to>=pos.ch:sp.to>pos.ch))){if(mayClear&&(signal(m,"beforeCursorEnter"),m.explicitlyCleared))if(line.markedSpans){--i;continue}else break;if(m.atomic){if(oldPos){i=m.find(0>dir?1:-1);sp=void 0;if(0>dir?m.inclusiveRight:m.inclusiveLeft)i=movePos(doc,i,-dir,i&&i.line==pos.line?
line:null);if(i&&i.line==pos.line&&(sp=cmp(i,oldPos))&&(0>dir?0>sp:0<sp))return skipAtomicInner(doc,i,pos,dir,mayClear)}oldPos=m.find(0>dir?-1:1);if(0>dir?m.inclusiveLeft:m.inclusiveRight)oldPos=movePos(doc,oldPos,dir,oldPos.line==pos.line?line:null);return oldPos?skipAtomicInner(doc,oldPos,pos,dir,mayClear):null}}}return pos}function skipAtomic(doc,pos,oldPos,bias,mayClear){bias=bias||1;pos=skipAtomicInner(doc,pos,oldPos,bias,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,bias,!0)||skipAtomicInner(doc,
pos,oldPos,-bias,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,-bias,!0);return pos?pos:(doc.cantEdit=!0,Pos(doc.first,0))}function movePos(doc,pos,dir,line){return 0>dir&&0==pos.ch?pos.line>doc.first?clipPos(doc,Pos(pos.line-1)):null:0<dir&&pos.ch==(line||getLine(doc,pos.line)).text.length?pos.line<doc.first+doc.size-1?Pos(pos.line+1,0):null:new Pos(pos.line,pos.ch+dir)}function selectAll(cm){cm.setSelection(Pos(cm.firstLine(),0),Pos(cm.lastLine()),sel_dontScroll)}function filterChange(doc,
change,update){var obj={canceled:!1,from:change.from,to:change.to,text:change.text,origin:change.origin,cancel:function(){return obj.canceled=!0}};update&&(obj.update=function(from,to,text,origin){from&&(obj.from=clipPos(doc,from));to&&(obj.to=clipPos(doc,to));text&&(obj.text=text);void 0!==origin&&(obj.origin=origin)});signal(doc,"beforeChange",doc,obj);doc.cm&&signal(doc.cm,"beforeChange",doc.cm,obj);return obj.canceled?null:{from:obj.from,to:obj.to,text:obj.text,origin:obj.origin}}function makeChange(doc,
change,ignoreReadOnly){if(doc.cm){if(!doc.cm.curOp)return operation(doc.cm,makeChange)(doc,change,ignoreReadOnly);if(doc.cm.state.suppressEdits)return}if(hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange"))if(change=filterChange(doc,change,!0),!change)return;if(ignoreReadOnly=sawReadOnlySpans&&!ignoreReadOnly&&removeReadOnlyRanges(doc,change.from,change.to))for(var i=ignoreReadOnly.length-1;0<=i;--i)makeChangeInner(doc,{from:ignoreReadOnly[i].from,to:ignoreReadOnly[i].to,text:i?
[""]:change.text,origin:change.origin});else makeChangeInner(doc,change)}function makeChangeInner(doc$jscomp$0,change){if(1!=change.text.length||""!=change.text[0]||0!=cmp(change.from,change.to)){var selAfter=computeSelAfterChange(doc$jscomp$0,change);addChangeToHistory(doc$jscomp$0,change,selAfter,doc$jscomp$0.cm?doc$jscomp$0.cm.curOp.id:NaN);makeChangeSingleDoc(doc$jscomp$0,change,selAfter,stretchSpansOverChange(doc$jscomp$0,change));var rebased=[];linkedDocs(doc$jscomp$0,function(doc,sharedHist){sharedHist||
-1!=indexOf(rebased,doc.history)||(rebaseHist(doc.history,change),rebased.push(doc.history));makeChangeSingleDoc(doc,change,null,stretchSpansOverChange(doc,change))})}}function makeChangeFromHistory(doc$jscomp$0,type,allowSelectionOnly){var suppress=doc$jscomp$0.cm&&doc$jscomp$0.cm.state.suppressEdits;if(!suppress||allowSelectionOnly){for(var hist=doc$jscomp$0.history,event,selAfter=doc$jscomp$0.sel,source="undo"==type?hist.done:hist.undone,dest="undo"==type?hist.undone:hist.done,i$jscomp$0=0;i$jscomp$0<
source.length&&(event=source[i$jscomp$0],allowSelectionOnly?!event.ranges||event.equals(doc$jscomp$0.sel):event.ranges);i$jscomp$0++);if(i$jscomp$0!=source.length){for(hist.lastOrigin=hist.lastSelOrigin=null;;)if(event=source.pop(),event.ranges){pushSelectionToHistory(event,dest);if(allowSelectionOnly&&!event.equals(doc$jscomp$0.sel)){setSelection(doc$jscomp$0,event,{clearRedo:!1});return}selAfter=event}else{if(suppress){source.push(event);return}break}var antiChanges=[];pushSelectionToHistory(selAfter,
dest);dest.push({changes:antiChanges,generation:hist.generation});hist.generation=event.generation||++hist.maxGeneration;var filter=hasHandler(doc$jscomp$0,"beforeChange")||doc$jscomp$0.cm&&hasHandler(doc$jscomp$0.cm,"beforeChange");allowSelectionOnly=function(i){var change=event.changes[i];change.origin=type;if(filter&&!filterChange(doc$jscomp$0,change,!1))return source.length=0,{};antiChanges.push(historyChangeFromChange(doc$jscomp$0,change));var after=i?computeSelAfterChange(doc$jscomp$0,change):
lst(source);makeChangeSingleDoc(doc$jscomp$0,change,after,mergeOldSpans(doc$jscomp$0,change));!i&&doc$jscomp$0.cm&&doc$jscomp$0.cm.scrollIntoView({from:change.from,to:changeEnd(change)});var rebased=[];linkedDocs(doc$jscomp$0,function(doc,sharedHist){sharedHist||-1!=indexOf(rebased,doc.history)||(rebaseHist(doc.history,change),rebased.push(doc.history));makeChangeSingleDoc(doc,change,null,mergeOldSpans(doc,change))})};for(suppress=event.changes.length-1;0<=suppress;--suppress)if(hist=allowSelectionOnly(suppress))return hist.v}}}
function shiftDoc(doc,distance){if(0!=distance&&(doc.first+=distance,doc.sel=new Selection(map(doc.sel.ranges,function(range){return new Range(Pos(range.anchor.line+distance,range.anchor.ch),Pos(range.head.line+distance,range.head.ch))}),doc.sel.primIndex),doc.cm)){regChange(doc.cm,doc.first,doc.first-distance,distance);for(var d=doc.cm.display,l=d.viewFrom;l<d.viewTo;l++)regLineChange(doc.cm,l,"gutter")}}function makeChangeSingleDoc(doc,change,selAfter,spans){if(doc.cm&&!doc.cm.curOp)return operation(doc.cm,
makeChangeSingleDoc)(doc,change,selAfter,spans);if(change.to.line<doc.first)shiftDoc(doc,change.text.length-1-(change.to.line-change.from.line));else if(!(change.from.line>doc.lastLine())){if(change.from.line<doc.first){var shift=change.text.length-1-(doc.first-change.from.line);shiftDoc(doc,shift);change={from:Pos(doc.first,0),to:Pos(change.to.line+shift,change.to.ch),text:[lst(change.text)],origin:change.origin}}shift=doc.lastLine();change.to.line>shift&&(change={from:change.from,to:Pos(shift,getLine(doc,
shift).text.length),text:[change.text[0]],origin:change.origin});change.removed=getBetween(doc,change.from,change.to);selAfter||(selAfter=computeSelAfterChange(doc,change));doc.cm?makeChangeSingleDocInEditor(doc.cm,change,spans):updateDoc(doc,change,spans);setSelectionNoUndo(doc,selAfter,sel_dontScroll)}}function makeChangeSingleDocInEditor(cm,change,spans){var doc=cm.doc,display=cm.display,from=change.from,to=change.to,recomputeMaxLength=!1,checkWidthStart=from.line;cm.options.lineWrapping||(checkWidthStart=
lineNo(visualLine(getLine(doc,from.line))),doc.iter(checkWidthStart,to.line+1,function(line){if(line==display.maxLine)return recomputeMaxLength=!0}));-1<doc.sel.contains(change.from,change.to)&&signalCursorActivity(cm);updateDoc(doc,change,spans,estimateHeight(cm));cm.options.lineWrapping||(doc.iter(checkWidthStart,from.line+change.text.length,function(line){var len=lineLength(line);len>display.maxLineLength&&(display.maxLine=line,display.maxLineLength=len,display.maxLineChanged=!0,recomputeMaxLength=
!1)}),recomputeMaxLength&&(cm.curOp.updateMaxLine=!0));retreatFrontier(doc,from.line);startWorker(cm,400);spans=change.text.length-(to.line-from.line)-1;change.full?regChange(cm):from.line!=to.line||1!=change.text.length||isWholeLineUpdate(cm.doc,change)?regChange(cm,from.line,to.line+1,spans):regLineChange(cm,from.line,"text");spans=hasHandler(cm,"changes");if((doc=hasHandler(cm,"change"))||spans)change={from:from,to:to,text:change.text,removed:change.removed,origin:change.origin},doc&&signalLater(cm,
"change",cm,change),spans&&(cm.curOp.changeObjs||(cm.curOp.changeObjs=[])).push(change);cm.display.selForContextMenu=null}function replaceRange(doc,code,from,to,origin){to||(to=from);0>cmp(to,from)&&(to=[to,from],from=to[0],to=to[1]);"string"==typeof code&&(code=doc.splitLines(code));makeChange(doc,{from:from,to:to,text:code,origin:origin})}function rebaseHistSelSingle(pos,from,to,diff){to<pos.line?pos.line+=diff:from<pos.line&&(pos.line=from,pos.ch=0)}function rebaseHistArray(array,from,to,diff){for(var i=
0;i<array.length;++i){var sub=array[i],ok=!0;if(sub.ranges)for(sub.copied||(sub=array[i]=sub.deepCopy(),sub.copied=!0),ok=0;ok<sub.ranges.length;ok++)rebaseHistSelSingle(sub.ranges[ok].anchor,from,to,diff),rebaseHistSelSingle(sub.ranges[ok].head,from,to,diff);else{for(var j$1=0;j$1<sub.changes.length;++j$1){var cur=sub.changes[j$1];if(to<cur.from.line)cur.from=Pos(cur.from.line+diff,cur.from.ch),cur.to=Pos(cur.to.line+diff,cur.to.ch);else if(from<=cur.to.line){ok=!1;break}}ok||(array.splice(0,i+1),
i=0)}}}function rebaseHist(hist,change){var from=change.from.line,to=change.to.line;change=change.text.length-(to-from)-1;rebaseHistArray(hist.done,from,to,change);rebaseHistArray(hist.undone,from,to,change)}function changeLine(doc,handle,changeType,op){var no=handle,line=handle;"number"==typeof handle?line=getLine(doc,Math.max(doc.first,Math.min(handle,doc.first+doc.size-1))):no=lineNo(handle);if(null==no)return null;op(line,no)&&doc.cm&&regLineChange(doc.cm,no,changeType);return line}function LeafChunk(lines){this.lines=
lines;this.parent=null;for(var height=0,i=0;i<lines.length;++i)lines[i].parent=this,height+=lines[i].height;this.height=height}function BranchChunk(children){this.children=children;for(var size=0,height=0,i=0;i<children.length;++i){var ch=children[i];size+=ch.chunkSize();height+=ch.height;ch.parent=this}this.size=size;this.height=height;this.parent=null}function addLineWidget(doc,handle,node,options){var widget=new LineWidget(doc,node,options),cm=doc.cm;cm&&widget.noHScroll&&(cm.display.alignWidgets=
!0);changeLine(doc,handle,"widget",function(line){var widgets=line.widgets||(line.widgets=[]);null==widget.insertAt?widgets.push(widget):widgets.splice(Math.min(widgets.length-1,Math.max(0,widget.insertAt)),0,widget);widget.line=line;cm&&!lineIsHidden(doc,line)&&(widgets=heightAtLine(line)<doc.scrollTop,updateLineHeight(line,line.height+widgetHeight(widget)),widgets&&addToScrollTop(cm,widget.height),cm.curOp.forceUpdate=!0);return!0});cm&&signalLater(cm,"lineWidgetAdded",cm,widget,"number"==typeof handle?
handle:lineNo(handle));return widget}function markText(doc,from,to,options,type){if(options&&options.shared)return markTextShared(doc,from,to,options,type);if(doc.cm&&!doc.cm.curOp)return operation(doc.cm,markText)(doc,from,to,options,type);var marker=new TextMarker(doc,type);type=cmp(from,to);options&&copyObj(options,marker,!1);if(0<type||0==type&&!1!==marker.clearWhenEmpty)return marker;marker.replacedWith&&(marker.collapsed=!0,marker.widgetNode=eltP("span",[marker.replacedWith],"CodeMirror-widget"),
options.handleMouseEvents||marker.widgetNode.setAttribute("cm-ignore-events","true"),options.insertLeft&&(marker.widgetNode.insertLeft=!0));if(marker.collapsed){if(conflictingCollapsedRange(doc,from.line,from,to,marker)||from.line!=to.line&&conflictingCollapsedRange(doc,to.line,from,to,marker))throw Error("Inserting collapsed marker partially overlapping an existing one");sawCollapsedSpans=!0}marker.addToHistory&&addChangeToHistory(doc,{from:from,to:to,origin:"markText"},doc.sel,NaN);var curLine=
from.line,cm=doc.cm,updateMaxLine;doc.iter(curLine,to.line+1,function(line){cm&&marker.collapsed&&!cm.options.lineWrapping&&visualLine(line)==cm.display.maxLine&&(updateMaxLine=!0);marker.collapsed&&curLine!=from.line&&updateLineHeight(line,0);var span=new MarkedSpan(marker,curLine==from.line?from.ch:null,curLine==to.line?to.ch:null);line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span];span.marker.attachLine(line);++curLine});marker.collapsed&&doc.iter(from.line,to.line+1,function(line){lineIsHidden(doc,
line)&&updateLineHeight(line,0)});marker.clearOnEnter&&on(marker,"beforeCursorEnter",function(){return marker.clear()});marker.readOnly&&(sawReadOnlySpans=!0,(doc.history.done.length||doc.history.undone.length)&&doc.clearHistory());marker.collapsed&&(marker.id=++nextMarkerId,marker.atomic=!0);if(cm){updateMaxLine&&(cm.curOp.updateMaxLine=!0);if(marker.collapsed)regChange(cm,from.line,to.line+1);else if(marker.className||marker.title||marker.startStyle||marker.endStyle||marker.css)for(options=from.line;options<=
to.line;options++)regLineChange(cm,options,"text");marker.atomic&&reCheckSelection(cm.doc);signalLater(cm,"markerAdded",cm,marker)}return marker}function markTextShared(doc$jscomp$0,from,to,options,type){options=copyObj(options);options.shared=!1;var markers=[markText(doc$jscomp$0,from,to,options,type)],primary=markers[0],widget=options.widgetNode;linkedDocs(doc$jscomp$0,function(doc){widget&&(options.widgetNode=widget.cloneNode(!0));markers.push(markText(doc,clipPos(doc,from),clipPos(doc,to),options,
type));for(var i=0;i<doc.linked.length;++i)if(doc.linked[i].isParent)return;primary=lst(markers)});return new SharedTextMarker(markers,primary)}function findSharedMarkers(doc){return doc.findMarks(Pos(doc.first,0),doc.clipPos(Pos(doc.lastLine())),function(m){return m.parent})}function detachSharedMarkers(markers){for(var loop=function(i){i=markers[i];var linked=[i.primary.doc];linkedDocs(i.primary.doc,function(d){return linked.push(d)});for(var j=0;j<i.markers.length;j++){var subMarker=i.markers[j];
-1==indexOf(linked,subMarker.doc)&&(subMarker.parent=null,i.markers.splice(j--,1))}},i$jscomp$0=0;i$jscomp$0<markers.length;i$jscomp$0++)loop(i$jscomp$0)}function onDrop(e){var cm=this;clearDragCursor(cm);if(!signalDOMEvent(cm,e)&&!eventInWidget(cm.display,e)){e_preventDefault(e);ie&&(lastDrop=+new Date);var pos=posFromMouse(cm,e,!0),files=e.dataTransfer.files;if(pos&&!cm.isReadOnly())if(files&&files.length&&window.FileReader&&window.File)for(var n=files.length,text=Array(n),read=0,loadFile=function(file,
i){if(!cm.options.allowDropFileTypes||-1!=indexOf(cm.options.allowDropFileTypes,file.type)){var reader=new FileReader;reader.onload=operation(cm,function(){var content=reader.result;/[\x00-\x08\x0e-\x1f]{2}/.test(content)&&(content="");text[i]=content;++read==n&&(pos=clipPos(cm.doc,pos),content={from:pos,to:pos,text:cm.doc.splitLines(text.join(cm.doc.lineSeparator())),origin:"paste"},makeChange(cm.doc,content),setSelectionReplaceHistory(cm.doc,simpleSelection(pos,changeEnd(content))))});reader.readAsText(file)}},
i$jscomp$0=0;i$jscomp$0<n;++i$jscomp$0)loadFile(files[i$jscomp$0],i$jscomp$0);else if(cm.state.draggingText&&-1<cm.doc.sel.contains(pos))cm.state.draggingText(e),setTimeout(function(){return cm.display.input.focus()},20);else try{if(loadFile=e.dataTransfer.getData("Text")){cm.state.draggingText&&!cm.state.draggingText.copy&&(i$jscomp$0=cm.listSelections());setSelectionNoUndo(cm.doc,simpleSelection(pos,pos));if(i$jscomp$0)for(files=0;files<i$jscomp$0.length;++files)replaceRange(cm.doc,"",i$jscomp$0[files].anchor,
i$jscomp$0[files].head,"drag");cm.replaceSelection(loadFile,"around","paste");cm.display.input.focus()}}catch(e$11){}}}function clearDragCursor(cm){cm.display.dragCursor&&(cm.display.lineSpace.removeChild(cm.display.dragCursor),cm.display.dragCursor=null)}function forEachCodeMirror(f){if(document.getElementsByClassName)for(var byClass=document.getElementsByClassName("CodeMirror"),i=0;i<byClass.length;i++){var cm=byClass[i].CodeMirror;cm&&f(cm)}}function registerGlobalHandlers(){var resizeTimer;on(window,
"resize",function(){null==resizeTimer&&(resizeTimer=setTimeout(function(){resizeTimer=null;forEachCodeMirror(onResize)},100))});on(window,"blur",function(){return forEachCodeMirror(onBlur)})}function onResize(cm){var d=cm.display;if(d.lastWrapHeight!=d.wrapper.clientHeight||d.lastWrapWidth!=d.wrapper.clientWidth)d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,cm.setSize()}function normalizeKeyName(name){var parts=name.split(/-(?!$)/);name=parts[parts.length-1];for(var alt,
ctrl,shift,cmd,i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))cmd=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)?$/i.test(mod))shift=!0;else throw Error("Unrecognized modifier name: "+mod);}alt&&(name="Alt-"+name);ctrl&&(name="Ctrl-"+name);cmd&&(name="Cmd-"+name);shift&&(name="Shift-"+name);return name}function normalizeKeyMap(keymap){var copy={},keyname;for(keyname in keymap)if(keymap.hasOwnProperty(keyname)){var value=
keymap[keyname];if(!/^(name|fallthrough|(de|at)tach)$/.test(keyname)){if("..."!=value)for(var keys=map(keyname.split(" "),normalizeKeyName),i=0;i<keys.length;i++){if(i==keys.length-1){var name=keys.join(" ");var val=value}else name=keys.slice(0,i+1).join(" "),val="...";var prev=copy[name];if(!prev)copy[name]=val;else if(prev!=val)throw Error("Inconsistent bindings for "+name);}delete keymap[keyname]}}for(var prop in copy)keymap[prop]=copy[prop];return keymap}function lookupKey(key,map$$1,handle,context){map$$1=
getKeyMap(map$$1);var found=map$$1.call?map$$1.call(key,context):map$$1[key];if(!1===found)return"nothing";if("..."===found)return"multi";if(null!=found&&handle(found))return"handled";if(map$$1.fallthrough){if("[object Array]"!=Object.prototype.toString.call(map$$1.fallthrough))return lookupKey(key,map$$1.fallthrough,handle,context);for(found=0;found<map$$1.fallthrough.length;found++){var result=lookupKey(key,map$$1.fallthrough[found],handle,context);if(result)return result}}}function isModifierKey(value){value=
"string"==typeof value?value:keyNames[value.keyCode];return"Ctrl"==value||"Alt"==value||"Shift"==value||"Mod"==value}function addModifierNames(name,event,noShift){var base=name;event.altKey&&"Alt"!=base&&(name="Alt-"+name);(flipCtrlCmd?event.metaKey:event.ctrlKey)&&"Ctrl"!=base&&(name="Ctrl-"+name);(flipCtrlCmd?event.ctrlKey:event.metaKey)&&"Cmd"!=base&&(name="Cmd-"+name);!noShift&&event.shiftKey&&"Shift"!=base&&(name="Shift-"+name);return name}function keyName(event,noShift){if(presto&&34==event.keyCode&&
event["char"])return!1;var name=keyNames[event.keyCode];if(null==name||event.altGraphKey)return!1;3==event.keyCode&&event.code&&(name=event.code);return addModifierNames(name,event,noShift)}function getKeyMap(val){return"string"==typeof val?keyMap[val]:val}function deleteNearSelection(cm,compute){for(var ranges=cm.doc.sel.ranges,kill=[],i$jscomp$0=0;i$jscomp$0<ranges.length;i$jscomp$0++){for(var toKill=compute(ranges[i$jscomp$0]);kill.length&&0>=cmp(toKill.from,lst(kill).to);){var replaced=kill.pop();
if(0>cmp(replaced.from,toKill.from)){toKill.from=replaced.from;break}}kill.push(toKill)}runInOp(cm,function(){for(var i=kill.length-1;0<=i;i--)replaceRange(cm.doc,"",kill[i].from,kill[i].to,"+delete");ensureCursorVisible(cm)})}function moveCharLogically(line,ch,dir){ch=skipExtendingChars(line.text,ch+dir,dir);return 0>ch||ch>line.text.length?null:ch}function moveLogically(line,start,dir){line=moveCharLogically(line,start.ch,dir);return null==line?null:new Pos(start.line,line,0>dir?"after":"before")}
function endOfLine(visually,cm,lineObj,lineNo,dir){if(visually&&(visually=getOrder(lineObj,cm.doc.direction))){visually=0>dir?lst(visually):visually[0];var sticky=0>dir==(1==visually.level)?"after":"before";if(0<visually.level||"rtl"==cm.doc.direction){var prep=prepareMeasureForLine(cm,lineObj);var ch$jscomp$0=0>dir?lineObj.text.length-1:0;var targetTop=measureCharPrepared(cm,prep,ch$jscomp$0).top;ch$jscomp$0=findFirst(function(ch){return measureCharPrepared(cm,prep,ch).top==targetTop},0>dir==(1==
visually.level)?visually.from:visually.to-1,ch$jscomp$0);"before"==sticky&&(ch$jscomp$0=moveCharLogically(lineObj,ch$jscomp$0,1))}else ch$jscomp$0=0>dir?visually.to:visually.from;return new Pos(lineNo,ch$jscomp$0,sticky)}return new Pos(lineNo,0>dir?lineObj.text.length:0,0>dir?"before":"after")}function moveVisually(cm,line,start,dir$jscomp$0){var bidi=getOrder(line,cm.doc.direction);if(!bidi)return moveLogically(line,start,dir$jscomp$0);start.ch>=line.text.length?(start.ch=line.text.length,start.sticky=
"before"):0>=start.ch&&(start.ch=0,start.sticky="after");var partPos$jscomp$0=getBidiPartAt(bidi,start.ch,start.sticky),part$jscomp$0=bidi[partPos$jscomp$0];if("ltr"==cm.doc.direction&&0==part$jscomp$0.level%2&&(0<dir$jscomp$0?part$jscomp$0.to>start.ch:part$jscomp$0.from<start.ch))return moveLogically(line,start,dir$jscomp$0);var mv=function(pos,dir){return moveCharLogically(line,pos instanceof Pos?pos.ch:pos,dir)},prep,getWrappedLineExtent=function(ch){if(!cm.options.lineWrapping)return{begin:0,
end:line.text.length};prep=prep||prepareMeasureForLine(cm,line);return wrappedLineExtentChar(cm,line,prep,ch)},wrappedLineExtent$jscomp$0=getWrappedLineExtent("before"==start.sticky?mv(start,-1):start.ch);if("rtl"==cm.doc.direction||1==part$jscomp$0.level){var moveInStorageOrder$jscomp$2=1==part$jscomp$0.level==0>dir$jscomp$0,ch$jscomp$1=mv(start,moveInStorageOrder$jscomp$2?1:-1);if(null!=ch$jscomp$1&&(moveInStorageOrder$jscomp$2?ch$jscomp$1<=part$jscomp$0.to&&ch$jscomp$1<=wrappedLineExtent$jscomp$0.end:
ch$jscomp$1>=part$jscomp$0.from&&ch$jscomp$1>=wrappedLineExtent$jscomp$0.begin))return new Pos(start.line,ch$jscomp$1,moveInStorageOrder$jscomp$2?"before":"after")}part$jscomp$0=function(partPos,dir,wrappedLineExtent){for(var getRes=function(ch,moveInStorageOrder){return moveInStorageOrder?new Pos(start.line,mv(ch,1),"before"):new Pos(start.line,ch,"after")};0<=partPos&&partPos<bidi.length;partPos+=dir){var part=bidi[partPos],moveInStorageOrder$jscomp$0=0<dir==(1!=part.level),ch$jscomp$0=moveInStorageOrder$jscomp$0?
wrappedLineExtent.begin:mv(wrappedLineExtent.end,-1);if(part.from<=ch$jscomp$0&&ch$jscomp$0<part.to)return getRes(ch$jscomp$0,moveInStorageOrder$jscomp$0);ch$jscomp$0=moveInStorageOrder$jscomp$0?part.from:mv(part.to,-1);if(wrappedLineExtent.begin<=ch$jscomp$0&&ch$jscomp$0<wrappedLineExtent.end)return getRes(ch$jscomp$0,moveInStorageOrder$jscomp$0)}};if(partPos$jscomp$0=part$jscomp$0(partPos$jscomp$0+dir$jscomp$0,dir$jscomp$0,wrappedLineExtent$jscomp$0))return partPos$jscomp$0;wrappedLineExtent$jscomp$0=
0<dir$jscomp$0?wrappedLineExtent$jscomp$0.end:mv(wrappedLineExtent$jscomp$0.begin,-1);return null==wrappedLineExtent$jscomp$0||0<dir$jscomp$0&&wrappedLineExtent$jscomp$0==line.text.length||!(partPos$jscomp$0=part$jscomp$0(0<dir$jscomp$0?0:bidi.length-1,dir$jscomp$0,getWrappedLineExtent(wrappedLineExtent$jscomp$0)))?null:partPos$jscomp$0}function lineStart(cm,lineN){var line=getLine(cm.doc,lineN),visual=visualLine(line);visual!=line&&(lineN=lineNo(visual));return endOfLine(!0,cm,visual,lineN,1)}function lineStartSmart(cm,
pos){var start=lineStart(cm,pos.line),line=getLine(cm.doc,start.line);cm=getOrder(line,cm.doc.direction);return cm&&0!=cm[0].level?start:(line=Math.max(0,line.text.search(/\S/)),Pos(start.line,pos.line==start.line&&pos.ch<=line&&pos.ch?0:line,start.sticky))}function doHandleBinding(cm,bound,dropShift){if("string"==typeof bound&&(bound=commands[bound],!bound))return!1;cm.display.input.ensurePolled();var prevShift=cm.display.shift,done=!1;try{cm.isReadOnly()&&(cm.state.suppressEdits=!0),dropShift&&
(cm.display.shift=!1),done=bound(cm)!=Pass}finally{cm.display.shift=prevShift,cm.state.suppressEdits=!1}return done}function dispatchKey(cm,name,e,handle){var seq=cm.state.keySeq;if(seq){if(isModifierKey(name))return"handled";/'$/.test(name)?cm.state.keySeq=null:stopSeq.set(50,function(){cm.state.keySeq==seq&&(cm.state.keySeq=null,cm.display.input.reset())});if(dispatchKeyInner(cm,seq+" "+name,e,handle))return!0}return dispatchKeyInner(cm,name,e,handle)}function dispatchKeyInner(cm,name,e,handle){a:{for(var i=
0;i<cm.state.keyMaps.length;i++){var result=lookupKey(name,cm.state.keyMaps[i],handle,cm);if(result){handle=result;break a}}handle=cm.options.extraKeys&&lookupKey(name,cm.options.extraKeys,handle,cm)||lookupKey(name,cm.options.keyMap,handle,cm)}"multi"==handle&&(cm.state.keySeq=name);"handled"==handle&&signalLater(cm,"keyHandled",cm,name,e);if("handled"==handle||"multi"==handle)e_preventDefault(e),restartBlink(cm);return!!handle}function handleKeyBinding(cm,e){var name=keyName(e,!0);return name?e.shiftKey&&
!cm.state.keySeq?dispatchKey(cm,"Shift-"+name,e,function(b){return doHandleBinding(cm,b,!0)})||dispatchKey(cm,name,e,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return doHandleBinding(cm,b)}):dispatchKey(cm,name,e,function(b){return doHandleBinding(cm,b)}):!1}function handleCharBinding(cm,e,ch){return dispatchKey(cm,"'"+ch+"'",e,function(b){return doHandleBinding(cm,b,!0)})}function onKeyDown(e){this.curOp.focus=activeElt();if(!signalDOMEvent(this,e)){ie&&11>ie_version&&27==e.keyCode&&
(e.returnValue=!1);var code=e.keyCode;this.display.shift=16==code||e.shiftKey;var handled=handleKeyBinding(this,e);presto&&(lastStoppedKey=handled?code:null,!handled&&88==code&&!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=code||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||showCrossHair(this)}}function showCrossHair(cm){function up(e){18!=e.keyCode&&e.altKey||(rmClass(lineDiv,"CodeMirror-crosshair"),off(document,"keyup",up),off(document,"mouseover",
up))}var lineDiv=cm.display.lineDiv;addClass(lineDiv,"CodeMirror-crosshair");on(document,"keyup",up);on(document,"mouseover",up)}function onKeyUp(e){16==e.keyCode&&(this.doc.sel.shift=!1);signalDOMEvent(this,e)}function onKeyPress(e){if(!(eventInWidget(this.display,e)||signalDOMEvent(this,e)||e.ctrlKey&&!e.altKey||mac&&e.metaKey)){var keyCode=e.keyCode,charCode=e.charCode;if(presto&&keyCode==lastStoppedKey)lastStoppedKey=null,e_preventDefault(e);else if(!presto||e.which&&!(10>e.which)||!handleKeyBinding(this,
e))if(keyCode=String.fromCharCode(null==charCode?keyCode:charCode),"\b"!=keyCode&&!handleCharBinding(this,e,keyCode))this.display.input.onKeyPress(e)}}function clickRepeat(pos,button){var now=+new Date;if(lastDoubleClick&&lastDoubleClick.compare(now,pos,button))return lastClick=lastDoubleClick=null,"triple";if(lastClick&&lastClick.compare(now,pos,button))return lastDoubleClick=new PastClick(now,pos,button),lastClick=null,"double";lastClick=new PastClick(now,pos,button);lastDoubleClick=null;return"single"}
function onMouseDown(e){var display=this.display;if(!(signalDOMEvent(this,e)||display.activeTouch&&display.input.supportsTouch()))if(display.input.ensurePolled(),display.shift=e.shiftKey,eventInWidget(display,e))webkit||(display.scroller.draggable=!1,setTimeout(function(){return display.scroller.draggable=!0},100));else if(!gutterEvent(this,e,"gutterClick",!0)){var pos=posFromMouse(this,e),button=e_button(e),repeat=pos?clickRepeat(pos,button):"single";window.focus();1==button&&this.state.selectingText&&
this.state.selectingText(e);pos&&handleMappedButton(this,button,pos,repeat,e)||(1==button?pos?leftButtonDown(this,pos,repeat,e):(e.target||e.srcElement)==display.scroller&&e_preventDefault(e):2==button?(pos&&extendSelection(this.doc,pos),setTimeout(function(){return display.input.focus()},20)):3==button&&(captureRightClick?onContextMenu(this,e):delayBlurEvent(this)))}}function handleMappedButton(cm,button,pos,repeat,event){var name="Click";"double"==repeat?name="Double"+name:"triple"==repeat&&(name=
"Triple"+name);return dispatchKey(cm,addModifierNames((1==button?"Left":2==button?"Middle":"Right")+name,event),event,function(bound){"string"==typeof bound&&(bound=commands[bound]);if(!bound)return!1;var done=!1;try{cm.isReadOnly()&&(cm.state.suppressEdits=!0),done=bound(cm,pos)!=Pass}finally{cm.state.suppressEdits=!1}return done})}function leftButtonDown(cm,pos,repeat,event){ie?setTimeout(bind(ensureFocus,cm),0):cm.curOp.focus=activeElt();var option=cm.getOption("configureMouse");option=option?
option(cm,repeat,event):{};null==option.unit&&(option.unit=(chromeOS?event.shiftKey&&event.metaKey:event.altKey)?"rectangle":"single"==repeat?"char":"double"==repeat?"word":"line");if(null==option.extend||cm.doc.extend)option.extend=cm.doc.extend||event.shiftKey;null==option.addNew&&(option.addNew=mac?event.metaKey:event.ctrlKey);null==option.moveOnDrag&&(option.moveOnDrag=!(mac?event.altKey:event.ctrlKey));var sel=cm.doc.sel,contained;cm.options.dragDrop&&dragAndDrop&&!cm.isReadOnly()&&"single"==
repeat&&-1<(contained=sel.contains(pos))&&(0>cmp((contained=sel.ranges[contained]).from(),pos)||0<pos.xRel)&&(0<cmp(contained.to(),pos)||0>pos.xRel)?leftButtonStartDrag(cm,event,pos,option):leftButtonSelect(cm,event,pos,option)}function leftButtonStartDrag(cm,event,pos,behavior){var display=cm.display,moved=!1,dragEnd=operation(cm,function(e){webkit&&(display.scroller.draggable=!1);cm.state.draggingText=!1;off(display.wrapper.ownerDocument,"mouseup",dragEnd);off(display.wrapper.ownerDocument,"mousemove",
mouseMove);off(display.scroller,"dragstart",dragStart);off(display.scroller,"drop",dragEnd);moved||(e_preventDefault(e),behavior.addNew||extendSelection(cm.doc,pos,null,null,behavior.extend),webkit||ie&&9==ie_version?setTimeout(function(){display.wrapper.ownerDocument.body.focus();display.input.focus()},20):display.input.focus())}),mouseMove=function(e2){moved=moved||10<=Math.abs(event.clientX-e2.clientX)+Math.abs(event.clientY-e2.clientY)},dragStart=function(){return moved=!0};webkit&&(display.scroller.draggable=
!0);cm.state.draggingText=dragEnd;dragEnd.copy=!behavior.moveOnDrag;display.scroller.dragDrop&&display.scroller.dragDrop();on(display.wrapper.ownerDocument,"mouseup",dragEnd);on(display.wrapper.ownerDocument,"mousemove",mouseMove);on(display.scroller,"dragstart",dragStart);on(display.scroller,"drop",dragEnd);delayBlurEvent(cm);setTimeout(function(){return display.input.focus()},20)}function rangeForUnit(cm,pos,unit){if("char"==unit)return new Range(pos,pos);if("word"==unit)return cm.findWordAt(pos);
if("line"==unit)return new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0)));cm=unit(cm,pos);return new Range(cm.from,cm.to)}function leftButtonSelect(cm,event,start,behavior){function extendTo(pos){if(0!=cmp(lastPos,pos))if(lastPos=pos,"rectangle"==behavior.unit){var ranges=[],tabSize=cm.options.tabSize,startCol=countColumn(getLine(doc,start.line).text,start.ch,tabSize),posCol=countColumn(getLine(doc,pos.line).text,pos.ch,tabSize),left=Math.min(startCol,posCol);startCol=Math.max(startCol,
posCol);posCol=Math.min(start.line,pos.line);for(var end=Math.min(cm.lastLine(),Math.max(start.line,pos.line));posCol<=end;posCol++){var text=getLine(doc,posCol).text,leftPos=findColumn(text,left,tabSize);left==startCol?ranges.push(new Range(Pos(posCol,leftPos),Pos(posCol,leftPos))):text.length>leftPos&&ranges.push(new Range(Pos(posCol,leftPos),Pos(posCol,findColumn(text,startCol,tabSize))))}ranges.length||ranges.push(new Range(start,start));setSelection(doc,normalizeSelection(startSel.ranges.slice(0,
ourIndex).concat(ranges),ourIndex),{origin:"*mouse",scroll:!1});cm.scrollIntoView(pos)}else ranges=ourRange,left=rangeForUnit(cm,pos,behavior.unit),pos=ranges.anchor,0<cmp(left.anchor,pos)?(tabSize=left.head,pos=minPos(ranges.from(),left.anchor)):(tabSize=left.anchor,pos=maxPos(ranges.to(),left.head)),ranges=startSel.ranges.slice(0),ranges[ourIndex]=bidiSimplify(cm,new Range(clipPos(doc,pos),tabSize)),setSelection(doc,normalizeSelection(ranges,ourIndex),sel_mouse)}function extend(e){var curCount=
++counter,cur=posFromMouse(cm,e,!0,"rectangle"==behavior.unit);if(cur)if(0!=cmp(cur,lastPos)){cm.curOp.focus=activeElt();extendTo(cur);var visible=visibleLines(display,doc);(cur.line>=visible.to||cur.line<visible.from)&&setTimeout(operation(cm,function(){counter==curCount&&extend(e)}),150)}else{var outside=e.clientY<editorSize.top?-20:e.clientY>editorSize.bottom?20:0;outside&&setTimeout(operation(cm,function(){counter==curCount&&(display.scroller.scrollTop+=outside,extend(e))}),50)}}function done(e){cm.state.selectingText=
!1;counter=Infinity;e_preventDefault(e);display.input.focus();off(display.wrapper.ownerDocument,"mousemove",move);off(display.wrapper.ownerDocument,"mouseup",up);doc.history.lastSelOrigin=null}var display=cm.display,doc=cm.doc;e_preventDefault(event);var startSel=doc.sel,ranges$jscomp$0=startSel.ranges;if(behavior.addNew&&!behavior.extend){var ourIndex=doc.sel.contains(start);var ourRange=-1<ourIndex?ranges$jscomp$0[ourIndex]:new Range(start,start)}else ourRange=doc.sel.primary(),ourIndex=doc.sel.primIndex;
"rectangle"==behavior.unit?(behavior.addNew||(ourRange=new Range(start,start)),start=posFromMouse(cm,event,!0,!0),ourIndex=-1):(event=rangeForUnit(cm,start,behavior.unit),ourRange=behavior.extend?extendRange(ourRange,event.anchor,event.head,behavior.extend):event);behavior.addNew?-1==ourIndex?(ourIndex=ranges$jscomp$0.length,setSelection(doc,normalizeSelection(ranges$jscomp$0.concat([ourRange]),ourIndex),{scroll:!1,origin:"*mouse"})):1<ranges$jscomp$0.length&&ranges$jscomp$0[ourIndex].empty()&&"char"==
behavior.unit&&!behavior.extend?(setSelection(doc,normalizeSelection(ranges$jscomp$0.slice(0,ourIndex).concat(ranges$jscomp$0.slice(ourIndex+1)),0),{scroll:!1,origin:"*mouse"}),startSel=doc.sel):replaceOneSelection(doc,ourIndex,ourRange,sel_mouse):(ourIndex=0,setSelection(doc,new Selection([ourRange],0),sel_mouse),startSel=doc.sel);var lastPos=start,editorSize=display.wrapper.getBoundingClientRect(),counter=0,move=operation(cm,function(e){e_button(e)?extend(e):done(e)}),up=operation(cm,done);cm.state.selectingText=
up;on(display.wrapper.ownerDocument,"mousemove",move);on(display.wrapper.ownerDocument,"mouseup",up)}function bidiSimplify(cm,range$$1){var anchor=range$$1.anchor,head=range$$1.head,anchorLine=getLine(cm.doc,anchor.line);if(0==cmp(anchor,head)&&anchor.sticky==head.sticky)return range$$1;anchorLine=getOrder(anchorLine);if(!anchorLine)return range$$1;var index=getBidiPartAt(anchorLine,anchor.ch,anchor.sticky),part=anchorLine[index];if(part.from!=anchor.ch&&part.to!=anchor.ch)return range$$1;var boundary=
index+(part.from==anchor.ch==(1!=part.level)?0:1);if(0==boundary||boundary==anchorLine.length)return range$$1;head.line!=anchor.line?cm=0<(head.line-anchor.line)*("ltr"==cm.doc.direction?1:-1):(cm=getBidiPartAt(anchorLine,head.ch,head.sticky),index=cm-index||(head.ch-anchor.ch)*(1==part.level?-1:1),cm=cm==boundary-1||cm==boundary?0>index:0<index);anchorLine=anchorLine[boundary+(cm?-1:0)];anchorLine=(boundary=cm==(1==anchorLine.level))?anchorLine.from:anchorLine.to;boundary=boundary?"after":"before";
return anchor.ch==anchorLine&&anchor.sticky==boundary?range$$1:new Range(new Pos(anchor.line,anchorLine,boundary),head)}function gutterEvent(cm,e,type,prevent){if(e.touches){var mX=e.touches[0].clientX;var mY=e.touches[0].clientY}else try{mX=e.clientX,mY=e.clientY}catch(e$12){return!1}if(mX>=Math.floor(cm.display.gutters.getBoundingClientRect().right))return!1;prevent&&e_preventDefault(e);prevent=cm.display;var lineBox=prevent.lineDiv.getBoundingClientRect();if(mY>lineBox.bottom||!hasHandler(cm,type))return e_defaultPrevented(e);
mY-=lineBox.top-prevent.viewOffset;for(lineBox=0;lineBox<cm.options.gutters.length;++lineBox){var g=prevent.gutters.childNodes[lineBox];if(g&&g.getBoundingClientRect().right>=mX)return mX=lineAtHeight(cm.doc,mY),signal(cm,type,cm,mX,cm.options.gutters[lineBox],e),e_defaultPrevented(e)}}function onContextMenu(cm,e){var JSCompiler_temp;(JSCompiler_temp=eventInWidget(cm.display,e))||(JSCompiler_temp=hasHandler(cm,"gutterContextMenu")?gutterEvent(cm,e,"gutterContextMenu",!1):!1);if(!JSCompiler_temp&&
!signalDOMEvent(cm,e,"contextmenu"))cm.display.input.onContextMenu(e)}function themeChanged(cm){cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+cm.options.theme.replace(/(^|\s)\s*/g," cm-s-");clearCaches(cm)}function guttersChanged(cm){updateGutters(cm);regChange(cm);alignHorizontally(cm)}function dragDropChanged(cm,value,old){!value!=!(old&&old!=Init)&&(old=cm.display.dragFunctions,value=value?on:off,value(cm.display.scroller,"dragstart",old.start),value(cm.display.scroller,
"dragenter",old.enter),value(cm.display.scroller,"dragover",old.over),value(cm.display.scroller,"dragleave",old.leave),value(cm.display.scroller,"drop",old.drop))}function wrappingChanged(cm){cm.options.lineWrapping?(addClass(cm.display.wrapper,"CodeMirror-wrap"),cm.display.sizer.style.minWidth="",cm.display.sizerWidth=null):(rmClass(cm.display.wrapper,"CodeMirror-wrap"),findMaxLine(cm));estimateLineHeights(cm);regChange(cm);clearCaches(cm);setTimeout(function(){return updateScrollbars(cm)},100)}
function CodeMirror$1(place,options){var this$1=this;if(!(this instanceof CodeMirror$1))return new CodeMirror$1(place,options);this.options=options=options?copyObj(options):{};copyObj(defaults,options,!1);setGuttersForLineNumbers(options);var doc=options.value;"string"==typeof doc&&(doc=new Doc(doc,options.mode,null,options.lineSeparator,options.direction));this.doc=doc;var input=new CodeMirror$1.inputStyles[options.inputStyle](this);place=this.display=new Display(place,doc,input);place.wrapper.CodeMirror=
this;updateGutters(this);themeChanged(this);options.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");initScrollbars(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Delayed,keySeq:null,specialChars:null};options.autofocus&&!mobile&&place.input.focus();ie&&11>ie_version&&setTimeout(function(){return this$1.display.input.reset(!0)},20);registerEventHandlers(this);
globalsRegistered||(registerGlobalHandlers(),globalsRegistered=!0);startOperation(this);this.curOp.forceUpdate=!0;attachDoc(this,doc);options.autofocus&&!mobile||this.hasFocus()?setTimeout(bind(onFocus,this),20):onBlur(this);for(var opt in optionHandlers)if(optionHandlers.hasOwnProperty(opt))optionHandlers[opt](this$1,options[opt],Init);maybeUpdateLineNumberWidth(this);options.finishInit&&options.finishInit(this);for(doc=0;doc<initHooks.length;++doc)initHooks[doc](this$1);endOperation(this);webkit&&
options.lineWrapping&&"optimizelegibility"==getComputedStyle(place.lineDiv).textRendering&&(place.lineDiv.style.textRendering="auto")}function registerEventHandlers(cm){function finishTouch(){d.activeTouch&&(touchFinished=setTimeout(function(){return d.activeTouch=null},1E3),prevTouch=d.activeTouch,prevTouch.end=+new Date)}function farAway(touch,other){if(null==other.left)return!0;var dx=other.left-touch.left;touch=other.top-touch.top;return 400<dx*dx+touch*touch}var d=cm.display;on(d.scroller,"mousedown",
operation(cm,onMouseDown));ie&&11>ie_version?on(d.scroller,"dblclick",operation(cm,function(e){if(!signalDOMEvent(cm,e)){var pos=posFromMouse(cm,e);!pos||gutterEvent(cm,e,"gutterClick",!0)||eventInWidget(cm.display,e)||(e_preventDefault(e),e=cm.findWordAt(pos),extendSelection(cm.doc,e.anchor,e.head))}})):on(d.scroller,"dblclick",function(e){return signalDOMEvent(cm,e)||e_preventDefault(e)});captureRightClick||on(d.scroller,"contextmenu",function(e){return onContextMenu(cm,e)});var touchFinished,prevTouch=
{end:0};on(d.scroller,"touchstart",function(e){var JSCompiler_temp;if(JSCompiler_temp=!signalDOMEvent(cm,e))1!=e.touches.length?JSCompiler_temp=!1:(JSCompiler_temp=e.touches[0],JSCompiler_temp=1>=JSCompiler_temp.radiusX&&1>=JSCompiler_temp.radiusY),JSCompiler_temp=!JSCompiler_temp;JSCompiler_temp&&!gutterEvent(cm,e,"gutterClick",!0)&&(d.input.ensurePolled(),clearTimeout(touchFinished),JSCompiler_temp=+new Date,d.activeTouch={start:JSCompiler_temp,moved:!1,prev:300>=JSCompiler_temp-prevTouch.end?prevTouch:
null},1==e.touches.length&&(d.activeTouch.left=e.touches[0].pageX,d.activeTouch.top=e.touches[0].pageY))});on(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)});on(d.scroller,"touchend",function(e){var touch=d.activeTouch;if(touch&&!eventInWidget(d,e)&&null!=touch.left&&!touch.moved&&300>new Date-touch.start){var pos=cm.coordsChar(d.activeTouch,"page");touch=!touch.prev||farAway(touch,touch.prev)?new Range(pos,pos):!touch.prev.prev||farAway(touch,touch.prev.prev)?cm.findWordAt(pos):
new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0)));cm.setSelection(touch.anchor,touch.head);cm.focus();e_preventDefault(e)}finishTouch()});on(d.scroller,"touchcancel",finishTouch);on(d.scroller,"scroll",function(){d.scroller.clientHeight&&(updateScrollTop(cm,d.scroller.scrollTop),setScrollLeft(cm,d.scroller.scrollLeft,!0),signal(cm,"scroll",cm))});on(d.scroller,"mousewheel",function(e){return onScrollWheel(cm,e)});on(d.scroller,"DOMMouseScroll",function(e){return onScrollWheel(cm,e)});on(d.wrapper,
"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={enter:function(e){signalDOMEvent(cm,e)||e_stop(e)},over:function(e){if(!signalDOMEvent(cm,e)){var pos=posFromMouse(cm,e);if(pos){var frag=document.createDocumentFragment();drawSelectionCursor(cm,pos,frag);cm.display.dragCursor||(cm.display.dragCursor=elt$jscomp$0("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),cm.display.lineSpace.insertBefore(cm.display.dragCursor,cm.display.cursorDiv));removeChildrenAndAdd(cm.display.dragCursor,
frag)}e_stop(e)}},start:function(e){if(ie&&(!cm.state.draggingText||100>+new Date-lastDrop))e_stop(e);else if(!signalDOMEvent(cm,e)&&!eventInWidget(cm.display,e)&&(e.dataTransfer.setData("Text",cm.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!safari)){var img=elt$jscomp$0("img",null,null,"position: fixed; left: 0; top: 0;");img.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d";presto&&(img.width=img.height=1,cm.display.wrapper.appendChild(img),
img._top=img.offsetTop);e.dataTransfer.setDragImage(img,0,0);presto&&img.parentNode.removeChild(img)}},drop:operation(cm,onDrop),leave:function(e){signalDOMEvent(cm,e)||clearDragCursor(cm)}};var inp=d.input.getField();on(inp,"keyup",function(e){return onKeyUp.call(cm,e)});on(inp,"keydown",operation(cm,onKeyDown));on(inp,"keypress",operation(cm,onKeyPress));on(inp,"focus",function(e){return onFocus(cm,e)});on(inp,"blur",function(e){return onBlur(cm,e)})}function indentLine(cm,n,how,aggressive){var doc=
cm.doc,state;null==how&&(how="add");"smart"==how&&(doc.mode.indent?state=getContextBefore(cm,n).state:how="prev");var tabSize=cm.options.tabSize,line=getLine(doc,n),curSpace=countColumn(line.text,null,tabSize);line.stateAfter&&(line.stateAfter=null);var curSpaceString=line.text.match(/^\s*/)[0];if(!aggressive&&!/\S/.test(line.text)){var indentation=0;how="not"}else if("smart"==how&&(indentation=doc.mode.indent(state,line.text.slice(curSpaceString.length),line.text),indentation==Pass||150<indentation)){if(!aggressive)return;
how="prev"}"prev"==how?indentation=n>doc.first?countColumn(getLine(doc,n-1).text,null,tabSize):0:"add"==how?indentation=curSpace+cm.options.indentUnit:"subtract"==how?indentation=curSpace-cm.options.indentUnit:"number"==typeof how&&(indentation=curSpace+how);indentation=Math.max(0,indentation);how="";aggressive=0;if(cm.options.indentWithTabs)for(cm=Math.floor(indentation/tabSize);cm;--cm)aggressive+=tabSize,how+="\t";aggressive<indentation&&(how+=spaceStr(indentation-aggressive));if(how!=curSpaceString)return replaceRange(doc,
how,Pos(n,0),Pos(n,curSpaceString.length),"+input"),line.stateAfter=null,!0;for(tabSize=0;tabSize<doc.sel.ranges.length;tabSize++)if(line=doc.sel.ranges[tabSize],line.head.line==n&&line.head.ch<curSpaceString.length){n=Pos(n,curSpaceString.length);replaceOneSelection(doc,tabSize,new Range(n,n));break}}function applyTextInput(cm,inserted,deleted,sel,origin){var doc=cm.doc;cm.display.shift=!1;sel||(sel=doc.sel);var paste=cm.state.pasteIncoming||"paste"==origin,textLines=splitLinesAuto(inserted),multiPaste=
null;if(paste&&1<sel.ranges.length)if(lastCopied&&lastCopied.text.join("\n")==inserted){if(0==sel.ranges.length%lastCopied.text.length){multiPaste=[];for(var i=0;i<lastCopied.text.length;i++)multiPaste.push(doc.splitLines(lastCopied.text[i]))}}else textLines.length==sel.ranges.length&&cm.options.pasteLinesPerSelection&&(multiPaste=map(textLines,function(l){return[l]}));for(i=sel.ranges.length-1;0<=i;i--){var updateInput=sel.ranges[i];var from=updateInput.from(),to=updateInput.to();updateInput.empty()&&
(deleted&&0<deleted?from=Pos(from.line,from.ch-deleted):cm.state.overwrite&&!paste?to=Pos(to.line,Math.min(getLine(doc,to.line).text.length,to.ch+lst(textLines).length)):lastCopied&&lastCopied.lineWise&&lastCopied.text.join("\n")==inserted&&(from=to=Pos(from.line,0)));updateInput=cm.curOp.updateInput;from={from:from,to:to,text:multiPaste?multiPaste[i%multiPaste.length]:textLines,origin:origin||(paste?"paste":cm.state.cutIncoming?"cut":"+input")};makeChange(cm.doc,from);signalLater(cm,"inputRead",
cm,from)}inserted&&!paste&&triggerElectric(cm,inserted);ensureCursorVisible(cm);cm.curOp.updateInput=updateInput;cm.curOp.typing=!0;cm.state.pasteIncoming=cm.state.cutIncoming=!1}function handlePaste(e,cm){var pasted=e.clipboardData&&e.clipboardData.getData("Text");if(pasted)return e.preventDefault(),cm.isReadOnly()||cm.options.disableInput||runInOp(cm,function(){return applyTextInput(cm,pasted,0,null,"paste")}),!0}function triggerElectric(cm,inserted){if(cm.options.electricChars&&cm.options.smartIndent)for(var sel=
cm.doc.sel,i=sel.ranges.length-1;0<=i;i--){var range$$1=sel.ranges[i];if(!(100<range$$1.head.ch||i&&sel.ranges[i-1].head.line==range$$1.head.line)){var mode=cm.getModeAt(range$$1.head),indented=!1;if(mode.electricChars)for(var j=0;j<mode.electricChars.length;j++){if(-1<inserted.indexOf(mode.electricChars.charAt(j))){indented=indentLine(cm,range$$1.head.line,"smart");break}}else mode.electricInput&&mode.electricInput.test(getLine(cm.doc,range$$1.head.line).text.slice(0,range$$1.head.ch))&&(indented=
indentLine(cm,range$$1.head.line,"smart"));indented&&signalLater(cm,"electricInput",cm,range$$1.head.line)}}}function copyableRanges(cm){for(var text=[],ranges=[],i=0;i<cm.doc.sel.ranges.length;i++){var line=cm.doc.sel.ranges[i].head.line;line={anchor:Pos(line,0),head:Pos(line+1,0)};ranges.push(line);text.push(cm.getRange(line.anchor,line.head))}return{text:text,ranges:ranges}}function disableBrowserMagic(field,spellcheck){field.setAttribute("autocorrect","off");field.setAttribute("autocapitalize",
"off");field.setAttribute("spellcheck",!!spellcheck)}function hiddenTextarea(){var te=elt$jscomp$0("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),div=elt$jscomp$0("div",[te],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");webkit?te.style.width="1000px":te.setAttribute("wrap","off");ios&&(te.style.border="1px solid black");disableBrowserMagic(te);return div}function findPosH(doc,pos,dir,unit,visually){function moveOnce(boundToLine){var next=
visually?moveVisually(doc.cm,lineObj,pos,dir):moveLogically(lineObj,pos,dir);if(null==next){if(boundToLine=!boundToLine)boundToLine=pos.line+dir,boundToLine<doc.first||boundToLine>=doc.first+doc.size?boundToLine=!1:(pos=new Pos(boundToLine,pos.ch,pos.sticky),boundToLine=lineObj=getLine(doc,boundToLine));if(boundToLine)pos=endOfLine(visually,doc.cm,lineObj,pos.line,dir);else return!1}else pos=next;return!0}var oldPos=pos,origDir=dir,lineObj=getLine(doc,pos.line);if("char"==unit)moveOnce();else if("column"==
unit)moveOnce(!0);else if("word"==unit||"group"==unit){var sawType=null;unit="group"==unit;for(var helper=doc.cm&&doc.cm.getHelper(pos,"wordChars"),first=!0;!(0>dir)||moveOnce(!first);first=!1){var cur=lineObj.text.charAt(pos.ch)||"\n";cur=isWordChar(cur,helper)?"w":unit&&"\n"==cur?"n":!unit||/\s/.test(cur)?null:"p";!unit||first||cur||(cur="s");if(sawType&&sawType!=cur){0>dir&&(dir=1,moveOnce(),pos.sticky="after");break}cur&&(sawType=cur);if(0<dir&&!moveOnce(!first))break}}origDir=skipAtomic(doc,
pos,oldPos,origDir,!0);equalCursorPos(oldPos,origDir)&&(origDir.hitSide=!0);return origDir}function findPosV(cm,pos,dir,unit){var doc=cm.doc,x=pos.left;if("page"==unit){var y=Math.max(Math.min(cm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-.5*textHeight(cm.display),3);y=(0<dir?pos.bottom:pos.top)+dir*y}else"line"==unit&&(y=0<dir?pos.bottom+3:pos.top-3);for(;;){pos=coordsChar(cm,x,y);if(!pos.outside)break;if(0>dir?0>=y:y>=doc.height){pos.hitSide=!0;break}y+=
5*dir}return pos}function posToDOM(cm,pos){var view=findViewForLine(cm,pos.line);if(!view||view.hidden)return null;var line=getLine(cm.doc,pos.line);view=mapFromLineView(view,line,pos.line);cm=getOrder(line,cm.doc.direction);line="left";cm&&(line=getBidiPartAt(cm,pos.ch)%2?"right":"left");pos=nodeAndOffsetInLineMap(view.map,pos.ch,line);pos.offset="right"==pos.collapse?pos.end:pos.start;return pos}function isInGutter(node){for(;node;node=node.parentNode)if(/CodeMirror-gutter-wrapper/.test(node.className))return!0;
return!1}function badPos(pos,bad){bad&&(pos.bad=!0);return pos}function domTextBetween(cm,from,to,fromLine,toLine){function recognizeMarker(id){return function(marker){return marker.id==id}}function addText(str){str&&(closing&&(text+=lineSep,closing=!1),text+=str)}function walk(node){if(1==node.nodeType){var cmText=node.getAttribute("cm-text");if(null!=cmText)addText(cmText||node.textContent.replace(/\u200b/g,""));else{cmText=node.getAttribute("cm-marker");var range$$1;if(cmText)node=cm.findMarks(Pos(fromLine,
0),Pos(toLine+1,0),recognizeMarker(+cmText)),node.length&&(range$$1=node[0].find(0))&&addText(getBetween(cm.doc,range$$1.from,range$$1.to).join(lineSep));else if("false"!=node.getAttribute("contenteditable")){(range$$1=/^(pre|div|p)$/i.test(node.nodeName))&&closing&&(text+=lineSep,closing=!1);for(cmText=0;cmText<node.childNodes.length;cmText++)walk(node.childNodes[cmText]);range$$1&&(closing=!0)}}}else 3==node.nodeType&&addText(node.nodeValue)}for(var text="",closing=!1,lineSep=cm.doc.lineSeparator();;){walk(from);
if(from==to)break;from=from.nextSibling}return text}function domToPos(cm,node,offset){if(node==cm.display.lineDiv){var lineNode=cm.display.lineDiv.childNodes[offset];if(!lineNode)return badPos(cm.clipPos(Pos(cm.display.viewTo-1)),!0);node=null;offset=0}else for(lineNode=node;;lineNode=lineNode.parentNode){if(!lineNode||lineNode==cm.display.lineDiv)return null;if(lineNode.parentNode&&lineNode.parentNode==cm.display.lineDiv)break}for(var i=0;i<cm.display.view.length;i++){var lineView=cm.display.view[i];
if(lineView.node==lineNode)return locateNodeInLineView(lineView,node,offset)}}function locateNodeInLineView(lineView,node,offset$jscomp$0){function find(textNode,topNode,offset){for(var i=-1;i<(maps?maps.length:0);i++)for(var map$$1=0>i?measure.map:maps[i],j=0;j<map$$1.length;j+=3){var curNode=map$$1[j+2];if(curNode==textNode||curNode==topNode){topNode=lineNo(0>i?lineView.line:lineView.rest[i]);i=map$$1[j]+offset;if(0>offset||curNode!=textNode)i=map$$1[j+(offset?1:0)];return Pos(topNode,i)}}}var wrapper=
lineView.text.firstChild,bad=!1;if(!node||!contains(wrapper,node))return badPos(Pos(lineNo(lineView.line),0),!0);if(node==wrapper&&(bad=!0,node=wrapper.childNodes[offset$jscomp$0],offset$jscomp$0=0,!node))return offset$jscomp$0=lineView.rest?lst(lineView.rest):lineView.line,badPos(Pos(lineNo(offset$jscomp$0),offset$jscomp$0.text.length),bad);var textNode$jscomp$0=3==node.nodeType?node:null,topNode=node;textNode$jscomp$0||1!=node.childNodes.length||3!=node.firstChild.nodeType||(textNode$jscomp$0=node.firstChild,
offset$jscomp$0&&(offset$jscomp$0=textNode$jscomp$0.nodeValue.length));for(;topNode.parentNode!=wrapper;)topNode=topNode.parentNode;var measure=lineView.measure,maps=measure.maps;if(node=find(textNode$jscomp$0,topNode,offset$jscomp$0))return badPos(node,bad);wrapper=topNode.nextSibling;for(textNode$jscomp$0=textNode$jscomp$0?textNode$jscomp$0.nodeValue.length-offset$jscomp$0:0;wrapper;wrapper=wrapper.nextSibling){if(node=find(wrapper,wrapper.firstChild,0))return badPos(Pos(node.line,node.ch-textNode$jscomp$0),
bad);textNode$jscomp$0+=wrapper.textContent.length}for(topNode=topNode.previousSibling;topNode;topNode=topNode.previousSibling){if(node=find(topNode,topNode.firstChild,-1))return badPos(Pos(node.line,node.ch+offset$jscomp$0),bad);offset$jscomp$0+=topNode.textContent.length}}var userAgent=navigator.userAgent,platform=navigator.platform,gecko=/gecko\/\d/i.test(userAgent),ie_upto10=/MSIE \d/.test(userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent),edge=/Edge\/(\d+)/.exec(userAgent),
ie=ie_upto10||ie_11up||edge,ie_version=ie&&(ie_upto10?document.documentMode||6:+(edge||ie_11up)[1]),webkit=!edge&&/WebKit\//.test(userAgent),qtwebkit=webkit&&/Qt\/\d+\.\d+/.test(userAgent),chrome=!edge&&/Chrome\//.test(userAgent),presto=/Opera\//.test(userAgent),safari=/Apple Computer/.test(navigator.vendor),mac_geMountainLion=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent),phantom=/PhantomJS/.test(userAgent),ios=!edge&&/AppleWebKit/.test(userAgent)&&/Mobile\/\w+/.test(userAgent),android=/Android/.test(userAgent),
mobile=ios||android||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent),mac=ios||/Mac/.test(platform),chromeOS=/\bCrOS\b/.test(userAgent),windows=/win/i.test(platform),presto_version=presto&&userAgent.match(/Version\/(\d*\.\d*)/);presto_version&&(presto_version=Number(presto_version[1]));presto_version&&15<=presto_version&&(presto=!1,webkit=!0);var flipCtrlCmd=mac&&(qtwebkit||presto&&(null==presto_version||12.11>presto_version)),captureRightClick=gecko||ie&&9<=ie_version,rmClass=function(node,
cls){var current=node.className;if(cls=classTest(cls).exec(current)){var after=current.slice(cls.index+cls[0].length);node.className=current.slice(0,cls.index)+(after?cls[1]+after:"")}};var range$jscomp$0=document.createRange?function(node,start,end,endNode){var r=document.createRange();r.setEnd(endNode||node,end);r.setStart(node,start);return r}:function(node,start,end){var r=document.body.createTextRange();try{r.moveToElementText(node.parentNode)}catch(e){return r}r.collapse(!0);r.moveEnd("character",
end);r.moveStart("character",start);return r};var selectInput=function(node){node.select()};ios?selectInput=function(node){node.selectionStart=0;node.selectionEnd=node.value.length}:ie&&(selectInput=function(node){try{node.select()}catch(_e){}});var Delayed=function(){this.id=null};Delayed.prototype.set=function(ms,f){clearTimeout(this.id);this.id=setTimeout(f,ms)};var Pass={toString:function(){return"CodeMirror.Pass"}},sel_dontScroll={scroll:!1},sel_mouse={origin:"*mouse"},sel_move={origin:"+move"},
spaceStrs=[""],nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
sawReadOnlySpans=!1,sawCollapsedSpans=!1,bidiOther=null,bidiOrdering=function(){function charType(code){return 247>=code?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(code):1424<=code&&1524>=code?"R":1536<=code&&1785>=code?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(code-
1536):1774<=code&&2220>=code?"r":8192<=code&&8203>=code?"w":8204==code?"b":"L"}function BidiSpan(level,from,to){this.level=level;this.from=from;this.to=to}var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,isNeutral=/[stwN]/,isStrong=/[LRr]/,countsAsLeft=/[Lb1n]/,countsAsNum=/[1n]/;return function(str,direction){var outerType="ltr"==direction?"L":"R";if(0==str.length||"ltr"==direction&&!bidiRE.test(str))return!1;for(var len=str.length,types=[],i=0;i<len;++i)types.push(charType(str.charCodeAt(i)));
i=0;for(var prev=outerType;i<len;++i){var type=types[i];"m"==type?types[i]=prev:prev=type}i=0;for(prev=outerType;i<len;++i)type=types[i],"1"==type&&"r"==prev?types[i]="n":isStrong.test(type)&&(prev=type,"r"==type&&(types[i]="R"));i=1;for(prev=types[0];i<len-1;++i)type=types[i],"+"==type&&"1"==prev&&"1"==types[i+1]?types[i]="1":","!=type||prev!=types[i+1]||"1"!=prev&&"n"!=prev||(types[i]=prev),prev=type;for(i=0;i<len;++i)if(prev=types[i],","==prev)types[i]="N";else if("%"==prev){for(prev=i+1;prev<
len&&"%"==types[prev];++prev);for(type=i&&"!"==types[i-1]||prev<len&&"1"==types[prev]?"1":"N";i<prev;++i)types[i]=type;i=prev-1}i=0;for(prev=outerType;i<len;++i)type=types[i],"L"==prev&&"1"==type?types[i]="L":isStrong.test(type)&&(prev=type);for(prev=0;prev<len;++prev)if(isNeutral.test(types[prev])){for(i=prev+1;i<len&&isNeutral.test(types[i]);++i);type="L"==(prev?types[prev-1]:outerType);for(type=type==("L"==(i<len?types[i]:outerType))?type?"L":"R":outerType;prev<i;++prev)types[prev]=type;prev=i-
1}outerType=[];var m;for(i=0;i<len;)if(countsAsLeft.test(types[i])){prev=i;for(++i;i<len&&countsAsLeft.test(types[i]);++i);outerType.push(new BidiSpan(0,prev,i))}else{var pos=i;prev=outerType.length;for(++i;i<len&&"L"!=types[i];++i);for(type=pos;type<i;)if(countsAsNum.test(types[type])){pos<type&&outerType.splice(prev,0,new BidiSpan(1,pos,type));pos=type;for(++type;type<i&&countsAsNum.test(types[type]);++type);outerType.splice(prev,0,new BidiSpan(2,pos,type));pos=type}else++type;pos<i&&outerType.splice(prev,
0,new BidiSpan(1,pos,i))}"ltr"==direction&&(1==outerType[0].level&&(m=str.match(/^\s+/))&&(outerType[0].from=m[0].length,outerType.unshift(new BidiSpan(0,0,m[0].length))),1==lst(outerType).level&&(m=str.match(/\s+$/))&&(lst(outerType).to-=m[0].length,outerType.push(new BidiSpan(0,len-m[0].length,len))));return"rtl"==direction?outerType.reverse():outerType}}(),noHandlers=[],on=function(emitter,type,f){emitter.addEventListener?emitter.addEventListener(type,f,!1):emitter.attachEvent?emitter.attachEvent("on"+
type,f):(emitter=emitter._handlers||(emitter._handlers={}),emitter[type]=(emitter[type]||noHandlers).concat(f))},dragAndDrop=function(){if(ie&&9>ie_version)return!1;var div=elt$jscomp$0("div");return"draggable"in div||"dragDrop"in div}(),zwspSupported,badBidiRects,splitLinesAuto=3!="\n\nb".split(/\n/).length?function(string){for(var pos=0,result=[],l=string.length;pos<=l;){var nl=string.indexOf("\n",pos);-1==nl&&(nl=string.length);var line=string.slice(pos,"\r"==string.charAt(nl-1)?nl-1:nl),rt=line.indexOf("\r");
-1!=rt?(result.push(line.slice(0,rt)),pos+=rt+1):(result.push(line),pos=nl+1)}return result}:function(string){return string.split(/\r\n?|\n/)},hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd}catch(e){return!1}}:function(te){try{var range$$1=te.ownerDocument.selection.createRange()}catch(e){}return range$$1&&range$$1.parentElement()==te?0!=range$$1.compareEndPoints("StartToEnd",range$$1):!1},hasCopyEvent=function(){var e=elt$jscomp$0("div");if("oncopy"in
e)return!0;e.setAttribute("oncopy","return;");return"function"==typeof e.oncopy}(),badZoomedRects=null,modes={},mimeModes={},modeExtensions={},StringStream=function(string,tabSize,lineOracle){this.pos=this.start=0;this.string=string;this.tabSize=tabSize||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0;this.lineOracle=lineOracle};StringStream.prototype.eol=function(){return this.pos>=this.string.length};StringStream.prototype.sol=function(){return this.pos==this.lineStart};StringStream.prototype.peek=
function(){return this.string.charAt(this.pos)||void 0};StringStream.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)};StringStream.prototype.eat=function(match){var ch=this.string.charAt(this.pos);if("string"==typeof match?ch==match:ch&&(match.test?match.test(ch):match(ch)))return++this.pos,ch};StringStream.prototype.eatWhile=function(match){for(var start=this.pos;this.eat(match););return this.pos>start};StringStream.prototype.eatSpace=function(){for(var start=
this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>start};StringStream.prototype.skipToEnd=function(){this.pos=this.string.length};StringStream.prototype.skipTo=function(ch){ch=this.string.indexOf(ch,this.pos);if(-1<ch)return this.pos=ch,!0};StringStream.prototype.backUp=function(n){this.pos-=n};StringStream.prototype.column=function(){this.lastColumnPos<this.start&&(this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),
this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)};StringStream.prototype.indentation=function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)};StringStream.prototype.match=function(pattern,consume,caseInsensitive){if("string"==typeof pattern){var cased=function(str){return caseInsensitive?str.toLowerCase():str},substr=this.string.substr(this.pos,
pattern.length);if(cased(substr)==cased(pattern))return!1!==consume&&(this.pos+=pattern.length),!0}else{if((pattern=this.string.slice(this.pos).match(pattern))&&0<pattern.index)return null;pattern&&!1!==consume&&(this.pos+=pattern[0].length);return pattern}};StringStream.prototype.current=function(){return this.string.slice(this.start,this.pos)};StringStream.prototype.hideFirstChars=function(n,inner){this.lineStart+=n;try{return inner()}finally{this.lineStart-=n}};StringStream.prototype.lookAhead=
function(n){var oracle=this.lineOracle;return oracle&&oracle.lookAhead(n)};StringStream.prototype.baseToken=function(){var oracle=this.lineOracle;return oracle&&oracle.baseToken(this.pos)};var SavedContext=function(state,lookAhead){this.state=state;this.lookAhead=lookAhead},Context=function(doc,state,line,lookAhead){this.state=state;this.doc=doc;this.line=line;this.maxLookAhead=lookAhead||0;this.baseTokens=null;this.baseTokenPos=1};Context.prototype.lookAhead=function(n){var line=this.doc.getLine(this.line+
n);null!=line&&n>this.maxLookAhead&&(this.maxLookAhead=n);return line};Context.prototype.baseToken=function(n){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=n;)this.baseTokenPos+=2;var type=this.baseTokens[this.baseTokenPos+1];return{type:type&&type.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-n}};Context.prototype.nextLine=function(){this.line++;0<this.maxLookAhead&&this.maxLookAhead--};Context.fromSaved=function(doc,saved,line){return saved instanceof
SavedContext?new Context(doc,copyState(doc.mode,saved.state),line,saved.lookAhead):new Context(doc,copyState(doc.mode,saved),line)};Context.prototype.save=function(copy){copy=!1!==copy?copyState(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new SavedContext(copy,this.maxLookAhead):copy};var Token=function(stream,type,state){this.start=stream.start;this.end=stream.pos;this.string=stream.current();this.type=type||null;this.state=state},Line=function(text,markedSpans,estimateHeight){this.text=
text;attachMarkedSpans(this,markedSpans);this.height=estimateHeight?estimateHeight(this):1};Line.prototype.lineNo=function(){return lineNo(this)};eventMixin(Line);var styleToClassCache={},styleToClassCacheWithMode={},operationGroup=null,orphanDelayedCallbacks=null,nullRect={left:0,right:0,top:0,bottom:0},measureText,NativeScrollbars=function(place,scroll,cm){this.cm=cm;var vert=this.vert=elt$jscomp$0("div",[elt$jscomp$0("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),horiz=this.horiz=
elt$jscomp$0("div",[elt$jscomp$0("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");place(vert);place(horiz);on(vert,"scroll",function(){vert.clientHeight&&scroll(vert.scrollTop,"vertical")});on(horiz,"scroll",function(){horiz.clientWidth&&scroll(horiz.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;ie&&8>ie_version&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};NativeScrollbars.prototype.update=function(measure){var needsH=measure.scrollWidth>measure.clientWidth+
1,needsV=measure.scrollHeight>measure.clientHeight+1,sWidth=measure.nativeBarWidth;needsV?(this.vert.style.display="block",this.vert.style.bottom=needsH?sWidth+"px":"0",this.vert.firstChild.style.height=Math.max(0,measure.scrollHeight-measure.clientHeight+(measure.viewHeight-(needsH?sWidth:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");needsH?(this.horiz.style.display="block",this.horiz.style.right=needsV?sWidth+"px":"0",this.horiz.style.left=measure.barLeft+"px",this.horiz.firstChild.style.width=
Math.max(0,measure.scrollWidth-measure.clientWidth+(measure.viewWidth-measure.barLeft-(needsV?sWidth:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedZeroWidth&&0<measure.clientHeight&&(0==sWidth&&this.zeroWidthHack(),this.checkedZeroWidth=!0);return{right:needsV?sWidth:0,bottom:needsH?sWidth:0}};NativeScrollbars.prototype.setScrollLeft=function(pos){this.horiz.scrollLeft!=pos&&(this.horiz.scrollLeft=pos);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,
this.disableHoriz,"horiz")};NativeScrollbars.prototype.setScrollTop=function(pos){this.vert.scrollTop!=pos&&(this.vert.scrollTop=pos);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};NativeScrollbars.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=mac&&!mac_geMountainLion?"12px":"18px";this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new Delayed;this.disableVert=new Delayed};NativeScrollbars.prototype.enableZeroWidthBar=
function(bar,delay,type){function maybeDisable(){var box=bar.getBoundingClientRect();("vert"==type?document.elementFromPoint(box.right-1,(box.top+box.bottom)/2):document.elementFromPoint((box.right+box.left)/2,box.bottom-1))!=bar?bar.style.pointerEvents="none":delay.set(1E3,maybeDisable)}bar.style.pointerEvents="auto";delay.set(1E3,maybeDisable)};NativeScrollbars.prototype.clear=function(){var parent=this.horiz.parentNode;parent.removeChild(this.horiz);parent.removeChild(this.vert)};var NullScrollbars=
function(){};NullScrollbars.prototype.update=function(){return{bottom:0,right:0}};NullScrollbars.prototype.setScrollLeft=function(){};NullScrollbars.prototype.setScrollTop=function(){};NullScrollbars.prototype.clear=function(){};var scrollbarModel={"native":NativeScrollbars,"null":NullScrollbars},nextOpId=0,DisplayUpdate=function(cm,viewport,force){var display=cm.display;this.viewport=viewport;this.visible=visibleLines(display,cm.doc,viewport);this.editorIsHidden=!display.wrapper.offsetWidth;this.wrapperHeight=
display.wrapper.clientHeight;this.wrapperWidth=display.wrapper.clientWidth;this.oldDisplayWidth=displayWidth(cm);this.force=force;this.dims=getDimensions(cm);this.events=[]};DisplayUpdate.prototype.signal=function(emitter,type){hasHandler(emitter,type)&&this.events.push(arguments)};DisplayUpdate.prototype.finish=function(){for(var i=0;i<this.events.length;i++)signal.apply(null,this.events[i])};var wheelSamples=0,wheelPixelsPerUnit=null;ie?wheelPixelsPerUnit=-.53:gecko?wheelPixelsPerUnit=15:chrome?
wheelPixelsPerUnit=-.7:safari&&(wheelPixelsPerUnit=-1/3);var Selection=function(ranges,primIndex){this.ranges=ranges;this.primIndex=primIndex};Selection.prototype.primary=function(){return this.ranges[this.primIndex]};Selection.prototype.equals=function(other){if(other==this)return!0;if(other.primIndex!=this.primIndex||other.ranges.length!=this.ranges.length)return!1;for(var i=0;i<this.ranges.length;i++){var here=this.ranges[i],there=other.ranges[i];if(!equalCursorPos(here.anchor,there.anchor)||!equalCursorPos(here.head,
there.head))return!1}return!0};Selection.prototype.deepCopy=function(){for(var out=[],i=0;i<this.ranges.length;i++)out[i]=new Range(copyPos(this.ranges[i].anchor),copyPos(this.ranges[i].head));return new Selection(out,this.primIndex)};Selection.prototype.somethingSelected=function(){for(var i=0;i<this.ranges.length;i++)if(!this.ranges[i].empty())return!0;return!1};Selection.prototype.contains=function(pos,end){end||(end=pos);for(var i=0;i<this.ranges.length;i++){var range=this.ranges[i];if(0<=cmp(end,
range.from())&&0>=cmp(pos,range.to()))return i}return-1};var Range=function(anchor,head){this.anchor=anchor;this.head=head};Range.prototype.from=function(){return minPos(this.anchor,this.head)};Range.prototype.to=function(){return maxPos(this.anchor,this.head)};Range.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};LeafChunk.prototype={chunkSize:function(){return this.lines.length},removeInner:function(at,n){for(var i=at,e=at+n;i<e;++i){var line=this.lines[i];
this.height-=line.height;var line$jscomp$0=line;line$jscomp$0.parent=null;detachMarkedSpans(line$jscomp$0);signalLater(line,"delete")}this.lines.splice(at,n)},collapse:function(lines){lines.push.apply(lines,this.lines)},insertInner:function(at,lines,height){this.height+=height;this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at));for(at=0;at<lines.length;++at)lines[at].parent=this},iterN:function(at,n,op){for(n=at+n;at<n;++at)if(op(this.lines[at]))return!0}};BranchChunk.prototype=
{chunkSize:function(){return this.size},removeInner:function(at,n){this.size-=n;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;child.removeInner(at,rm);this.height-=oldHeight-child.height;sz==rm&&(this.children.splice(i--,1),child.parent=null);if(0==(n-=rm))break;at=0}else at-=sz}25>this.size-n&&(1<this.children.length||!(this.children[0]instanceof LeafChunk))&&(at=[],this.collapse(at),this.children=
[new LeafChunk(at)],this.children[0].parent=this)},collapse:function(lines){for(var i=0;i<this.children.length;++i)this.children[i].collapse(lines)},insertInner:function(at,lines,height){this.size+=lines.length;this.height+=height;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<=sz){child.insertInner(at,lines,height);if(child.lines&&50<child.lines.length){for(lines=at=child.lines.length%25+25;lines<child.lines.length;)height=new LeafChunk(child.lines.slice(lines,
lines+=25)),child.height-=height.height,this.children.splice(++i,0,height),height.parent=this;child.lines=child.lines.slice(0,at);this.maybeSpill()}break}at-=sz}},maybeSpill:function(){if(!(10>=this.children.length)){var me=this;do{var spilled=me.children.splice(me.children.length-5,5);spilled=new BranchChunk(spilled);if(me.parent){me.size-=spilled.size;me.height-=spilled.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,spilled)}else myIndex=new BranchChunk(me.children),
myIndex.parent=me,me.children=[myIndex,spilled],me=myIndex;spilled.parent=me.parent}while(10<me.children.length);me.parent.maybeSpill()}},iterN:function(at,n,op){for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){sz=Math.min(n,sz-at);if(child.iterN(at,sz,op))return!0;if(0==(n-=sz))break;at=0}else at-=sz}}};var LineWidget=function(doc,node,options){if(options)for(var opt in options)options.hasOwnProperty(opt)&&(this[opt]=options[opt]);this.doc=doc;this.node=
node};LineWidget.prototype.clear=function(){var cm=this.doc.cm,ws=this.line.widgets,line=this.line,no=lineNo(line);if(null!=no&&ws){for(var i=0;i<ws.length;++i)ws[i]==this&&ws.splice(i--,1);ws.length||(line.widgets=null);var height=widgetHeight(this);updateLineHeight(line,Math.max(0,line.height-height));cm&&(runInOp(cm,function(){var diff=-height;heightAtLine(line)<(cm.curOp&&cm.curOp.scrollTop||cm.doc.scrollTop)&&addToScrollTop(cm,diff);regLineChange(cm,no,"widget")}),signalLater(cm,"lineWidgetCleared",
cm,this,no))}};LineWidget.prototype.changed=function(){var this$1=this,oldH=this.height,cm=this.doc.cm,line=this.line;this.height=null;var diff=widgetHeight(this)-oldH;diff&&(updateLineHeight(line,line.height+diff),cm&&runInOp(cm,function(){cm.curOp.forceUpdate=!0;heightAtLine(line)<(cm.curOp&&cm.curOp.scrollTop||cm.doc.scrollTop)&&addToScrollTop(cm,diff);signalLater(cm,"lineWidgetChanged",cm,this$1,lineNo(line))}))};eventMixin(LineWidget);var nextMarkerId=0,TextMarker=function(doc,type){this.lines=
[];this.type=type;this.doc=doc;this.id=++nextMarkerId};TextMarker.prototype.clear=function(){if(!this.explicitlyCleared){var cm=this.doc.cm,withOp=cm&&!cm.curOp;withOp&&startOperation(cm);if(hasHandler(this,"clear")){var found=this.find();found&&signalLater(this,"clear",found.from,found.to)}for(var max=found=null,i=0;i<this.lines.length;++i){var line=this.lines[i],span=getMarkedSpanFor(line.markedSpans,this);cm&&!this.collapsed?regLineChange(cm,lineNo(line),"text"):cm&&(null!=span.to&&(max=lineNo(line)),
null!=span.from&&(found=lineNo(line)));for(var JSCompiler_temp_const=line,r=void 0,spans=line.markedSpans,span$jscomp$0=span,i$jscomp$0=0;i$jscomp$0<spans.length;++i$jscomp$0)spans[i$jscomp$0]!=span$jscomp$0&&(r||(r=[])).push(spans[i$jscomp$0]);JSCompiler_temp_const.markedSpans=r;null==span.from&&this.collapsed&&!lineIsHidden(this.doc,line)&&cm&&updateLineHeight(line,textHeight(cm.display))}if(cm&&this.collapsed&&!cm.options.lineWrapping)for(i=0;i<this.lines.length;++i)line=visualLine(this.lines[i]),
span=lineLength(line),span>cm.display.maxLineLength&&(cm.display.maxLine=line,cm.display.maxLineLength=span,cm.display.maxLineChanged=!0);null!=found&&cm&&this.collapsed&&regChange(cm,found,max+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,cm&&reCheckSelection(cm.doc));cm&&signalLater(cm,"markerCleared",cm,this,found,max);withOp&&endOperation(cm);this.parent&&this.parent.clear()}};TextMarker.prototype.find=function(side,lineObj){null==side&&
"bookmark"==this.type&&(side=1);for(var from,to,i=0;i<this.lines.length;++i){var line=this.lines[i],span=getMarkedSpanFor(line.markedSpans,this);if(null!=span.from&&(from=Pos(lineObj?line:lineNo(line),span.from),-1==side))return from;if(null!=span.to&&(to=Pos(lineObj?line:lineNo(line),span.to),1==side))return to}return from&&{from:from,to:to}};TextMarker.prototype.changed=function(){var this$1=this,pos=this.find(-1,!0),widget=this,cm=this.doc.cm;pos&&cm&&runInOp(cm,function(){var line=pos.line,lineN=
lineNo(pos.line);if(lineN=findViewForLine(cm,lineN))clearLineMeasurementCacheFor(lineN),cm.curOp.selectionChanged=cm.curOp.forceUpdate=!0;cm.curOp.updateMaxLine=!0;lineIsHidden(widget.doc,line)||null==widget.height||(lineN=widget.height,widget.height=null,(lineN=widgetHeight(widget)-lineN)&&updateLineHeight(line,line.height+lineN));signalLater(cm,"markerChanged",cm,this$1)})};TextMarker.prototype.attachLine=function(line){if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;op.maybeHiddenMarkers&&
-1!=indexOf(op.maybeHiddenMarkers,this)||(op.maybeUnhiddenMarkers||(op.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(line)};TextMarker.prototype.detachLine=function(line){this.lines.splice(indexOf(this.lines,line),1);!this.lines.length&&this.doc.cm&&(line=this.doc.cm.curOp,(line.maybeHiddenMarkers||(line.maybeHiddenMarkers=[])).push(this))};eventMixin(TextMarker);var SharedTextMarker=function(markers,primary){this.markers=markers;this.primary=primary;for(primary=0;primary<markers.length;++primary)markers[primary].parent=
this};SharedTextMarker.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var i=0;i<this.markers.length;++i)this.markers[i].clear();signalLater(this,"clear")}};SharedTextMarker.prototype.find=function(side,lineObj){return this.primary.find(side,lineObj)};eventMixin(SharedTextMarker);var nextDocId=0,Doc=function(text,mode,firstLine,lineSep,direction){if(!(this instanceof Doc))return new Doc(text,mode,firstLine,lineSep,direction);null==firstLine&&(firstLine=0);BranchChunk.call(this,
[new LeafChunk([new Line("",null)])]);this.first=firstLine;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=firstLine;firstLine=Pos(firstLine,0);this.sel=simpleSelection(firstLine);this.history=new History(null);this.id=++nextDocId;this.modeOption=mode;this.lineSep=lineSep;this.direction="rtl"==direction?"rtl":"ltr";this.extend=!1;"string"==typeof text&&(text=this.splitLines(text));updateDoc(this,{from:firstLine,to:firstLine,text:text});
setSelection(this,simpleSelection(firstLine),sel_dontScroll)};Doc.prototype=createObj(BranchChunk.prototype,{constructor:Doc,iter:function(from,to,op){op?this.iterN(from-this.first,to-from,op):this.iterN(this.first,this.first+this.size,from)},insert:function(at,lines){for(var height=0,i=0;i<lines.length;++i)height+=lines[i].height;this.insertInner(at-this.first,lines,height)},remove:function(at,n){this.removeInner(at-this.first,n)},getValue:function(lineSep){var lines=getLines(this,this.first,this.first+
this.size);return!1===lineSep?lines:lines.join(lineSep||this.lineSeparator())},setValue:docMethodOp(function(code){var top=Pos(this.first,0),last=this.first+this.size-1;makeChange(this,{from:top,to:Pos(last,getLine(this,last).text.length),text:this.splitLines(code),origin:"setValue",full:!0},!0);this.cm&&scrollToCoords(this.cm,0,0);setSelection(this,simpleSelection(top),sel_dontScroll)}),replaceRange:function(code,from,to,origin){from=clipPos(this,from);to=to?clipPos(this,to):from;replaceRange(this,
code,from,to,origin)},getRange:function(from,to,lineSep){from=getBetween(this,clipPos(this,from),clipPos(this,to));return!1===lineSep?from:from.join(lineSep||this.lineSeparator())},getLine:function(line){return(line=this.getLineHandle(line))&&line.text},getLineHandle:function(line){if(isLine(this,line))return getLine(this,line)},getLineNumber:function(line){return lineNo(line)},getLineHandleVisualStart:function(line){"number"==typeof line&&(line=getLine(this,line));return visualLine(line)},lineCount:function(){return this.size},
firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(pos){return clipPos(this,pos)},getCursor:function(start){var range$$1=this.sel.primary();return null==start||"head"==start?range$$1.head:"anchor"==start?range$$1.anchor:"end"==start||"to"==start||!1===start?range$$1.to():range$$1.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:docMethodOp(function(line,ch,
options){line=clipPos(this,"number"==typeof line?Pos(line,ch||0):line);setSelection(this,simpleSelection(line,null),options)}),setSelection:docMethodOp(function(anchor$jscomp$0,head,options){var anchor=clipPos(this,anchor$jscomp$0);anchor$jscomp$0=clipPos(this,head||anchor$jscomp$0);setSelection(this,simpleSelection(anchor,anchor$jscomp$0),options)}),extendSelection:docMethodOp(function(head,other,options){extendSelection(this,clipPos(this,head),other&&clipPos(this,other),options)}),extendSelections:docMethodOp(function(heads,
options){extendSelections(this,clipPosArray(this,heads),options)}),extendSelectionsBy:docMethodOp(function(f,options){f=map(this.sel.ranges,f);extendSelections(this,clipPosArray(this,f),options)}),setSelections:docMethodOp(function(ranges,primary,options){if(ranges.length){for(var out=[],i=0;i<ranges.length;i++)out[i]=new Range(clipPos(this,ranges[i].anchor),clipPos(this,ranges[i].head));null==primary&&(primary=Math.min(ranges.length-1,this.sel.primIndex));setSelection(this,normalizeSelection(out,
primary),options)}}),addSelection:docMethodOp(function(anchor,head,options){var ranges=this.sel.ranges.slice(0);ranges.push(new Range(clipPos(this,anchor),clipPos(this,head||anchor)));setSelection(this,normalizeSelection(ranges,ranges.length-1),options)}),getSelection:function(lineSep){for(var ranges=this.sel.ranges,lines,i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());lines=lines?lines.concat(sel):sel}return!1===lineSep?lines:lines.join(lineSep||this.lineSeparator())},
getSelections:function(lineSep){for(var parts=[],ranges=this.sel.ranges,i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());!1!==lineSep&&(sel=sel.join(lineSep||this.lineSeparator()));parts[i]=sel}return parts},replaceSelection:function(code,collapse,origin){for(var dup=[],i=0;i<this.sel.ranges.length;i++)dup[i]=code;this.replaceSelections(dup,collapse,origin||"+input")},replaceSelections:docMethodOp(function(code,collapse,origin){for(var changes=[],sel=this.sel,i=0;i<
sel.ranges.length;i++){var range$$1=sel.ranges[i];changes[i]={from:range$$1.from(),to:range$$1.to(),text:this.splitLines(code[i]),origin:origin}}if(code=collapse&&"end"!=collapse){code=[];sel=origin=Pos(this.first,0);for(i=0;i<changes.length;i++){var change=changes[i];range$$1=offsetPos(change.from,origin,sel);var to=offsetPos(changeEnd(change),origin,sel);origin=change.to;sel=to;"around"==collapse?(change=this.sel.ranges[i],change=0>cmp(change.head,change.anchor),code[i]=new Range(change?to:range$$1,
change?range$$1:to)):code[i]=new Range(range$$1,range$$1)}code=new Selection(code,this.sel.primIndex)}collapse=code;for(code=changes.length-1;0<=code;code--)makeChange(this,changes[code]);collapse?setSelectionReplaceHistory(this,collapse):this.cm&&ensureCursorVisible(this.cm)}),undo:docMethodOp(function(){makeChangeFromHistory(this,"undo")}),redo:docMethodOp(function(){makeChangeFromHistory(this,"redo")}),undoSelection:docMethodOp(function(){makeChangeFromHistory(this,"undo",!0)}),redoSelection:docMethodOp(function(){makeChangeFromHistory(this,
"redo",!0)}),setExtending:function(val){this.extend=val},getExtending:function(){return this.extend},historySize:function(){for(var hist=this.history,done=0,undone=0,i=0;i<hist.done.length;i++)hist.done[i].ranges||++done;for(i=0;i<hist.undone.length;i++)hist.undone[i].ranges||++undone;return{undo:done,redo:undone}},clearHistory:function(){this.history=new History(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(forceSplit){forceSplit&&
(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(gen){return this.history.generation==(gen||this.cleanGeneration)},getHistory:function(){return{done:copyHistoryArray(this.history.done),undone:copyHistoryArray(this.history.undone)}},setHistory:function(histData){var hist=this.history=new History(this.history.maxGeneration);hist.done=copyHistoryArray(histData.done.slice(0),null,!0);hist.undone=copyHistoryArray(histData.undone.slice(0),
null,!0)},setGutterMarker:docMethodOp(function(line$jscomp$0,gutterID,value){return changeLine(this,line$jscomp$0,"gutter",function(line){var markers=line.gutterMarkers||(line.gutterMarkers={});markers[gutterID]=value;!value&&isEmpty(markers)&&(line.gutterMarkers=null);return!0})}),clearGutter:docMethodOp(function(gutterID){var this$1=this;this.iter(function(line){line.gutterMarkers&&line.gutterMarkers[gutterID]&&changeLine(this$1,line,"gutter",function(){line.gutterMarkers[gutterID]=null;isEmpty(line.gutterMarkers)&&
(line.gutterMarkers=null);return!0})})}),lineInfo:function(line){if("number"==typeof line){if(!isLine(this,line))return null;var n=line;line=getLine(this,line);if(!line)return null}else if(n=lineNo(line),null==n)return null;return{line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets}},addLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,"gutter"==where?"gutter":"class",
function(line){var prop="text"==where?"textClass":"background"==where?"bgClass":"gutter"==where?"gutterClass":"wrapClass";if(line[prop]){if(classTest(cls).test(line[prop]))return!1;line[prop]+=" "+cls}else line[prop]=cls;return!0})}),removeLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,"gutter"==where?"gutter":"class",function(line){var prop="text"==where?"textClass":"background"==where?"bgClass":"gutter"==where?"gutterClass":"wrapClass",cur=line[prop];if(cur)if(null==
cls)line[prop]=null;else{var found=cur.match(classTest(cls));if(!found)return!1;var end=found.index+found[0].length;line[prop]=cur.slice(0,found.index)+(found.index&&end!=cur.length?" ":"")+cur.slice(end)||null}else return!1;return!0})}),addLineWidget:docMethodOp(function(handle,node,options){return addLineWidget(this,handle,node,options)}),removeLineWidget:function(widget){widget.clear()},markText:function(from,to,options){return markText(this,clipPos(this,from),clipPos(this,to),options,options&&
options.type||"range")},setBookmark:function(pos,options){options={replacedWith:options&&(null==options.nodeType?options.widget:options),insertLeft:options&&options.insertLeft,clearWhenEmpty:!1,shared:options&&options.shared,handleMouseEvents:options&&options.handleMouseEvents};pos=clipPos(this,pos);return markText(this,pos,pos,options,"bookmark")},findMarksAt:function(pos){pos=clipPos(this,pos);var markers=[],spans=getLine(this,pos.line).markedSpans;if(spans)for(var i=0;i<spans.length;++i){var span=
spans[i];(null==span.from||span.from<=pos.ch)&&(null==span.to||span.to>=pos.ch)&&markers.push(span.marker.parent||span.marker)}return markers},findMarks:function(from,to,filter){from=clipPos(this,from);to=clipPos(this,to);var found=[],lineNo$$1=from.line;this.iter(from.line,to.line+1,function(line){if(line=line.markedSpans)for(var i=0;i<line.length;i++){var span=line[i];null!=span.to&&lineNo$$1==from.line&&from.ch>=span.to||null==span.from&&lineNo$$1!=from.line||null!=span.from&&lineNo$$1==to.line&&
span.from>=to.ch||filter&&!filter(span.marker)||found.push(span.marker.parent||span.marker)}++lineNo$$1});return found},getAllMarks:function(){var markers=[];this.iter(function(line){if(line=line.markedSpans)for(var i=0;i<line.length;++i)null!=line[i].from&&markers.push(line[i].marker)});return markers},posFromIndex:function(off){var ch,lineNo$$1=this.first,sepSize=this.lineSeparator().length;this.iter(function(line){line=line.text.length+sepSize;if(line>off)return ch=off,!0;off-=line;++lineNo$$1});
return clipPos(this,Pos(lineNo$$1,ch))},indexFromPos:function(coords){coords=clipPos(this,coords);var index=coords.ch;if(coords.line<this.first||0>coords.ch)return 0;var sepSize=this.lineSeparator().length;this.iter(this.first,coords.line,function(line){index+=line.text.length+sepSize});return index},copy:function(copyHistory){var doc=new Doc(getLines(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);doc.scrollTop=this.scrollTop;doc.scrollLeft=this.scrollLeft;
doc.sel=this.sel;doc.extend=!1;copyHistory&&(doc.history.undoDepth=this.history.undoDepth,doc.setHistory(this.getHistory()));return doc},linkedDoc:function(options){options||(options={});var from=this.first,to=this.first+this.size;null!=options.from&&options.from>from&&(from=options.from);null!=options.to&&options.to<to&&(to=options.to);from=new Doc(getLines(this,from,to),options.mode||this.modeOption,from,this.lineSep,this.direction);options.sharedHist&&(from.history=this.history);(this.linked||
(this.linked=[])).push({doc:from,sharedHist:options.sharedHist});from.linked=[{doc:this,isParent:!0,sharedHist:options.sharedHist}];options=findSharedMarkers(this);for(to=0;to<options.length;to++){var marker=options[to],pos=marker.find(),mFrom=from.clipPos(pos.from);pos=from.clipPos(pos.to);cmp(mFrom,pos)&&(mFrom=markText(from,mFrom,pos,marker.primary,marker.primary.type),marker.markers.push(mFrom),mFrom.parent=marker)}return from},unlinkDoc:function(other){other instanceof CodeMirror$1&&(other=other.doc);
if(this.linked)for(var i=0;i<this.linked.length;++i)if(this.linked[i].doc==other){this.linked.splice(i,1);other.unlinkDoc(this);detachSharedMarkers(findSharedMarkers(this));break}if(other.history==this.history){var splitIds=[other.id];linkedDocs(other,function(doc){return splitIds.push(doc.id)},!0);other.history=new History(null);other.history.done=copyHistoryArray(this.history.done,splitIds);other.history.undone=copyHistoryArray(this.history.undone,splitIds)}},iterLinkedDocs:function(f){linkedDocs(this,
f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(str){return this.lineSep?str.split(this.lineSep):splitLinesAuto(str)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:docMethodOp(function(dir){"rtl"!=dir&&(dir="ltr");dir!=this.direction&&(this.direction=dir,this.iter(function(line){return line.order=null}),this.cm&&directionChanged(this.cm))})});Doc.prototype.eachLine=Doc.prototype.iter;for(var lastDrop=0,globalsRegistered=!1,keyNames=
{3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"\x3d",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",
63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},i$jscomp$1=0;10>i$jscomp$1;i$jscomp$1++)keyNames[i$jscomp$1+48]=keyNames[i$jscomp$1+96]=String(i$jscomp$1);for(var i$1=65;90>=i$1;i$1++)keyNames[i$1]=String.fromCharCode(i$1);for(var i$2=1;12>=i$2;i$2++)keyNames[i$2+111]=keyNames[i$2+63235]="F"+i$2;var keyMap={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",
Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd",
"Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart",
"Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft",
"Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};keyMap["default"]=
mac?keyMap.macDefault:keyMap.pcDefault;var commands={selectAll:selectAll,singleSelection:function(cm){return cm.setSelection(cm.getCursor("anchor"),cm.getCursor("head"),sel_dontScroll)},killLine:function(cm){return deleteNearSelection(cm,function(range){if(range.empty()){var len=getLine(cm.doc,range.head.line).text.length;return range.head.ch==len&&range.head.line<cm.lastLine()?{from:range.head,to:Pos(range.head.line+1,0)}:{from:range.head,to:Pos(range.head.line,len)}}return{from:range.from(),to:range.to()}})},
deleteLine:function(cm){return deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:clipPos(cm.doc,Pos(range.to().line+1,0))}})},delLineLeft:function(cm){return deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:range.from()}})},delWrappedLineLeft:function(cm){return deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;return{from:cm.coordsChar({left:0,top:top},"div"),to:range.from()}})},delWrappedLineRight:function(cm){return deleteNearSelection(cm,
function(range){var top=cm.charCoords(range.head,"div").top+5;top=cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div");return{from:range.from(),to:top}})},undo:function(cm){return cm.undo()},redo:function(cm){return cm.redo()},undoSelection:function(cm){return cm.undoSelection()},redoSelection:function(cm){return cm.redoSelection()},goDocStart:function(cm){return cm.extendSelection(Pos(cm.firstLine(),0))},goDocEnd:function(cm){return cm.extendSelection(Pos(cm.lastLine()))},goLineStart:function(cm){return cm.extendSelectionsBy(function(range){return lineStart(cm,
range.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(cm){return cm.extendSelectionsBy(function(range){return lineStartSmart(cm,range.head)},{origin:"+move",bias:1})},goLineEnd:function(cm){return cm.extendSelectionsBy(function(range){range=range.head.line;var line=getLine(cm.doc,range);var visual=line;for(var merged;merged=collapsedSpanAtSide(visual,!1);)visual=merged.find(1,!0).line;visual!=line&&(range=lineNo(visual));return endOfLine(!0,cm,line,range,-1)},{origin:"+move",bias:-1})},
goLineRight:function(cm){return cm.extendSelectionsBy(function(range){range=cm.cursorCoords(range.head,"div").top+5;return cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:range},"div")},sel_move)},goLineLeft:function(cm){return cm.extendSelectionsBy(function(range){range=cm.cursorCoords(range.head,"div").top+5;return cm.coordsChar({left:0,top:range},"div")},sel_move)},goLineLeftSmart:function(cm){return cm.extendSelectionsBy(function(range){var top=cm.cursorCoords(range.head,"div").top+
5;top=cm.coordsChar({left:0,top:top},"div");return top.ch<cm.getLine(top.line).search(/\S/)?lineStartSmart(cm,range.head):top},sel_move)},goLineUp:function(cm){return cm.moveV(-1,"line")},goLineDown:function(cm){return cm.moveV(1,"line")},goPageUp:function(cm){return cm.moveV(-1,"page")},goPageDown:function(cm){return cm.moveV(1,"page")},goCharLeft:function(cm){return cm.moveH(-1,"char")},goCharRight:function(cm){return cm.moveH(1,"char")},goColumnLeft:function(cm){return cm.moveH(-1,"column")},goColumnRight:function(cm){return cm.moveH(1,
"column")},goWordLeft:function(cm){return cm.moveH(-1,"word")},goGroupRight:function(cm){return cm.moveH(1,"group")},goGroupLeft:function(cm){return cm.moveH(-1,"group")},goWordRight:function(cm){return cm.moveH(1,"word")},delCharBefore:function(cm){return cm.deleteH(-1,"char")},delCharAfter:function(cm){return cm.deleteH(1,"char")},delWordBefore:function(cm){return cm.deleteH(-1,"word")},delWordAfter:function(cm){return cm.deleteH(1,"word")},delGroupBefore:function(cm){return cm.deleteH(-1,"group")},
delGroupAfter:function(cm){return cm.deleteH(1,"group")},indentAuto:function(cm){return cm.indentSelection("smart")},indentMore:function(cm){return cm.indentSelection("add")},indentLess:function(cm){return cm.indentSelection("subtract")},insertTab:function(cm){return cm.replaceSelection("\t")},insertSoftTab:function(cm){for(var spaces=[],ranges=cm.listSelections(),tabSize=cm.options.tabSize,i=0;i<ranges.length;i++){var pos=ranges[i].from();pos=countColumn(cm.getLine(pos.line),pos.ch,tabSize);spaces.push(spaceStr(tabSize-
pos%tabSize))}cm.replaceSelections(spaces)},defaultTab:function(cm){cm.somethingSelected()?cm.indentSelection("add"):cm.execCommand("insertTab")},transposeChars:function(cm){return runInOp(cm,function(){for(var ranges=cm.listSelections(),newSel=[],i=0;i<ranges.length;i++)if(ranges[i].empty()){var cur=ranges[i].head,line=getLine(cm.doc,cur.line).text;if(line)if(cur.ch==line.length&&(cur=new Pos(cur.line,cur.ch-1)),0<cur.ch)cur=new Pos(cur.line,cur.ch+1),cm.replaceRange(line.charAt(cur.ch-1)+line.charAt(cur.ch-
2),Pos(cur.line,cur.ch-2),cur,"+transpose");else if(cur.line>cm.doc.first){var prev=getLine(cm.doc,cur.line-1).text;prev&&(cur=new Pos(cur.line,1),cm.replaceRange(line.charAt(0)+cm.doc.lineSeparator()+prev.charAt(prev.length-1),Pos(cur.line-1,prev.length-1),cur,"+transpose"))}newSel.push(new Range(cur,cur))}cm.setSelections(newSel)})},newlineAndIndent:function(cm){return runInOp(cm,function(){for(var sels=cm.listSelections(),i=sels.length-1;0<=i;i--)cm.replaceRange(cm.doc.lineSeparator(),sels[i].anchor,
sels[i].head,"+input");sels=cm.listSelections();for(i=0;i<sels.length;i++)cm.indentLine(sels[i].from().line,null,!0);ensureCursorVisible(cm)})},openLine:function(cm){return cm.replaceSelection("\n","start")},toggleOverwrite:function(cm){return cm.toggleOverwrite()}},stopSeq=new Delayed,lastStoppedKey=null,PastClick=function(time,pos,button){this.time=time;this.pos=pos;this.button=button};PastClick.prototype.compare=function(time,pos,button){return this.time+400>time&&0==cmp(pos,this.pos)&&button==
this.button};var lastClick,lastDoubleClick,Init={toString:function(){return"CodeMirror.Init"}},defaults={},optionHandlers={};CodeMirror$1.defaults=defaults;CodeMirror$1.optionHandlers=optionHandlers;var initHooks=[];CodeMirror$1.defineInitHook=function(f){return initHooks.push(f)};var lastCopied=null,ContentEditableInput=function(cm){this.cm=cm;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Delayed;this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=
null};ContentEditableInput.prototype.init=function(display){function onCopyCut(e){if(!signalDOMEvent(cm,e)){if(cm.somethingSelected())lastCopied={lineWise:!1,text:cm.getSelections()},"cut"==e.type&&cm.replaceSelection("",null,"cut");else if(cm.options.lineWiseCopyCut){var ranges=copyableRanges(cm);lastCopied={lineWise:!0,text:ranges.text};"cut"==e.type&&cm.operation(function(){cm.setSelections(ranges.ranges,0,sel_dontScroll);cm.replaceSelection("",null,"cut")})}else return;if(e.clipboardData){e.clipboardData.clearData();
var content=lastCopied.text.join("\n");e.clipboardData.setData("Text",content);if(e.clipboardData.getData("Text")==content){e.preventDefault();return}}var kludge=hiddenTextarea();e=kludge.firstChild;cm.display.lineSpace.insertBefore(kludge,cm.display.lineSpace.firstChild);e.value=lastCopied.text.join("\n");var hadFocus=document.activeElement;selectInput(e);setTimeout(function(){cm.display.lineSpace.removeChild(kludge);hadFocus.focus();hadFocus==div&&input.showPrimarySelection()},50)}}var this$1=this,
input=this,cm=input.cm,div=input.div=display.lineDiv;disableBrowserMagic(div,cm.options.spellcheck);on(div,"paste",function(e){signalDOMEvent(cm,e)||handlePaste(e,cm)||11>=ie_version&&setTimeout(operation(cm,function(){return this$1.updateFromDOM()}),20)});on(div,"compositionstart",function(e){this$1.composing={data:e.data,done:!1}});on(div,"compositionupdate",function(e){this$1.composing||(this$1.composing={data:e.data,done:!1})});on(div,"compositionend",function(e){this$1.composing&&(e.data!=this$1.composing.data&&
this$1.readFromDOMSoon(),this$1.composing.done=!0)});on(div,"touchstart",function(){return input.forceCompositionEnd()});on(div,"input",function(){this$1.composing||this$1.readFromDOMSoon()});on(div,"copy",onCopyCut);on(div,"cut",onCopyCut)};ContentEditableInput.prototype.prepareSelection=function(){var result=prepareSelection(this.cm,!1);result.focus=this.cm.state.focused;return result};ContentEditableInput.prototype.showSelection=function(info,takeFocus){info&&this.cm.display.view.length&&((info.focus||
takeFocus)&&this.showPrimarySelection(),this.showMultipleSelections(info))};ContentEditableInput.prototype.showPrimarySelection=function(){var sel=window.getSelection(),cm=this.cm,prim=cm.doc.sel.primary(),from=prim.from();prim=prim.to();if(cm.display.viewTo==cm.display.viewFrom||from.line>=cm.display.viewTo||prim.line<cm.display.viewFrom)sel.removeAllRanges();else{var curAnchor=domToPos(cm,sel.anchorNode,sel.anchorOffset),curFocus=domToPos(cm,sel.focusNode,sel.focusOffset);if(!curAnchor||curAnchor.bad||
!curFocus||curFocus.bad||0!=cmp(minPos(curAnchor,curFocus),from)||0!=cmp(maxPos(curAnchor,curFocus),prim))if(curAnchor=cm.display.view,from=from.line>=cm.display.viewFrom&&posToDOM(cm,from)||{node:curAnchor[0].measure.map[2],offset:0},prim=prim.line<cm.display.viewTo&&posToDOM(cm,prim),prim||(prim=curAnchor[curAnchor.length-1].measure,prim=prim.maps?prim.maps[prim.maps.length-1]:prim.map,prim={node:prim[prim.length-1],offset:prim[prim.length-2]-prim[prim.length-3]}),from&&prim){curAnchor=sel.rangeCount&&
sel.getRangeAt(0);try{var rng=range$jscomp$0(from.node,from.offset,prim.offset,prim.node)}catch(e){}rng&&(!gecko&&cm.state.focused?(sel.collapse(from.node,from.offset),rng.collapsed||(sel.removeAllRanges(),sel.addRange(rng))):(sel.removeAllRanges(),sel.addRange(rng)),curAnchor&&null==sel.anchorNode?sel.addRange(curAnchor):gecko&&this.startGracePeriod());this.rememberSelection()}else sel.removeAllRanges()}};ContentEditableInput.prototype.startGracePeriod=function(){var this$1=this;clearTimeout(this.gracePeriod);
this.gracePeriod=setTimeout(function(){this$1.gracePeriod=!1;this$1.selectionChanged()&&this$1.cm.operation(function(){return this$1.cm.curOp.selectionChanged=!0})},20)};ContentEditableInput.prototype.showMultipleSelections=function(info){removeChildrenAndAdd(this.cm.display.cursorDiv,info.cursors);removeChildrenAndAdd(this.cm.display.selectionDiv,info.selection)};ContentEditableInput.prototype.rememberSelection=function(){var sel=window.getSelection();this.lastAnchorNode=sel.anchorNode;this.lastAnchorOffset=
sel.anchorOffset;this.lastFocusNode=sel.focusNode;this.lastFocusOffset=sel.focusOffset};ContentEditableInput.prototype.selectionInEditor=function(){var sel=window.getSelection();if(!sel.rangeCount)return!1;sel=sel.getRangeAt(0).commonAncestorContainer;return contains(this.div,sel)};ContentEditableInput.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())};ContentEditableInput.prototype.blur=function(){this.div.blur()};
ContentEditableInput.prototype.getField=function(){return this.div};ContentEditableInput.prototype.supportsTouch=function(){return!0};ContentEditableInput.prototype.receivedFocus=function(){function poll(){input.cm.state.focused&&(input.pollSelection(),input.polling.set(input.cm.options.pollInterval,poll))}var input=this;this.selectionInEditor()?this.pollSelection():runInOp(this.cm,function(){return input.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,poll)};ContentEditableInput.prototype.selectionChanged=
function(){var sel=window.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastFocusNode||sel.focusOffset!=this.lastFocusOffset};ContentEditableInput.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var sel=window.getSelection(),cm=this.cm;if(android&&chrome&&this.cm.options.gutters.length&&isInGutter(sel.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,
preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var anchor=domToPos(cm,sel.anchorNode,sel.anchorOffset),head=domToPos(cm,sel.focusNode,sel.focusOffset);anchor&&head&&runInOp(cm,function(){setSelection(cm.doc,simpleSelection(anchor,head),sel_dontScroll);if(anchor.bad||head.bad)cm.curOp.selectionChanged=!0})}}};ContentEditableInput.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);
var cm=this.cm,display=cm.display,sel=cm.doc.sel.primary(),from=sel.from(),to=sel.to();0==from.ch&&from.line>cm.firstLine()&&(from=Pos(from.line-1,getLine(cm.doc,from.line-1).length));to.ch==getLine(cm.doc,to.line).text.length&&to.line<cm.lastLine()&&(to=Pos(to.line+1,0));if(from.line<display.viewFrom||to.line>display.viewTo-1)return!1;var fromIndex;from.line==display.viewFrom||0==(fromIndex=findViewIndex(cm,from.line))?(sel=lineNo(display.view[0].line),fromIndex=display.view[0].node):(sel=lineNo(display.view[fromIndex].line),
fromIndex=display.view[fromIndex-1].node.nextSibling);var toIndex=findViewIndex(cm,to.line);toIndex==display.view.length-1?(to=display.viewTo-1,display=display.lineDiv.lastChild):(to=lineNo(display.view[toIndex+1].line)-1,display=display.view[toIndex+1].node.previousSibling);if(!fromIndex)return!1;display=cm.doc.splitLines(domTextBetween(cm,fromIndex,display,sel,to));for(fromIndex=getBetween(cm.doc,Pos(sel,0),Pos(to,getLine(cm.doc,to).text.length));1<display.length&&1<fromIndex.length;)if(lst(display)==
lst(fromIndex))display.pop(),fromIndex.pop(),to--;else if(display[0]==fromIndex[0])display.shift(),fromIndex.shift(),sel++;else break;var cutFront=0;toIndex=0;for(var newTop=display[0],oldTop=fromIndex[0],maxCutFront=Math.min(newTop.length,oldTop.length);cutFront<maxCutFront&&newTop.charCodeAt(cutFront)==oldTop.charCodeAt(cutFront);)++cutFront;newTop=lst(display);oldTop=lst(fromIndex);for(maxCutFront=Math.min(newTop.length-(1==display.length?cutFront:0),oldTop.length-(1==fromIndex.length?cutFront:
0));toIndex<maxCutFront&&newTop.charCodeAt(newTop.length-toIndex-1)==oldTop.charCodeAt(oldTop.length-toIndex-1);)++toIndex;if(1==display.length&&1==fromIndex.length&&sel==from.line)for(;cutFront&&cutFront>from.ch&&newTop.charCodeAt(newTop.length-toIndex-1)==oldTop.charCodeAt(oldTop.length-toIndex-1);)cutFront--,toIndex++;display[display.length-1]=newTop.slice(0,newTop.length-toIndex).replace(/^\u200b+/,"");display[0]=display[0].slice(cutFront).replace(/\u200b+$/,"");from=Pos(sel,cutFront);sel=Pos(to,
fromIndex.length?lst(fromIndex).length-toIndex:0);if(1<display.length||display[0]||cmp(from,sel))return replaceRange(cm.doc,display,from,sel,"+input"),!0};ContentEditableInput.prototype.ensurePolled=function(){this.forceCompositionEnd()};ContentEditableInput.prototype.reset=function(){this.forceCompositionEnd()};ContentEditableInput.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};
ContentEditableInput.prototype.readFromDOMSoon=function(){var this$1=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){this$1.readDOMTimeout=null;if(this$1.composing)if(this$1.composing.done)this$1.composing=null;else return;this$1.updateFromDOM()},80))};ContentEditableInput.prototype.updateFromDOM=function(){var this$1=this;!this.cm.isReadOnly()&&this.pollContent()||runInOp(this.cm,function(){return regChange(this$1.cm)})};ContentEditableInput.prototype.setUneditable=function(node){node.contentEditable=
"false"};ContentEditableInput.prototype.onKeyPress=function(e){0!=e.charCode&&(e.preventDefault(),this.cm.isReadOnly()||operation(this.cm,applyTextInput)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))};ContentEditableInput.prototype.readOnlyChanged=function(val){this.div.contentEditable=String("nocursor"!=val)};ContentEditableInput.prototype.onContextMenu=function(){};ContentEditableInput.prototype.resetPosition=function(){};ContentEditableInput.prototype.needsContentAttribute=
!0;var TextareaInput=function(cm){this.cm=cm;this.prevInput="";this.pollingFast=!1;this.polling=new Delayed;this.hasSelection=!1;this.composing=null};TextareaInput.prototype.init=function(display){function prepareCopyCut(e){if(!signalDOMEvent(cm,e)){if(cm.somethingSelected())lastCopied={lineWise:!1,text:cm.getSelections()};else if(cm.options.lineWiseCopyCut){var ranges=copyableRanges(cm);lastCopied={lineWise:!0,text:ranges.text};"cut"==e.type?cm.setSelections(ranges.ranges,null,sel_dontScroll):(input.prevInput=
"",te.value=ranges.text.join("\n"),selectInput(te))}else return;"cut"==e.type&&(cm.state.cutIncoming=!0)}}var this$1=this,input=this,cm=this.cm;this.createField(display);var te=this.textarea;display.wrapper.insertBefore(this.wrapper,display.wrapper.firstChild);ios&&(te.style.width="0px");on(te,"input",function(){ie&&9<=ie_version&&this$1.hasSelection&&(this$1.hasSelection=null);input.poll()});on(te,"paste",function(e){signalDOMEvent(cm,e)||handlePaste(e,cm)||(cm.state.pasteIncoming=!0,input.fastPoll())});
on(te,"cut",prepareCopyCut);on(te,"copy",prepareCopyCut);on(display.scroller,"paste",function(e){eventInWidget(display,e)||signalDOMEvent(cm,e)||(cm.state.pasteIncoming=!0,input.focus())});on(display.lineSpace,"selectstart",function(e){eventInWidget(display,e)||e_preventDefault(e)});on(te,"compositionstart",function(){var start=cm.getCursor("from");input.composing&&input.composing.range.clear();input.composing={start:start,range:cm.markText(start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});
on(te,"compositionend",function(){input.composing&&(input.poll(),input.composing.range.clear(),input.composing=null)})};TextareaInput.prototype.createField=function(_display){this.wrapper=hiddenTextarea();this.textarea=this.wrapper.firstChild};TextareaInput.prototype.prepareSelection=function(){var cm=this.cm,display=cm.display,doc=cm.doc,result=prepareSelection(cm);if(cm.options.moveInputWithCursor){cm=cursorCoords(cm,doc.sel.primary().head,"div");doc=display.wrapper.getBoundingClientRect();var lineOff=
display.lineDiv.getBoundingClientRect();result.teTop=Math.max(0,Math.min(display.wrapper.clientHeight-10,cm.top+lineOff.top-doc.top));result.teLeft=Math.max(0,Math.min(display.wrapper.clientWidth-10,cm.left+lineOff.left-doc.left))}return result};TextareaInput.prototype.showSelection=function(drawn){var display=this.cm.display;removeChildrenAndAdd(display.cursorDiv,drawn.cursors);removeChildrenAndAdd(display.selectionDiv,drawn.selection);null!=drawn.teTop&&(this.wrapper.style.top=drawn.teTop+"px",
this.wrapper.style.left=drawn.teLeft+"px")};TextareaInput.prototype.reset=function(typing){if(!this.contextMenuPending&&!this.composing){var cm=this.cm;cm.somethingSelected()?(this.prevInput="",typing=cm.getSelection(),this.textarea.value=typing,cm.state.focused&&selectInput(this.textarea),ie&&9<=ie_version&&(this.hasSelection=typing)):typing||(this.prevInput=this.textarea.value="",ie&&9<=ie_version&&(this.hasSelection=null))}};TextareaInput.prototype.getField=function(){return this.textarea};TextareaInput.prototype.supportsTouch=
function(){return!1};TextareaInput.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!mobile||activeElt()!=this.textarea))try{this.textarea.focus()}catch(e){}};TextareaInput.prototype.blur=function(){this.textarea.blur()};TextareaInput.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};TextareaInput.prototype.receivedFocus=function(){this.slowPoll()};TextareaInput.prototype.slowPoll=function(){var this$1=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,
function(){this$1.poll();this$1.cm.state.focused&&this$1.slowPoll()})};TextareaInput.prototype.fastPoll=function(){function p(){input.poll()||missed?(input.pollingFast=!1,input.slowPoll()):(missed=!0,input.polling.set(60,p))}var missed=!1,input=this;input.pollingFast=!0;input.polling.set(20,p)};TextareaInput.prototype.poll=function(){var this$1=this,cm=this.cm,input=this.textarea,prevInput=this.prevInput;if(this.contextMenuPending||!cm.state.focused||hasSelection(input)&&!prevInput&&!this.composing||
cm.isReadOnly()||cm.options.disableInput||cm.state.keySeq)return!1;var text=input.value;if(text==prevInput&&!cm.somethingSelected())return!1;if(ie&&9<=ie_version&&this.hasSelection===text||mac&&/[\uf700-\uf7ff]/.test(text))return cm.display.input.reset(),!1;if(cm.doc.sel==cm.display.selForContextMenu){var first=text.charCodeAt(0);8203!=first||prevInput||(prevInput="​");if(8666==first)return this.reset(),this.cm.execCommand("undo")}var same=0;for(first=Math.min(prevInput.length,text.length);same<first&&
prevInput.charCodeAt(same)==text.charCodeAt(same);)++same;runInOp(cm,function(){applyTextInput(cm,text.slice(same),prevInput.length-same,null,this$1.composing?"*compose":null);1E3<text.length||-1<text.indexOf("\n")?input.value=this$1.prevInput="":this$1.prevInput=text;this$1.composing&&(this$1.composing.range.clear(),this$1.composing.range=cm.markText(this$1.composing.start,cm.getCursor("to"),{className:"CodeMirror-composing"}))});return!0};TextareaInput.prototype.ensurePolled=function(){this.pollingFast&&
this.poll()&&(this.pollingFast=!1)};TextareaInput.prototype.onKeyPress=function(){ie&&9<=ie_version&&(this.hasSelection=null);this.fastPoll()};TextareaInput.prototype.onContextMenu=function(e){function prepareSelectAllHack(){if(null!=te.selectionStart){var selected=cm.somethingSelected(),extval="​"+(selected?te.value:"");te.value="⇚";te.value=extval;input.prevInput=selected?"":"​";te.selectionStart=1;te.selectionEnd=extval.length;display.selForContextMenu=cm.doc.sel}}function rehide(){input.contextMenuPending=
!1;input.wrapper.style.cssText=oldWrapperCSS;te.style.cssText=oldCSS;ie&&9>ie_version&&display.scrollbars.setScrollTop(display.scroller.scrollTop=scrollPos);if(null!=te.selectionStart){(!ie||ie&&9>ie_version)&&prepareSelectAllHack();var i=0,poll=function(){display.selForContextMenu==cm.doc.sel&&0==te.selectionStart&&0<te.selectionEnd&&"​"==input.prevInput?operation(cm,selectAll)(cm):10>i++?display.detectingSelectAll=setTimeout(poll,500):(display.selForContextMenu=null,display.input.reset())};display.detectingSelectAll=
setTimeout(poll,200)}}var input=this,cm=input.cm,display=cm.display,te=input.textarea,pos=posFromMouse(cm,e),scrollPos=display.scroller.scrollTop;if(pos&&!presto){cm.options.resetSelectionOnContextMenu&&-1==cm.doc.sel.contains(pos)&&operation(cm,setSelection)(cm.doc,simpleSelection(pos),sel_dontScroll);var oldCSS=te.style.cssText,oldWrapperCSS=input.wrapper.style.cssText;input.wrapper.style.cssText="position: absolute";pos=input.wrapper.getBoundingClientRect();te.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+
(e.clientY-pos.top-5)+"px; left: "+(e.clientX-pos.left-5)+"px;\n      z-index: 1000; background: "+(ie?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity\x3d5);";if(webkit)var oldScrollY=window.scrollY;display.input.focus();webkit&&window.scrollTo(null,oldScrollY);display.input.reset();cm.somethingSelected()||(te.value=input.prevInput=" ");input.contextMenuPending=!0;display.selForContextMenu=cm.doc.sel;
clearTimeout(display.detectingSelectAll);ie&&9<=ie_version&&prepareSelectAllHack();if(captureRightClick){e_stop(e);var mouseup=function(){off(window,"mouseup",mouseup);setTimeout(rehide,20)};on(window,"mouseup",mouseup)}else setTimeout(rehide,50)}};TextareaInput.prototype.readOnlyChanged=function(val){val||this.reset();this.textarea.disabled="nocursor"==val};TextareaInput.prototype.setUneditable=function(){};TextareaInput.prototype.needsContentAttribute=!1;(function(CodeMirror){function option(name,
deflt,handle,notOnInit){CodeMirror.defaults[name]=deflt;handle&&(optionHandlers[name]=notOnInit?function(cm,val,old){old!=Init&&handle(cm,val,old)}:handle)}var optionHandlers=CodeMirror.optionHandlers;CodeMirror.defineOption=option;CodeMirror.Init=Init;option("value","",function(cm,val){return cm.setValue(val)},!0);option("mode",null,function(cm,val){cm.doc.modeOption=val;loadMode(cm)},!0);option("indentUnit",2,loadMode,!0);option("indentWithTabs",!1);option("smartIndent",!0);option("tabSize",4,function(cm){resetModeState(cm);
clearCaches(cm);regChange(cm)},!0);option("lineSeparator",null,function(cm,val){if(cm.doc.lineSep=val){var newBreaks=[],lineNo=cm.doc.first;cm.doc.iter(function(line){for(var pos=0;;){var found=line.text.indexOf(val,pos);if(-1==found)break;pos=found+val.length;newBreaks.push(Pos(lineNo,found))}lineNo++});for(var i=newBreaks.length-1;0<=i;i--)replaceRange(cm.doc,val,newBreaks[i],Pos(newBreaks[i].line,newBreaks[i].ch+val.length))}});option("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,
function(cm,val,old){cm.state.specialChars=new RegExp(val.source+(val.test("\t")?"":"|\t"),"g");old!=Init&&cm.refresh()});option("specialCharPlaceholder",defaultSpecialCharPlaceholder,function(cm){return cm.refresh()},!0);option("electricChars",!0);option("inputStyle",mobile?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");},!0);option("spellcheck",!1,function(cm,val){return cm.getInputField().spellcheck=val},!0);option("rtlMoveVisually",
!windows);option("wholeLineUpdateBefore",!0);option("theme","default",function(cm){themeChanged(cm);guttersChanged(cm)},!0);option("keyMap","default",function(cm,val,old){val=getKeyMap(val);(old=old!=Init&&getKeyMap(old))&&old.detach&&old.detach(cm,val);val.attach&&val.attach(cm,old||null)});option("extraKeys",null);option("configureMouse",null);option("lineWrapping",!1,wrappingChanged,!0);option("gutters",[],function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm)},!0);option("fixedGutter",
!0,function(cm,val){cm.display.gutters.style.left=val?compensateForHScroll(cm.display)+"px":"0";cm.refresh()},!0);option("coverGutterNextToScrollbar",!1,function(cm){return updateScrollbars(cm)},!0);option("scrollbarStyle","native",function(cm){initScrollbars(cm);updateScrollbars(cm);cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft)},!0);option("lineNumbers",!1,function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm)},!0);option("firstLineNumber",
1,guttersChanged,!0);option("lineNumberFormatter",function(integer){return integer},guttersChanged,!0);option("showCursorWhenSelecting",!1,updateSelection,!0);option("resetSelectionOnContextMenu",!0);option("lineWiseCopyCut",!0);option("pasteLinesPerSelection",!0);option("readOnly",!1,function(cm,val){"nocursor"==val&&(onBlur(cm),cm.display.input.blur());cm.display.input.readOnlyChanged(val)});option("disableInput",!1,function(cm,val){val||cm.display.input.reset()},!0);option("dragDrop",!0,dragDropChanged);
option("allowDropFileTypes",null);option("cursorBlinkRate",530);option("cursorScrollMargin",0);option("cursorHeight",1,updateSelection,!0);option("singleCursorHeightPerLine",!0,updateSelection,!0);option("workTime",100);option("workDelay",100);option("flattenSpans",!0,resetModeState,!0);option("addModeClass",!1,resetModeState,!0);option("pollInterval",100);option("undoDepth",200,function(cm,val){return cm.doc.history.undoDepth=val});option("historyEventDelay",1250);option("viewportMargin",10,function(cm){return cm.refresh()},
!0);option("maxHighlightLength",1E4,resetModeState,!0);option("moveInputWithCursor",!0,function(cm,val){val||cm.display.input.resetPosition()});option("tabindex",null,function(cm,val){return cm.display.input.getField().tabIndex=val||""});option("autofocus",null);option("direction","ltr",function(cm,val){return cm.doc.setDirection(val)},!0)})(CodeMirror$1);(function(CodeMirror){var optionHandlers=CodeMirror.optionHandlers,helpers=CodeMirror.helpers={};CodeMirror.prototype={constructor:CodeMirror,focus:function(){window.focus();
this.display.input.focus()},setOption:function(option,value){var options=this.options,old=options[option];if(options[option]!=value||"mode"==option)options[option]=value,optionHandlers.hasOwnProperty(option)&&operation(this,optionHandlers[option])(this,value,old),signal(this,"optionChange",this,option)},getOption:function(option){return this.options[option]},getDoc:function(){return this.doc},addKeyMap:function(map$$1,bottom){this.state.keyMaps[bottom?"push":"unshift"](getKeyMap(map$$1))},removeKeyMap:function(map$$1){for(var maps=
this.state.keyMaps,i=0;i<maps.length;++i)if(maps[i]==map$$1||maps[i].name==map$$1)return maps.splice(i,1),!0},addOverlay:methodOp(function(spec,options){var mode=spec.token?spec:CodeMirror.getMode(this.options,spec);if(mode.startState)throw Error("Overlays may not be stateful.");insertSorted(this.state.overlays,{mode:mode,modeSpec:spec,opaque:options&&options.opaque,priority:options&&options.priority||0},function(overlay){return overlay.priority});this.state.modeGen++;regChange(this)}),removeOverlay:methodOp(function(spec){for(var overlays=
this.state.overlays,i=0;i<overlays.length;++i){var cur=overlays[i].modeSpec;if(cur==spec||"string"==typeof spec&&cur.name==spec){overlays.splice(i,1);this.state.modeGen++;regChange(this);break}}}),indentLine:methodOp(function(n,dir,aggressive){"string"!=typeof dir&&"number"!=typeof dir&&(dir=null==dir?this.options.smartIndent?"smart":"prev":dir?"add":"subtract");isLine(this.doc,n)&&indentLine(this,n,dir,aggressive)}),indentSelection:methodOp(function(how){for(var ranges=this.doc.sel.ranges,end=-1,
i=0;i<ranges.length;i++){var range$$1=ranges[i];if(range$$1.empty())range$$1.head.line>end&&(indentLine(this,range$$1.head.line,how,!0),end=range$$1.head.line,i==this.doc.sel.primIndex&&ensureCursorVisible(this));else{var from=range$$1.from();range$$1=range$$1.to();var start=Math.max(end,from.line);end=Math.min(this.lastLine(),range$$1.line-(range$$1.ch?0:1))+1;for(range$$1=start;range$$1<end;++range$$1)indentLine(this,range$$1,how);range$$1=this.doc.sel.ranges;0==from.ch&&ranges.length==range$$1.length&&
0<range$$1[i].from().ch&&replaceOneSelection(this.doc,i,new Range(from,range$$1[i].to()),sel_dontScroll)}}}),getTokenAt:function(pos,precise){return takeToken(this,pos,precise)},getLineTokens:function(line,precise){return takeToken(this,Pos(line),precise,!0)},getTokenTypeAt:function(pos){pos=clipPos(this.doc,pos);var styles=getLineStyles(this,getLine(this.doc,pos.line)),before=0,after=(styles.length-1)/2;pos=pos.ch;if(0==pos)styles=styles[2];else for(;;){var mid=before+after>>1;if((mid?styles[2*mid-
1]:0)>=pos)after=mid;else if(styles[2*mid+1]<pos)before=mid+1;else{styles=styles[2*mid+2];break}}before=styles?styles.indexOf("overlay "):-1;return 0>before?styles:0==before?null:styles.slice(0,before-1)},getModeAt:function(pos){var mode=this.doc.mode;return mode.innerMode?CodeMirror.innerMode(mode,this.getTokenAt(pos).state).mode:mode},getHelper:function(pos,type){return this.getHelpers(pos,type)[0]},getHelpers:function(pos,type){var found=[];if(!helpers.hasOwnProperty(type))return found;var help=
helpers[type];pos=this.getModeAt(pos);if("string"==typeof pos[type])help[pos[type]]&&found.push(help[pos[type]]);else if(pos[type])for(var i=0;i<pos[type].length;i++){var val=help[pos[type][i]];val&&found.push(val)}else pos.helperType&&help[pos.helperType]?found.push(help[pos.helperType]):help[pos.name]&&found.push(help[pos.name]);for(type=0;type<help._global.length;type++)i=help._global[type],i.pred(pos,this)&&-1==indexOf(found,i.val)&&found.push(i.val);return found},getStateAfter:function(line,
precise){var doc=this.doc;line=Math.max(doc.first,Math.min(null==line?doc.first+doc.size-1:line,doc.first+doc.size-1));return getContextBefore(this,line+1,precise).state},cursorCoords:function(start,mode){var range$$1=this.doc.sel.primary();start=null==start?range$$1.head:"object"==typeof start?clipPos(this.doc,start):start?range$$1.from():range$$1.to();return cursorCoords(this,start,mode||"page")},charCoords:function(pos,mode){return charCoords(this,clipPos(this.doc,pos),mode||"page")},coordsChar:function(coords,
mode){coords=fromCoordSystem(this,coords,mode||"page");return coordsChar(this,coords.left,coords.top)},lineAtHeight:function(height,mode){height=fromCoordSystem(this,{top:height,left:0},mode||"page").top;return lineAtHeight(this.doc,height+this.display.viewOffset)},heightAtLine:function(line,mode,includeWidgets){var end=!1;if("number"==typeof line){var last=this.doc.first+this.doc.size-1;line<this.doc.first?line=this.doc.first:line>last&&(line=last,end=!0);line=getLine(this.doc,line)}return intoCoordSystem(this,
line,{top:0,left:0},mode||"page",includeWidgets||end).top+(end?this.doc.height-heightAtLine(line):0)},defaultTextHeight:function(){return textHeight(this.display)},defaultCharWidth:function(){return charWidth(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(pos,node,scroll,vert,horiz){var display=this.display;pos=cursorCoords(this,clipPos(this.doc,pos));var top=pos.bottom,left=pos.left;node.style.position="absolute";node.setAttribute("cm-ignore-events",
"true");this.display.input.setUneditable(node);display.sizer.appendChild(node);if("over"==vert)top=pos.top;else if("above"==vert||"near"==vert){var vspace=Math.max(display.wrapper.clientHeight,this.doc.height),hspace=Math.max(display.sizer.clientWidth,display.lineSpace.clientWidth);("above"==vert||pos.bottom+node.offsetHeight>vspace)&&pos.top>node.offsetHeight?top=pos.top-node.offsetHeight:pos.bottom+node.offsetHeight<=vspace&&(top=pos.bottom);left+node.offsetWidth>hspace&&(left=hspace-node.offsetWidth)}node.style.top=
top+"px";node.style.left=node.style.right="";"right"==horiz?(left=display.sizer.clientWidth-node.offsetWidth,node.style.right="0px"):("left"==horiz?left=0:"middle"==horiz&&(left=(display.sizer.clientWidth-node.offsetWidth)/2),node.style.left=left+"px");scroll&&(pos=calculateScrollPos(this,{left:left,top:top,right:left+node.offsetWidth,bottom:top+node.offsetHeight}),null!=pos.scrollTop&&updateScrollTop(this,pos.scrollTop),null!=pos.scrollLeft&&setScrollLeft(this,pos.scrollLeft))},triggerOnKeyDown:methodOp(onKeyDown),
triggerOnKeyPress:methodOp(onKeyPress),triggerOnKeyUp:onKeyUp,triggerOnMouseDown:methodOp(onMouseDown),execCommand:function(cmd){if(commands.hasOwnProperty(cmd))return commands[cmd].call(null,this)},triggerElectric:methodOp(function(text){triggerElectric(this,text)}),findPosH:function(from,amount,unit,visually){var dir=1;0>amount&&(dir=-1,amount=-amount);from=clipPos(this.doc,from);for(var i=0;i<amount&&(from=findPosH(this.doc,from,dir,unit,visually),!from.hitSide);++i);return from},moveH:methodOp(function(dir,
unit){var this$1=this;this.extendSelectionsBy(function(range$$1){return this$1.display.shift||this$1.doc.extend||range$$1.empty()?findPosH(this$1.doc,range$$1.head,dir,unit,this$1.options.rtlMoveVisually):0>dir?range$$1.from():range$$1.to()},sel_move)}),deleteH:methodOp(function(dir,unit){var doc=this.doc;this.doc.sel.somethingSelected()?doc.replaceSelection("",null,"+delete"):deleteNearSelection(this,function(range$$1){var other=findPosH(doc,range$$1.head,dir,unit,!1);return 0>dir?{from:other,to:range$$1.head}:
{from:range$$1.head,to:other}})}),findPosV:function(from,amount,unit,goalColumn){var dir=1;0>amount&&(dir=-1,amount=-amount);var cur=clipPos(this.doc,from);for(from=0;from<amount&&(cur=cursorCoords(this,cur,"div"),null==goalColumn?goalColumn=cur.left:cur.left=goalColumn,cur=findPosV(this,cur,dir,unit),!cur.hitSide);++from);return cur},moveV:methodOp(function(dir,unit){var this$1=this,doc=this.doc,goals=[],collapse=!this.display.shift&&!doc.extend&&doc.sel.somethingSelected();doc.extendSelectionsBy(function(range$$1){if(collapse)return 0>
dir?range$$1.from():range$$1.to();var headPos=cursorCoords(this$1,range$$1.head,"div");null!=range$$1.goalColumn&&(headPos.left=range$$1.goalColumn);goals.push(headPos.left);var pos=findPosV(this$1,headPos,dir,unit);"page"==unit&&range$$1==doc.sel.primary()&&addToScrollTop(this$1,charCoords(this$1,pos,"div").top-headPos.top);return pos},sel_move);if(goals.length)for(var i=0;i<doc.sel.ranges.length;i++)doc.sel.ranges[i].goalColumn=goals[i]}),findWordAt:function(pos){var line=getLine(this.doc,pos.line).text,
start=pos.ch,end=pos.ch;if(line){var helper=this.getHelper(pos,"wordChars");"before"!=pos.sticky&&end!=line.length||!start?++end:--start;var startChar=line.charAt(start);for(startChar=isWordChar(startChar,helper)?function(ch){return isWordChar(ch,helper)}:/\s/.test(startChar)?function(ch){return/\s/.test(ch)}:function(ch){return!/\s/.test(ch)&&!isWordChar(ch)};0<start&&startChar(line.charAt(start-1));)--start;for(;end<line.length&&startChar(line.charAt(end));)++end}return new Range(Pos(pos.line,start),
Pos(pos.line,end))},toggleOverwrite:function(value){if(null==value||value!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?addClass(this.display.cursorDiv,"CodeMirror-overwrite"):rmClass(this.display.cursorDiv,"CodeMirror-overwrite"),signal(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==activeElt()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:methodOp(function(x,y){scrollToCoords(this,
x,y)}),getScrollInfo:function(){var scroller=this.display.scroller;return{left:scroller.scrollLeft,top:scroller.scrollTop,height:scroller.scrollHeight-scrollGap(this)-this.display.barHeight,width:scroller.scrollWidth-scrollGap(this)-this.display.barWidth,clientHeight:displayHeight(this),clientWidth:displayWidth(this)}},scrollIntoView:methodOp(function(range$$1,margin){null==range$$1?(range$$1={from:this.doc.sel.primary().head,to:null},null==margin&&(margin=this.options.cursorScrollMargin)):"number"==
typeof range$$1?range$$1={from:Pos(range$$1,0),to:null}:null==range$$1.from&&(range$$1={from:range$$1,to:null});range$$1.to||(range$$1.to=range$$1.from);range$$1.margin=margin||0;null!=range$$1.from.line?(resolveScrollToPos(this),this.curOp.scrollToPos=range$$1):scrollToCoordsRange(this,range$$1.from,range$$1.to,range$$1.margin)}),setSize:methodOp(function(width,height){var this$1=this,interpret=function(val){return"number"==typeof val||/^\d+$/.test(String(val))?val+"px":val};null!=width&&(this.display.wrapper.style.width=
interpret(width));null!=height&&(this.display.wrapper.style.height=interpret(height));this.options.lineWrapping&&clearLineMeasurementCache(this);var lineNo$$1=this.display.viewFrom;this.doc.iter(lineNo$$1,this.display.viewTo,function(line){if(line.widgets)for(var i=0;i<line.widgets.length;i++)if(line.widgets[i].noHScroll){regLineChange(this$1,lineNo$$1,"widget");break}++lineNo$$1});this.curOp.forceUpdate=!0;signal(this,"refresh",this)}),operation:function(f){return runInOp(this,f)},startOperation:function(){return startOperation(this)},
endOperation:function(){return endOperation(this)},refresh:methodOp(function(){var oldHeight=this.display.cachedTextHeight;regChange(this);this.curOp.forceUpdate=!0;clearCaches(this);scrollToCoords(this,this.doc.scrollLeft,this.doc.scrollTop);updateGutterSpace(this);(null==oldHeight||.5<Math.abs(oldHeight-textHeight(this.display)))&&estimateLineHeights(this);signal(this,"refresh",this)}),swapDoc:methodOp(function(doc){var old=this.doc;old.cm=null;attachDoc(this,doc);clearCaches(this);this.display.input.reset();
scrollToCoords(this,doc.scrollLeft,doc.scrollTop);this.curOp.forceScroll=!0;signalLater(this,"swapDoc",this,old);return old}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};eventMixin(CodeMirror);CodeMirror.registerHelper=function(type,name,value){helpers.hasOwnProperty(type)||(helpers[type]=CodeMirror[type]=
{_global:[]});helpers[type][name]=value};CodeMirror.registerGlobalHelper=function(type,name,predicate,value){CodeMirror.registerHelper(type,name,value);helpers[type]._global.push({pred:predicate,val:value})}})(CodeMirror$1);var dontDelegate="iter insert remove copy getEditor constructor".split(" "),prop$jscomp$0;for(prop$jscomp$0 in Doc.prototype)Doc.prototype.hasOwnProperty(prop$jscomp$0)&&0>indexOf(dontDelegate,prop$jscomp$0)&&(CodeMirror$1.prototype[prop$jscomp$0]=function(method){return function(){return method.apply(this.doc,
arguments)}}(Doc.prototype[prop$jscomp$0]));eventMixin(Doc);CodeMirror$1.inputStyles={textarea:TextareaInput,contenteditable:ContentEditableInput};CodeMirror$1.defineMode=function(name){CodeMirror$1.defaults.mode||"null"==name||(CodeMirror$1.defaults.mode=name);defineMode.apply(this,arguments)};CodeMirror$1.defineMIME=function(mime,spec){mimeModes[mime]=spec};CodeMirror$1.defineMode("null",function(){return{token:function(stream){return stream.skipToEnd()}}});CodeMirror$1.defineMIME("text/plain",
"null");CodeMirror$1.defineExtension=function(name,func){CodeMirror$1.prototype[name]=func};CodeMirror$1.defineDocExtension=function(name,func){Doc.prototype[name]=func};CodeMirror$1.fromTextArea=function(textarea,options){function save(){textarea.value=cm$jscomp$0.getValue()}options=options?copyObj(options):{};options.value=textarea.value;!options.tabindex&&textarea.tabIndex&&(options.tabindex=textarea.tabIndex);!options.placeholder&&textarea.placeholder&&(options.placeholder=textarea.placeholder);
if(null==options.autofocus){var hasFocus=activeElt();options.autofocus=hasFocus==textarea||null!=textarea.getAttribute("autofocus")&&hasFocus==document.body}if(textarea.form&&(on(textarea.form,"submit",save),!options.leaveSubmitMethodAlone)){var form=textarea.form;var realSubmit=form.submit;try{var wrappedSubmit=form.submit=function(){save();form.submit=realSubmit;form.submit();form.submit=wrappedSubmit}}catch(e){}}options.finishInit=function(cm){cm.save=save;cm.getTextArea=function(){return textarea};
cm.toTextArea=function(){cm.toTextArea=isNaN;save();textarea.parentNode.removeChild(cm.getWrapperElement());textarea.style.display="";textarea.form&&(off(textarea.form,"submit",save),"function"==typeof textarea.form.submit&&(textarea.form.submit=realSubmit))}};textarea.style.display="none";var cm$jscomp$0=CodeMirror$1(function(node){return textarea.parentNode.insertBefore(node,textarea.nextSibling)},options);return cm$jscomp$0};(function(CodeMirror){CodeMirror.off=off;CodeMirror.on=on;CodeMirror.wheelEventPixels=
wheelEventPixels;CodeMirror.Doc=Doc;CodeMirror.splitLines=splitLinesAuto;CodeMirror.countColumn=countColumn;CodeMirror.findColumn=findColumn;CodeMirror.isWordChar=isWordCharBasic;CodeMirror.Pass=Pass;CodeMirror.signal=signal;CodeMirror.Line=Line;CodeMirror.changeEnd=changeEnd;CodeMirror.scrollbarModel=scrollbarModel;CodeMirror.Pos=Pos;CodeMirror.cmpPos=cmp;CodeMirror.modes=modes;CodeMirror.mimeModes=mimeModes;CodeMirror.resolveMode=resolveMode;CodeMirror.getMode=getMode;CodeMirror.modeExtensions=
modeExtensions;CodeMirror.extendMode=extendMode;CodeMirror.copyState=copyState;CodeMirror.startState=startState;CodeMirror.innerMode=innerMode;CodeMirror.commands=commands;CodeMirror.keyMap=keyMap;CodeMirror.keyName=keyName;CodeMirror.isModifierKey=isModifierKey;CodeMirror.lookupKey=lookupKey;CodeMirror.normalizeKeyMap=normalizeKeyMap;CodeMirror.StringStream=StringStream;CodeMirror.SharedTextMarker=SharedTextMarker;CodeMirror.TextMarker=TextMarker;CodeMirror.LineWidget=LineWidget;CodeMirror.e_preventDefault=
e_preventDefault;CodeMirror.e_stopPropagation=e_stopPropagation;CodeMirror.e_stop=e_stop;CodeMirror.addClass=addClass;CodeMirror.contains=contains;CodeMirror.rmClass=rmClass;CodeMirror.keyNames=keyNames})(CodeMirror$1);CodeMirror$1.version="5.36.0";return CodeMirror$1})}
//# sourceMappingURL=module$node_modules$codemirror$lib$codemirror.js.map

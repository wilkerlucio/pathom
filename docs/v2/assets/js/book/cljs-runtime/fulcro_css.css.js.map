{"version":3,"sources":["fulcro_css/css.cljc"],"mappings":";;;;;;;;;;AAUA;;;AAAKA,AAAoDC;AACzD,AAAKC,AAAaC;AAClB;;;;AAAKC,AAEHC;AACF,AAAKC,AAAcC;AACnB;;;AAAKC,AAAqEC;AAC1E;;;AAAKC,AAA6EC;AAClF;;;AAAKC,AAA0GC;AAC/G;;;AAAKC,AAAuGC;AAC5G;;;AAAKC,AAAsHC;AAC3H;;;AAAKC,AAAsHC;AAC3H;;;AAAKC,AAAoIC;AAEzI,AAAA,AAAMC,AACHC,AAASC;AADZ,AAEE,AAAMC,AAAoB,AAAA,AAAWF;AAC/BG,AAAoB,AAAA,AAACC,AAAUF;AADrC,AAEE,AAACG,AAAY,AAAA,AAACC,AAAa,AAAA,AAACE;AAADD;AAAA,AAAM,AAAI,AAAAA,AAACE;AACH,AAAAF,AAACG,AAAmBT;;AADtBM;;;AAGJJ;;AAEjC;;;AAAA,AAAMQ,AAEHC;AAFH,AAGE,AAACC,AAAc,AAAKC;AAAL,AACE,AACE,AAACC,AAAqBD;AAAK,AAACE,AAAeF,AAAIF;;AADjD,AAEE,AAACK,AAAaH;AAAK,AAACf,AAAkBe,AAAIF;;AAF5C,AAGaE;;;;AAAM,AAACvB,AAAAA,AAAAA,AAAgBqB,AAAAA;;AAEvD;;;AAAA,AAAMM,AAEHN;AAFH,AAGE,AAACO,AAAO,AAACR,AAAaC,AACpB,AAACvB,AAAAA,AAAAA,AAAiBuB,AAAAA;;AAEtB;;;AAAA,AAAMQ,AAEHR;AAFH,AAGE,AAAMS,AAAsB,AAACH,AAAcN;AACrCU,AAAsB,AAACC,AAAS,AAAC5B,AAAAA,AAAAA,AAAoBiB,AAAAA;AACrDY,AAAsB,AAAA,AAACG;AAADF,AAAAC;AAAA,AAAS,AAAAD,AAACG,AAAQ,AAAAF,AAACR;;AAAnB,AAAyCI;AAFrE,AAGE,AAACH,AAAOE,AAAUG;;AAEtB;;;;;;;AAAA,AAAMK,AAMHjB;AANH,AAOE,AAACkB,AAAM,AAACV,AAAQR;;AAGf;;;;AAAA,AAAMmB,AAGHnB;AAHH,AAIE,AAAA,AAAA,AAAA,AAACoB,AAA0E,AAACF,AAAM,AAACV,AAAQR;;AAG7F;;;AAAA,AAAMqB,AACHC;AADH,AAEE,AAAAC,AAAqB,AAAiBE,AAAYH;AAAlD,AAAA,AAAAC;AAAA,AAAAA,AAASC;AAAT,AACE,AAAME,AAAO,AAAcF;AAA3B,AACE,AAAcE,AAAOF;;AAFzB;;;AAKF;;;;AAAA,AAAMG,AAGHL,AAAGM;AAHN,AAIE,AAACP,AAAgBC;;AACjB,AAAMO,AAAU,AAAA,AAAgBJ;AAAhC,AACE,AAAM,AAAaI,AAAW,AAACX,AAAM,AAACV,AAAQoB;;AAC9C,AAAA,AAAeC,AAAeP;;AAC9B,AAAc,AAAQG,AAAaI","names":["fulcro-css.css/cssify","fulcro-css.css-implementation/cssify","fulcro-css.css/fq-component","fulcro-css.css-implementation/fq-component","fulcro-css.css/local-class","fulcro-css.css-implementation/local-class","fulcro-css.css/set-classname","fulcro-css.css-implementation/set-classname","fulcro-css.css/CSS?","fulcro-css.css-implementation/CSS?","fulcro-css.css/Global?","fulcro-css.css-implementation/Global?","fulcro-css.css/get-global-rules","fulcro-css.css-implementation/get-global-rules","fulcro-css.css/get-local-rules","fulcro-css.css-implementation/get-local-rules","fulcro-css.css/get-includes","fulcro-css.css-implementation/get-includes","fulcro-css.css/get-nested-includes","fulcro-css.css-implementation/get-nested-includes","fulcro-css.css/get-classnames","fulcro-css.css-implementation/get-classnames","fulcro-css.css/localize-selector","selector","comp","val","split-cns-selectors","clojure.string.split","garden.selectors/selector","clojure.string.join","p1__58176#","cljs.core.map","fulcro-css.css-implementation/prefixed-name?","fulcro-css.css-implementation/localize-name","fulcro-css.css/localize-css","component","clojure.walk/postwalk","ele","fulcro-css.css-implementation/prefixed-keyword?","fulcro-css.css-implementation/localize-kw","fulcro-css.css-implementation/selector?","fulcro-css.css/get-css-rules","cljs.core.concat","fulcro-css.css/get-css","own-rules","nested-children","cljs.core.distinct","nested-children-rules","p1__58180#","p2__58181#","cljs.core.reduce","cljs.core.into","fulcro-css.css/raw-css","garden.core.css","fulcro-css.css/style-element","js/React.createElement","fulcro-css.css/remove-from-dom","id","temp__5718__auto__","old-element","js/document","parent","fulcro-css.css/upsert-css","root-component","style-ele"],"sourcesContent":["(ns fulcro-css.css\n  (:require [cljs.tagged-literals]\n            [fulcro-css.css-protocols :as cp :refer [local-rules include-children global-rules]]\n            [fulcro-css.css-implementation :as ci]\n            [clojure.string :as str]\n            #?(:cljs [cljsjs.react.dom])\n            [clojure.walk :as walk]\n            [garden.core :as g]\n            [garden.selectors :as gs]))\n\n(def cssify \"Replaces slashes and dots with underscore.\" ci/cssify)\n(def fq-component ci/fq-component)\n(def local-class \"Generates a string name of a localized CSS class. This function combines the fully-qualified name of the given class\n     with the (optional) specified name.\"\n  ci/local-class)\n(def set-classname ci/set-classname)\n(def CSS? \"`(CSS? class)` : Returns true if the given component has css.\" ci/CSS?)\n(def Global? \"`(Global? class)` : Returns true if the component has global rules\" ci/Global?)\n(def get-global-rules \"`(get-global-rules class)` : Get the *raw* value from the global-rules of a component.\" ci/get-global-rules)\n(def get-local-rules \"`(get-local-rules class)` : Get the *raw* value from the local-rules of a component.\" ci/get-local-rules)\n(def get-includes \"`(get-inculdes class)` :Returns the list of components from the include-children method of a component\" ci/get-includes)\n(def get-nested-includes \"`(get-nested-includes class)` : Recursively finds all includes starting at the given component.\" ci/get-nested-includes)\n(def get-classnames \"`(get-classnames class)` : Returns a map from user-given CSS rule names to localized names of the given component.\" ci/get-classnames)\n\n(defn localize-selector\n  [selector comp]\n  (let [val                 (:selector selector)\n        split-cns-selectors (str/split val #\" \")]\n    (gs/selector (str/join \" \" (map #(if (ci/prefixed-name? %)\n                                       (ci/localize-name % comp)\n                                       %)\n                                 split-cns-selectors)))))\n\n(defn localize-css\n  \"Converts prefixed keywords into localized keywords and localizes the values of garden selectors\"\n  [component]\n  (walk/postwalk (fn [ele]\n                   (cond\n                     (ci/prefixed-keyword? ele) (ci/localize-kw ele component)\n                     (ci/selector? ele) (localize-selector ele component)\n                     :otherwise ele)) (get-local-rules component)))\n\n(defn get-css-rules\n  \"Gets the raw local and global rules from the given component.\"\n  [component]\n  (concat (localize-css component)\n    (get-global-rules component)))\n\n(defn get-css\n  \"Recursively gets all global and localized rules (in garden notation) starting at the given component.\"\n  [component]\n  (let [own-rules             (get-css-rules component)\n        nested-children       (distinct (get-nested-includes component))\n        nested-children-rules (reduce #(into %1 (get-css-rules %2)) [] nested-children)]\n    (concat own-rules nested-children-rules)))\n\n(defn raw-css\n  \"Returns a string that contains the raw CSS for the rules defined on the given component's sub-tree. This can be used for\n   server-side rendering of the style element, or in a `style` element as the :dangerouslySetInnerHTML/:html value:\n\n   (dom/style #js {:dangerouslySetInnerHTML #js {:__html (raw-css component)}})\n   \"\n  [component]\n  (g/css (get-css component)))\n\n#?(:cljs\n   (defn style-element\n     \"Returns a React Style element with the (recursive) CSS of the given component. Useful for directly embedding in your UI VDOM.\n     DEPRECATED: Use fulcro-css.css-injection/style-element instead.\"\n     [component]\n     (js/React.createElement \"style\" #js {:dangerouslySetInnerHTML #js {:__html (g/css (get-css component))}})))\n\n#?(:cljs\n   (defn remove-from-dom \"Remove the given element from the DOM by ID\"\n     [id]\n     (if-let [old-element (.getElementById js/document id)]\n       (let [parent (.-parentNode old-element)]\n         (.removeChild parent old-element)))))\n\n#?(:cljs\n   (defn upsert-css\n     \"(Re)place the STYLE element with the provided ID on the document's DOM  with the co-located CSS of the specified component.\n     DEPRECATED: Use fulcro-css.css-injection/upsert-css instead.\"\n     [id root-component]\n     (remove-from-dom id)\n     (let [style-ele (.createElement js/document \"style\")]\n       (set! (.-innerHTML style-ele) (g/css (get-css root-component)))\n       (.setAttribute style-ele \"id\" id)\n       (.appendChild (.-body js/document) style-ele))))\n\n\n"]}